/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/.pnpm/promise-limit@2.7.0/node_modules/promise-limit/index.js
var require_promise_limit = __commonJS({
  "node_modules/.pnpm/promise-limit@2.7.0/node_modules/promise-limit/index.js"(exports, module2) {
    function limiter(count) {
      var outstanding = 0;
      var jobs = [];
      function remove() {
        outstanding--;
        if (outstanding < count) {
          dequeue();
        }
      }
      function dequeue() {
        var job = jobs.shift();
        semaphore.queue = jobs.length;
        if (job) {
          run(job.fn).then(job.resolve).catch(job.reject);
        }
      }
      function queue(fn) {
        return new Promise(function(resolve, reject) {
          jobs.push({ fn, resolve, reject });
          semaphore.queue = jobs.length;
        });
      }
      function run(fn) {
        outstanding++;
        try {
          return Promise.resolve(fn()).then(function(result) {
            remove();
            return result;
          }, function(error) {
            remove();
            throw error;
          });
        } catch (err) {
          remove();
          return Promise.reject(err);
        }
      }
      var semaphore = function(fn) {
        if (outstanding >= count) {
          return queue(fn);
        } else {
          return run(fn);
        }
      };
      return semaphore;
    }
    function map(items, mapper) {
      var failed = false;
      var limit = this;
      return Promise.all(items.map(function() {
        var args = arguments;
        return limit(function() {
          if (!failed) {
            return mapper.apply(void 0, args).catch(function(e) {
              failed = true;
              throw e;
            });
          }
        });
      }));
    }
    function addExtras(fn) {
      fn.queue = 0;
      fn.map = map;
      return fn;
    }
    module2.exports = function(count) {
      if (count) {
        return addExtras(limiter(count));
      } else {
        return addExtras(function(fn) {
          return fn();
        });
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SQLitePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  localDBPath: ".obsidian-sql-lite.db",
  remoteDBUrl: "",
  remoteDBSecret: ""
};
var SQLitePluginSettingTab = class extends import_obsidian.PluginSettingTab {
  plugin;
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("DB URL").setDesc("The Turso DB url").addText((text) => text.setPlaceholder("Enter your url").setValue(this.plugin.settings.remoteDBUrl).onChange(async (value) => {
      this.plugin.settings.remoteDBUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("DB Secret").setDesc("The Turso DB secret").addText((text) => text.setPlaceholder("Enter your secret").setValue(this.plugin.settings.remoteDBSecret).onChange(async (value) => {
      this.plugin.settings.remoteDBSecret = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Database file name").setDesc("The name of the SQLite database file (stored in .obsidian folder)").addText((text) => text.setPlaceholder("Enter file name").setValue(this.plugin.settings.localDBPath).onChange(async (value) => {
      this.plugin.settings.localDBPath = value;
      await this.plugin.saveSettings();
    }));
  }
};

// node_modules/.pnpm/@libsql+core@0.10.0/node_modules/@libsql/core/lib-esm/api.js
var LibsqlError = class extends Error {
  /** Machine-readable error code. */
  code;
  /** Raw numeric error code */
  rawCode;
  constructor(message, code, rawCode, cause) {
    if (code !== void 0) {
      message = `${code}: ${message}`;
    }
    super(message, { cause });
    this.code = code;
    this.rawCode = rawCode;
    this.name = "LibsqlError";
  }
};

// node_modules/.pnpm/@libsql+core@0.10.0/node_modules/@libsql/core/lib-esm/uri.js
function parseUri(text) {
  const match = URI_RE.exec(text);
  if (match === null) {
    throw new LibsqlError(`The URL '${text}' is not in a valid format`, "URL_INVALID");
  }
  const groups = match.groups;
  const scheme = groups["scheme"];
  const authority = groups["authority"] !== void 0 ? parseAuthority(groups["authority"]) : void 0;
  const path2 = percentDecode(groups["path"]);
  const query = groups["query"] !== void 0 ? parseQuery(groups["query"]) : void 0;
  const fragment = groups["fragment"] !== void 0 ? percentDecode(groups["fragment"]) : void 0;
  return { scheme, authority, path: path2, query, fragment };
}
var URI_RE = (() => {
  const SCHEME = "(?<scheme>[A-Za-z][A-Za-z.+-]*)";
  const AUTHORITY = "(?<authority>[^/?#]*)";
  const PATH = "(?<path>[^?#]*)";
  const QUERY = "(?<query>[^#]*)";
  const FRAGMENT = "(?<fragment>.*)";
  return new RegExp(`^${SCHEME}:(//${AUTHORITY})?${PATH}(\\?${QUERY})?(#${FRAGMENT})?$`, "su");
})();
function parseAuthority(text) {
  const match = AUTHORITY_RE.exec(text);
  if (match === null) {
    throw new LibsqlError("The authority part of the URL is not in a valid format", "URL_INVALID");
  }
  const groups = match.groups;
  const host = percentDecode(groups["host_br"] ?? groups["host"]);
  const port = groups["port"] ? parseInt(groups["port"], 10) : void 0;
  const userinfo = groups["username"] !== void 0 ? {
    username: percentDecode(groups["username"]),
    password: groups["password"] !== void 0 ? percentDecode(groups["password"]) : void 0
  } : void 0;
  return { host, port, userinfo };
}
var AUTHORITY_RE = (() => {
  return new RegExp(`^((?<username>[^:]*)(:(?<password>.*))?@)?((?<host>[^:\\[\\]]*)|(\\[(?<host_br>[^\\[\\]]*)\\]))(:(?<port>[0-9]*))?$`, "su");
})();
function parseQuery(text) {
  const sequences = text.split("&");
  const pairs = [];
  for (const sequence of sequences) {
    if (sequence === "") {
      continue;
    }
    let key;
    let value;
    const splitIdx = sequence.indexOf("=");
    if (splitIdx < 0) {
      key = sequence;
      value = "";
    } else {
      key = sequence.substring(0, splitIdx);
      value = sequence.substring(splitIdx + 1);
    }
    pairs.push({
      key: percentDecode(key.replaceAll("+", " ")),
      value: percentDecode(value.replaceAll("+", " "))
    });
  }
  return { pairs };
}
function percentDecode(text) {
  try {
    return decodeURIComponent(text);
  } catch (e) {
    if (e instanceof URIError) {
      throw new LibsqlError(`URL component has invalid percent encoding: ${e}`, "URL_INVALID", void 0, e);
    }
    throw e;
  }
}
function encodeBaseUrl(scheme, authority, path2) {
  if (authority === void 0) {
    throw new LibsqlError(`URL with scheme ${JSON.stringify(scheme + ":")} requires authority (the "//" part)`, "URL_INVALID");
  }
  const schemeText = `${scheme}:`;
  const hostText = encodeHost(authority.host);
  const portText = encodePort(authority.port);
  const userinfoText = encodeUserinfo(authority.userinfo);
  const authorityText = `//${userinfoText}${hostText}${portText}`;
  let pathText = path2.split("/").map(encodeURIComponent).join("/");
  if (pathText !== "" && !pathText.startsWith("/")) {
    pathText = "/" + pathText;
  }
  return new URL(`${schemeText}${authorityText}${pathText}`);
}
function encodeHost(host) {
  return host.includes(":") ? `[${encodeURI(host)}]` : encodeURI(host);
}
function encodePort(port) {
  return port !== void 0 ? `:${port}` : "";
}
function encodeUserinfo(userinfo) {
  if (userinfo === void 0) {
    return "";
  }
  const usernameText = encodeURIComponent(userinfo.username);
  const passwordText = userinfo.password !== void 0 ? `:${encodeURIComponent(userinfo.password)}` : "";
  return `${usernameText}${passwordText}@`;
}

// node_modules/.pnpm/js-base64@3.7.7/node_modules/js-base64/base64.mjs
var version = "3.7.7";
var VERSION = version;
var _hasBuffer = typeof Buffer === "function";
var _TD = typeof TextDecoder === "function" ? new TextDecoder() : void 0;
var _TE = typeof TextEncoder === "function" ? new TextEncoder() : void 0;
var b64ch = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
var b64chs = Array.prototype.slice.call(b64ch);
var b64tab = ((a) => {
  let tab = {};
  a.forEach((c, i) => tab[c] = i);
  return tab;
})(b64chs);
var b64re = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;
var _fromCC = String.fromCharCode.bind(String);
var _U8Afrom = typeof Uint8Array.from === "function" ? Uint8Array.from.bind(Uint8Array) : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));
var _mkUriSafe = (src) => src.replace(/=/g, "").replace(/[+\/]/g, (m0) => m0 == "+" ? "-" : "_");
var _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\+\/]/g, "");
var btoaPolyfill = (bin) => {
  let u32, c0, c1, c2, asc = "";
  const pad = bin.length % 3;
  for (let i = 0; i < bin.length; ) {
    if ((c0 = bin.charCodeAt(i++)) > 255 || (c1 = bin.charCodeAt(i++)) > 255 || (c2 = bin.charCodeAt(i++)) > 255)
      throw new TypeError("invalid character found");
    u32 = c0 << 16 | c1 << 8 | c2;
    asc += b64chs[u32 >> 18 & 63] + b64chs[u32 >> 12 & 63] + b64chs[u32 >> 6 & 63] + b64chs[u32 & 63];
  }
  return pad ? asc.slice(0, pad - 3) + "===".substring(pad) : asc;
};
var _btoa = typeof btoa === "function" ? (bin) => btoa(bin) : _hasBuffer ? (bin) => Buffer.from(bin, "binary").toString("base64") : btoaPolyfill;
var _fromUint8Array = _hasBuffer ? (u8a) => Buffer.from(u8a).toString("base64") : (u8a) => {
  const maxargs = 4096;
  let strs = [];
  for (let i = 0, l = u8a.length; i < l; i += maxargs) {
    strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));
  }
  return _btoa(strs.join(""));
};
var fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);
var cb_utob = (c) => {
  if (c.length < 2) {
    var cc = c.charCodeAt(0);
    return cc < 128 ? c : cc < 2048 ? _fromCC(192 | cc >>> 6) + _fromCC(128 | cc & 63) : _fromCC(224 | cc >>> 12 & 15) + _fromCC(128 | cc >>> 6 & 63) + _fromCC(128 | cc & 63);
  } else {
    var cc = 65536 + (c.charCodeAt(0) - 55296) * 1024 + (c.charCodeAt(1) - 56320);
    return _fromCC(240 | cc >>> 18 & 7) + _fromCC(128 | cc >>> 12 & 63) + _fromCC(128 | cc >>> 6 & 63) + _fromCC(128 | cc & 63);
  }
};
var re_utob = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;
var utob = (u) => u.replace(re_utob, cb_utob);
var _encode = _hasBuffer ? (s) => Buffer.from(s, "utf8").toString("base64") : _TE ? (s) => _fromUint8Array(_TE.encode(s)) : (s) => _btoa(utob(s));
var encode = (src, urlsafe = false) => urlsafe ? _mkUriSafe(_encode(src)) : _encode(src);
var encodeURI2 = (src) => encode(src, true);
var re_btou = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;
var cb_btou = (cccc) => {
  switch (cccc.length) {
    case 4:
      var cp = (7 & cccc.charCodeAt(0)) << 18 | (63 & cccc.charCodeAt(1)) << 12 | (63 & cccc.charCodeAt(2)) << 6 | 63 & cccc.charCodeAt(3), offset = cp - 65536;
      return _fromCC((offset >>> 10) + 55296) + _fromCC((offset & 1023) + 56320);
    case 3:
      return _fromCC((15 & cccc.charCodeAt(0)) << 12 | (63 & cccc.charCodeAt(1)) << 6 | 63 & cccc.charCodeAt(2));
    default:
      return _fromCC((31 & cccc.charCodeAt(0)) << 6 | 63 & cccc.charCodeAt(1));
  }
};
var btou = (b) => b.replace(re_btou, cb_btou);
var atobPolyfill = (asc) => {
  asc = asc.replace(/\s+/g, "");
  if (!b64re.test(asc))
    throw new TypeError("malformed base64.");
  asc += "==".slice(2 - (asc.length & 3));
  let u24, bin = "", r1, r2;
  for (let i = 0; i < asc.length; ) {
    u24 = b64tab[asc.charAt(i++)] << 18 | b64tab[asc.charAt(i++)] << 12 | (r1 = b64tab[asc.charAt(i++)]) << 6 | (r2 = b64tab[asc.charAt(i++)]);
    bin += r1 === 64 ? _fromCC(u24 >> 16 & 255) : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255) : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);
  }
  return bin;
};
var _atob = typeof atob === "function" ? (asc) => atob(_tidyB64(asc)) : _hasBuffer ? (asc) => Buffer.from(asc, "base64").toString("binary") : atobPolyfill;
var _toUint8Array = _hasBuffer ? (a) => _U8Afrom(Buffer.from(a, "base64")) : (a) => _U8Afrom(_atob(a).split("").map((c) => c.charCodeAt(0)));
var toUint8Array = (a) => _toUint8Array(_unURI(a));
var _decode = _hasBuffer ? (a) => Buffer.from(a, "base64").toString("utf8") : _TD ? (a) => _TD.decode(_toUint8Array(a)) : (a) => btou(_atob(a));
var _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == "-" ? "+" : "/"));
var decode = (src) => _decode(_unURI(src));
var isValid = (src) => {
  if (typeof src !== "string")
    return false;
  const s = src.replace(/\s+/g, "").replace(/={0,2}$/, "");
  return !/[^\s0-9a-zA-Z\+/]/.test(s) || !/[^\s0-9a-zA-Z\-_]/.test(s);
};
var _noEnum = (v) => {
  return {
    value: v,
    enumerable: false,
    writable: true,
    configurable: true
  };
};
var extendString = function() {
  const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));
  _add("fromBase64", function() {
    return decode(this);
  });
  _add("toBase64", function(urlsafe) {
    return encode(this, urlsafe);
  });
  _add("toBase64URI", function() {
    return encode(this, true);
  });
  _add("toBase64URL", function() {
    return encode(this, true);
  });
  _add("toUint8Array", function() {
    return toUint8Array(this);
  });
};
var extendUint8Array = function() {
  const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));
  _add("toBase64", function(urlsafe) {
    return fromUint8Array(this, urlsafe);
  });
  _add("toBase64URI", function() {
    return fromUint8Array(this, true);
  });
  _add("toBase64URL", function() {
    return fromUint8Array(this, true);
  });
};
var extendBuiltins = () => {
  extendString();
  extendUint8Array();
};
var gBase64 = {
  version,
  VERSION,
  atob: _atob,
  atobPolyfill,
  btoa: _btoa,
  btoaPolyfill,
  fromBase64: decode,
  toBase64: encode,
  encode,
  encodeURI: encodeURI2,
  encodeURL: encodeURI2,
  utob,
  btou,
  decode,
  isValid,
  fromUint8Array,
  toUint8Array,
  extendString,
  extendUint8Array,
  extendBuiltins
};

// node_modules/.pnpm/@libsql+core@0.10.0/node_modules/@libsql/core/lib-esm/util.js
var supportedUrlLink = "https://github.com/libsql/libsql-client-ts#supported-urls";
function transactionModeToBegin(mode) {
  if (mode === "write") {
    return "BEGIN IMMEDIATE";
  } else if (mode === "read") {
    return "BEGIN TRANSACTION READONLY";
  } else if (mode === "deferred") {
    return "BEGIN DEFERRED";
  } else {
    throw RangeError('Unknown transaction mode, supported values are "write", "read" and "deferred"');
  }
}
var ResultSetImpl = class {
  columns;
  columnTypes;
  rows;
  rowsAffected;
  lastInsertRowid;
  constructor(columns, columnTypes, rows, rowsAffected, lastInsertRowid) {
    this.columns = columns;
    this.columnTypes = columnTypes;
    this.rows = rows;
    this.rowsAffected = rowsAffected;
    this.lastInsertRowid = lastInsertRowid;
  }
  toJSON() {
    return {
      columns: this.columns,
      columnTypes: this.columnTypes,
      rows: this.rows.map(rowToJson),
      rowsAffected: this.rowsAffected,
      lastInsertRowid: this.lastInsertRowid !== void 0 ? "" + this.lastInsertRowid : null
    };
  }
};
function rowToJson(row) {
  return Array.prototype.map.call(row, valueToJson);
}
function valueToJson(value) {
  if (typeof value === "bigint") {
    return "" + value;
  } else if (value instanceof ArrayBuffer) {
    return gBase64.fromUint8Array(new Uint8Array(value));
  } else {
    return value;
  }
}

// node_modules/.pnpm/@libsql+core@0.10.0/node_modules/@libsql/core/lib-esm/config.js
var inMemoryMode = ":memory:";
function expandConfig(config, preferHttp) {
  if (typeof config !== "object") {
    throw new TypeError(`Expected client configuration as object, got ${typeof config}`);
  }
  let { url, authToken, tls, intMode, concurrency } = config;
  concurrency = Math.max(0, concurrency || 20);
  intMode ??= "number";
  let connectionQueryParams = [];
  if (url === inMemoryMode) {
    url = "file::memory:";
  }
  const uri = parseUri(url);
  const originalUriScheme = uri.scheme.toLowerCase();
  const isInMemoryMode = originalUriScheme === "file" && uri.path === inMemoryMode && uri.authority === void 0;
  let queryParamsDef;
  if (isInMemoryMode) {
    queryParamsDef = {
      cache: {
        values: ["shared", "private"],
        update: (key, value) => connectionQueryParams.push(`${key}=${value}`)
      }
    };
  } else {
    queryParamsDef = {
      tls: {
        values: ["0", "1"],
        update: (_, value) => tls = value === "1"
      },
      authToken: {
        update: (_, value) => authToken = value
      }
    };
  }
  for (const { key, value } of uri.query?.pairs ?? []) {
    if (!Object.hasOwn(queryParamsDef, key)) {
      throw new LibsqlError(`Unsupported URL query parameter ${JSON.stringify(key)}`, "URL_PARAM_NOT_SUPPORTED");
    }
    const queryParamDef = queryParamsDef[key];
    if (queryParamDef.values !== void 0 && !queryParamDef.values.includes(value)) {
      throw new LibsqlError(`Unknown value for the "${key}" query argument: ${JSON.stringify(value)}. Supported values are: [${queryParamDef.values.map((x) => '"' + x + '"').join(", ")}]`, "URL_INVALID");
    }
    if (queryParamDef.update !== void 0) {
      queryParamDef?.update(key, value);
    }
  }
  const connectionQueryParamsString = connectionQueryParams.length === 0 ? "" : `?${connectionQueryParams.join("&")}`;
  const path2 = uri.path + connectionQueryParamsString;
  let scheme;
  if (originalUriScheme === "libsql") {
    if (tls === false) {
      if (uri.authority?.port === void 0) {
        throw new LibsqlError('A "libsql:" URL with ?tls=0 must specify an explicit port', "URL_INVALID");
      }
      scheme = preferHttp ? "http" : "ws";
    } else {
      scheme = preferHttp ? "https" : "wss";
    }
  } else {
    scheme = originalUriScheme;
  }
  if (scheme === "http" || scheme === "ws") {
    tls ??= false;
  } else {
    tls ??= true;
  }
  if (scheme !== "http" && scheme !== "ws" && scheme !== "https" && scheme !== "wss" && scheme !== "file") {
    throw new LibsqlError(`The client supports only "libsql:", "wss:", "ws:", "https:", "http:" and "file:" URLs, got ${JSON.stringify(uri.scheme + ":")}. For more information, please read ${supportedUrlLink}`, "URL_SCHEME_NOT_SUPPORTED");
  }
  if (intMode !== "number" && intMode !== "bigint" && intMode !== "string") {
    throw new TypeError(`Invalid value for intMode, expected "number", "bigint" or "string", got ${JSON.stringify(intMode)}`);
  }
  if (uri.fragment !== void 0) {
    throw new LibsqlError(`URL fragments are not supported: ${JSON.stringify("#" + uri.fragment)}`, "URL_INVALID");
  }
  if (isInMemoryMode) {
    return {
      scheme: "file",
      tls: false,
      path: path2,
      intMode,
      concurrency,
      syncUrl: config.syncUrl,
      syncInterval: config.syncInterval,
      fetch: config.fetch,
      authToken: void 0,
      encryptionKey: void 0,
      authority: void 0
    };
  }
  return {
    scheme,
    tls,
    authority: uri.authority,
    path: path2,
    authToken,
    intMode,
    concurrency,
    encryptionKey: config.encryptionKey,
    syncUrl: config.syncUrl,
    syncInterval: config.syncInterval,
    fetch: config.fetch
  };
}

// node_modules/.pnpm/@libsql+isomorphic-ws@0.1.5/node_modules/@libsql/isomorphic-ws/web.mjs
var _WebSocket;
if (typeof WebSocket !== "undefined") {
  _WebSocket = WebSocket;
} else if (typeof global !== "undefined") {
  _WebSocket = global.WebSocket;
} else if (typeof window !== "undefined") {
  _WebSocket = window.WebSocket;
} else if (typeof self !== "undefined") {
  _WebSocket = self.WebSocket;
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/client.js
var Client = class {
  /** @private */
  constructor() {
    this.intMode = "number";
  }
  /** Representation of integers returned from the database. See {@link IntMode}.
   *
   * This value is inherited by {@link Stream} objects created with {@link openStream}, but you can
   * override the integer mode for every stream by setting {@link Stream.intMode} on the stream.
   */
  intMode;
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/errors.js
var ClientError = class extends Error {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "ClientError";
  }
};
var ProtoError = class extends ClientError {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "ProtoError";
  }
};
var ResponseError = class extends ClientError {
  code;
  /** @internal */
  proto;
  /** @private */
  constructor(message, protoError) {
    super(message);
    this.name = "ResponseError";
    this.code = protoError.code;
    this.proto = protoError;
    this.stack = void 0;
  }
};
var ClosedError = class extends ClientError {
  /** @private */
  constructor(message, cause) {
    if (cause !== void 0) {
      super(`${message}: ${cause}`);
      this.cause = cause;
    } else {
      super(message);
    }
    this.name = "ClosedError";
  }
};
var WebSocketUnsupportedError = class extends ClientError {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "WebSocketUnsupportedError";
  }
};
var WebSocketError = class extends ClientError {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "WebSocketError";
  }
};
var HttpServerError = class extends ClientError {
  status;
  /** @private */
  constructor(message, status) {
    super(message);
    this.status = status;
    this.name = "HttpServerError";
  }
};
var ProtocolVersionError = class extends ClientError {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "ProtocolVersionError";
  }
};
var InternalError = class extends ClientError {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "InternalError";
  }
};
var MisuseError = class extends ClientError {
  /** @private */
  constructor(message) {
    super(message);
    this.name = "MisuseError";
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/encoding/json/decode.js
function string(value) {
  if (typeof value === "string") {
    return value;
  }
  throw typeError(value, "string");
}
function stringOpt(value) {
  if (value === null || value === void 0) {
    return void 0;
  } else if (typeof value === "string") {
    return value;
  }
  throw typeError(value, "string or null");
}
function number(value) {
  if (typeof value === "number") {
    return value;
  }
  throw typeError(value, "number");
}
function boolean(value) {
  if (typeof value === "boolean") {
    return value;
  }
  throw typeError(value, "boolean");
}
function array(value) {
  if (Array.isArray(value)) {
    return value;
  }
  throw typeError(value, "array");
}
function object(value) {
  if (value !== null && typeof value === "object" && !Array.isArray(value)) {
    return value;
  }
  throw typeError(value, "object");
}
function arrayObjectsMap(value, fun) {
  return array(value).map((elemValue) => fun(object(elemValue)));
}
function typeError(value, expected) {
  if (value === void 0) {
    return new ProtoError(`Expected ${expected}, but the property was missing`);
  }
  let received = typeof value;
  if (value === null) {
    received = "null";
  } else if (Array.isArray(value)) {
    received = "array";
  }
  return new ProtoError(`Expected ${expected}, received ${received}`);
}
function readJsonObject(value, fun) {
  return fun(object(value));
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/encoding/json/encode.js
var ObjectWriter = class {
  #output;
  #isFirst;
  constructor(output) {
    this.#output = output;
    this.#isFirst = false;
  }
  begin() {
    this.#output.push("{");
    this.#isFirst = true;
  }
  end() {
    this.#output.push("}");
    this.#isFirst = false;
  }
  #key(name) {
    if (this.#isFirst) {
      this.#output.push('"');
      this.#isFirst = false;
    } else {
      this.#output.push(',"');
    }
    this.#output.push(name);
    this.#output.push('":');
  }
  string(name, value) {
    this.#key(name);
    this.#output.push(JSON.stringify(value));
  }
  stringRaw(name, value) {
    this.#key(name);
    this.#output.push('"');
    this.#output.push(value);
    this.#output.push('"');
  }
  number(name, value) {
    this.#key(name);
    this.#output.push("" + value);
  }
  boolean(name, value) {
    this.#key(name);
    this.#output.push(value ? "true" : "false");
  }
  object(name, value, valueFun) {
    this.#key(name);
    this.begin();
    valueFun(this, value);
    this.end();
  }
  arrayObjects(name, values, valueFun) {
    this.#key(name);
    this.#output.push("[");
    for (let i = 0; i < values.length; ++i) {
      if (i !== 0) {
        this.#output.push(",");
      }
      this.begin();
      valueFun(this, values[i]);
      this.end();
    }
    this.#output.push("]");
  }
};
function writeJsonObject(value, fun) {
  const output = [];
  const writer = new ObjectWriter(output);
  writer.begin();
  fun(writer, value);
  writer.end();
  return output.join("");
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/encoding/protobuf/util.js
var VARINT = 0;
var FIXED_64 = 1;
var LENGTH_DELIMITED = 2;
var FIXED_32 = 5;

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/encoding/protobuf/decode.js
var MessageReader = class {
  #array;
  #view;
  #pos;
  constructor(array2) {
    this.#array = array2;
    this.#view = new DataView(array2.buffer, array2.byteOffset, array2.byteLength);
    this.#pos = 0;
  }
  varint() {
    let value = 0;
    for (let shift = 0; ; shift += 7) {
      const byte = this.#array[this.#pos++];
      value |= (byte & 127) << shift;
      if (!(byte & 128)) {
        break;
      }
    }
    return value;
  }
  varintBig() {
    let value = 0n;
    for (let shift = 0n; ; shift += 7n) {
      const byte = this.#array[this.#pos++];
      value |= BigInt(byte & 127) << shift;
      if (!(byte & 128)) {
        break;
      }
    }
    return value;
  }
  bytes(length) {
    const array2 = new Uint8Array(this.#array.buffer, this.#array.byteOffset + this.#pos, length);
    this.#pos += length;
    return array2;
  }
  double() {
    const value = this.#view.getFloat64(this.#pos, true);
    this.#pos += 8;
    return value;
  }
  skipVarint() {
    for (; ; ) {
      const byte = this.#array[this.#pos++];
      if (!(byte & 128)) {
        break;
      }
    }
  }
  skip(count) {
    this.#pos += count;
  }
  eof() {
    return this.#pos >= this.#array.byteLength;
  }
};
var FieldReader = class {
  #reader;
  #wireType;
  constructor(reader) {
    this.#reader = reader;
    this.#wireType = -1;
  }
  setup(wireType) {
    this.#wireType = wireType;
  }
  #expect(expectedWireType) {
    if (this.#wireType !== expectedWireType) {
      throw new ProtoError(`Expected wire type ${expectedWireType}, got ${this.#wireType}`);
    }
    this.#wireType = -1;
  }
  bytes() {
    this.#expect(LENGTH_DELIMITED);
    const length = this.#reader.varint();
    return this.#reader.bytes(length);
  }
  string() {
    return new TextDecoder().decode(this.bytes());
  }
  message(def) {
    return readProtobufMessage(this.bytes(), def);
  }
  int32() {
    this.#expect(VARINT);
    return this.#reader.varint();
  }
  uint32() {
    return this.int32();
  }
  bool() {
    return this.int32() !== 0;
  }
  uint64() {
    this.#expect(VARINT);
    return this.#reader.varintBig();
  }
  sint64() {
    const value = this.uint64();
    return value >> 1n ^ -(value & 1n);
  }
  double() {
    this.#expect(FIXED_64);
    return this.#reader.double();
  }
  maybeSkip() {
    if (this.#wireType < 0) {
      return;
    } else if (this.#wireType === VARINT) {
      this.#reader.skipVarint();
    } else if (this.#wireType === FIXED_64) {
      this.#reader.skip(8);
    } else if (this.#wireType === LENGTH_DELIMITED) {
      const length = this.#reader.varint();
      this.#reader.skip(length);
    } else if (this.#wireType === FIXED_32) {
      this.#reader.skip(4);
    } else {
      throw new ProtoError(`Unexpected wire type ${this.#wireType}`);
    }
    this.#wireType = -1;
  }
};
function readProtobufMessage(data, def) {
  const msgReader = new MessageReader(data);
  const fieldReader = new FieldReader(msgReader);
  let value = def.default();
  while (!msgReader.eof()) {
    const key = msgReader.varint();
    const tag = key >> 3;
    const wireType = key & 7;
    fieldReader.setup(wireType);
    const tagFun = def[tag];
    if (tagFun !== void 0) {
      const returnedValue = tagFun(fieldReader, value);
      if (returnedValue !== void 0) {
        value = returnedValue;
      }
    }
    fieldReader.maybeSkip();
  }
  return value;
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/encoding/protobuf/encode.js
var MessageWriter = class {
  #buf;
  #array;
  #view;
  #pos;
  constructor() {
    this.#buf = new ArrayBuffer(256);
    this.#array = new Uint8Array(this.#buf);
    this.#view = new DataView(this.#buf);
    this.#pos = 0;
  }
  #ensure(extra) {
    if (this.#pos + extra <= this.#buf.byteLength) {
      return;
    }
    let newCap = this.#buf.byteLength;
    while (newCap < this.#pos + extra) {
      newCap *= 2;
    }
    const newBuf = new ArrayBuffer(newCap);
    const newArray = new Uint8Array(newBuf);
    const newView = new DataView(newBuf);
    newArray.set(new Uint8Array(this.#buf, 0, this.#pos));
    this.#buf = newBuf;
    this.#array = newArray;
    this.#view = newView;
  }
  #varint(value) {
    this.#ensure(5);
    value = 0 | value;
    do {
      let byte = value & 127;
      value >>>= 7;
      byte |= value ? 128 : 0;
      this.#array[this.#pos++] = byte;
    } while (value);
  }
  #varintBig(value) {
    this.#ensure(10);
    value = value & 0xffffffffffffffffn;
    do {
      let byte = Number(value & 0x7fn);
      value >>= 7n;
      byte |= value ? 128 : 0;
      this.#array[this.#pos++] = byte;
    } while (value);
  }
  #tag(tag, wireType) {
    this.#varint(tag << 3 | wireType);
  }
  bytes(tag, value) {
    this.#tag(tag, LENGTH_DELIMITED);
    this.#varint(value.byteLength);
    this.#ensure(value.byteLength);
    this.#array.set(value, this.#pos);
    this.#pos += value.byteLength;
  }
  string(tag, value) {
    this.bytes(tag, new TextEncoder().encode(value));
  }
  message(tag, value, fun) {
    const writer = new MessageWriter();
    fun(writer, value);
    this.bytes(tag, writer.data());
  }
  int32(tag, value) {
    this.#tag(tag, VARINT);
    this.#varint(value);
  }
  uint32(tag, value) {
    this.int32(tag, value);
  }
  bool(tag, value) {
    this.int32(tag, value ? 1 : 0);
  }
  sint64(tag, value) {
    this.#tag(tag, VARINT);
    this.#varintBig(value << 1n ^ value >> 63n);
  }
  double(tag, value) {
    this.#tag(tag, FIXED_64);
    this.#ensure(8);
    this.#view.setFloat64(this.#pos, value, true);
    this.#pos += 8;
  }
  data() {
    return new Uint8Array(this.#buf, 0, this.#pos);
  }
};
function writeProtobufMessage(value, fun) {
  const w = new MessageWriter();
  fun(w, value);
  return w.data();
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/id_alloc.js
var IdAlloc = class {
  // Set of all allocated ids
  #usedIds;
  // Set of all free ids lower than `#usedIds.size`
  #freeIds;
  constructor() {
    this.#usedIds = /* @__PURE__ */ new Set();
    this.#freeIds = /* @__PURE__ */ new Set();
  }
  // Returns an id that was free, and marks it as used.
  alloc() {
    for (const freeId2 of this.#freeIds) {
      this.#freeIds.delete(freeId2);
      this.#usedIds.add(freeId2);
      if (!this.#usedIds.has(this.#usedIds.size - 1)) {
        this.#freeIds.add(this.#usedIds.size - 1);
      }
      return freeId2;
    }
    const freeId = this.#usedIds.size;
    this.#usedIds.add(freeId);
    return freeId;
  }
  free(id) {
    if (!this.#usedIds.delete(id)) {
      throw new InternalError("Freeing an id that is not allocated");
    }
    this.#freeIds.delete(this.#usedIds.size);
    if (id < this.#usedIds.size) {
      this.#freeIds.add(id);
    }
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/util.js
function impossible(value, message) {
  throw new InternalError(message);
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/value.js
function valueToProto(value) {
  if (value === null) {
    return null;
  } else if (typeof value === "string") {
    return value;
  } else if (typeof value === "number") {
    if (!Number.isFinite(value)) {
      throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");
    }
    return value;
  } else if (typeof value === "bigint") {
    if (value < minInteger || value > maxInteger) {
      throw new RangeError("This bigint value is too large to be represented as a 64-bit integer and passed as argument");
    }
    return value;
  } else if (typeof value === "boolean") {
    return value ? 1n : 0n;
  } else if (value instanceof ArrayBuffer) {
    return new Uint8Array(value);
  } else if (value instanceof Uint8Array) {
    return value;
  } else if (value instanceof Date) {
    return +value.valueOf();
  } else if (typeof value === "object") {
    return "" + value.toString();
  } else {
    throw new TypeError("Unsupported type of value");
  }
}
var minInteger = -9223372036854775808n;
var maxInteger = 9223372036854775807n;
function valueFromProto(value, intMode) {
  if (value === null) {
    return null;
  } else if (typeof value === "number") {
    return value;
  } else if (typeof value === "string") {
    return value;
  } else if (typeof value === "bigint") {
    if (intMode === "number") {
      const num = Number(value);
      if (!Number.isSafeInteger(num)) {
        throw new RangeError("Received integer which is too large to be safely represented as a JavaScript number");
      }
      return num;
    } else if (intMode === "bigint") {
      return value;
    } else if (intMode === "string") {
      return "" + value;
    } else {
      throw new MisuseError("Invalid value for IntMode");
    }
  } else if (value instanceof Uint8Array) {
    return value.slice().buffer;
  } else if (value === void 0) {
    throw new ProtoError("Received unrecognized type of Value");
  } else {
    throw impossible(value, "Impossible type of Value");
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/result.js
function stmtResultFromProto(result) {
  return {
    affectedRowCount: result.affectedRowCount,
    lastInsertRowid: result.lastInsertRowid,
    columnNames: result.cols.map((col) => col.name),
    columnDecltypes: result.cols.map((col) => col.decltype)
  };
}
function rowsResultFromProto(result, intMode) {
  const stmtResult = stmtResultFromProto(result);
  const rows = result.rows.map((row) => rowFromProto(stmtResult.columnNames, row, intMode));
  return { ...stmtResult, rows };
}
function rowResultFromProto(result, intMode) {
  const stmtResult = stmtResultFromProto(result);
  let row;
  if (result.rows.length > 0) {
    row = rowFromProto(stmtResult.columnNames, result.rows[0], intMode);
  }
  return { ...stmtResult, row };
}
function valueResultFromProto(result, intMode) {
  const stmtResult = stmtResultFromProto(result);
  let value;
  if (result.rows.length > 0 && stmtResult.columnNames.length > 0) {
    value = valueFromProto(result.rows[0][0], intMode);
  }
  return { ...stmtResult, value };
}
function rowFromProto(colNames, values, intMode) {
  const row = {};
  Object.defineProperty(row, "length", { value: values.length });
  for (let i = 0; i < values.length; ++i) {
    const value = valueFromProto(values[i], intMode);
    Object.defineProperty(row, i, { value });
    const colName = colNames[i];
    if (colName !== void 0 && !Object.hasOwn(row, colName)) {
      Object.defineProperty(row, colName, { value, enumerable: true, configurable: true, writable: true });
    }
  }
  return row;
}
function errorFromProto(error) {
  return new ResponseError(error.message, error);
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/sql.js
var Sql = class {
  #owner;
  #sqlId;
  #closed;
  /** @private */
  constructor(owner, sqlId) {
    this.#owner = owner;
    this.#sqlId = sqlId;
    this.#closed = void 0;
  }
  /** @private */
  _getSqlId(owner) {
    if (this.#owner !== owner) {
      throw new MisuseError("Attempted to use SQL text opened with other object");
    } else if (this.#closed !== void 0) {
      throw new ClosedError("SQL text is closed", this.#closed);
    }
    return this.#sqlId;
  }
  /** Remove the SQL text from the server, releasing resouces. */
  close() {
    this._setClosed(new ClientError("SQL text was manually closed"));
  }
  /** @private */
  _setClosed(error) {
    if (this.#closed === void 0) {
      this.#closed = error;
      this.#owner._closeSql(this.#sqlId);
    }
  }
  /** True if the SQL text is closed (removed from the server). */
  get closed() {
    return this.#closed !== void 0;
  }
};
function sqlToProto(owner, sql) {
  if (sql instanceof Sql) {
    return { sqlId: sql._getSqlId(owner) };
  } else {
    return { sql: "" + sql };
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/queue.js
var Queue = class {
  #pushStack;
  #shiftStack;
  constructor() {
    this.#pushStack = [];
    this.#shiftStack = [];
  }
  get length() {
    return this.#pushStack.length + this.#shiftStack.length;
  }
  push(elem) {
    this.#pushStack.push(elem);
  }
  shift() {
    if (this.#shiftStack.length === 0 && this.#pushStack.length > 0) {
      this.#shiftStack = this.#pushStack.reverse();
      this.#pushStack = [];
    }
    return this.#shiftStack.pop();
  }
  first() {
    return this.#shiftStack.length !== 0 ? this.#shiftStack[this.#shiftStack.length - 1] : this.#pushStack[0];
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/stmt.js
var Stmt = class {
  /** The SQL statement text. */
  sql;
  /** @private */
  _args;
  /** @private */
  _namedArgs;
  /** Initialize the statement with given SQL text. */
  constructor(sql) {
    this.sql = sql;
    this._args = [];
    this._namedArgs = /* @__PURE__ */ new Map();
  }
  /** Binds positional parameters from the given `values`. All previous positional bindings are cleared. */
  bindIndexes(values) {
    this._args.length = 0;
    for (const value of values) {
      this._args.push(valueToProto(value));
    }
    return this;
  }
  /** Binds a parameter by a 1-based index. */
  bindIndex(index, value) {
    if (index !== (index | 0) || index <= 0) {
      throw new RangeError("Index of a positional argument must be positive integer");
    }
    while (this._args.length < index) {
      this._args.push(null);
    }
    this._args[index - 1] = valueToProto(value);
    return this;
  }
  /** Binds a parameter by name. */
  bindName(name, value) {
    this._namedArgs.set(name, valueToProto(value));
    return this;
  }
  /** Clears all bindings. */
  unbindAll() {
    this._args.length = 0;
    this._namedArgs.clear();
    return this;
  }
};
function stmtToProto(sqlOwner, stmt, wantRows) {
  let inSql;
  let args = [];
  let namedArgs = [];
  if (stmt instanceof Stmt) {
    inSql = stmt.sql;
    args = stmt._args;
    for (const [name, value] of stmt._namedArgs.entries()) {
      namedArgs.push({ name, value });
    }
  } else if (Array.isArray(stmt)) {
    inSql = stmt[0];
    if (Array.isArray(stmt[1])) {
      args = stmt[1].map((arg) => valueToProto(arg));
    } else {
      namedArgs = Object.entries(stmt[1]).map(([name, value]) => {
        return { name, value: valueToProto(value) };
      });
    }
  } else {
    inSql = stmt;
  }
  const { sql, sqlId } = sqlToProto(sqlOwner, inSql);
  return { sql, sqlId, args, namedArgs, wantRows };
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/batch.js
var Batch = class {
  /** @private */
  _stream;
  #useCursor;
  /** @private */
  _steps;
  #executed;
  /** @private */
  constructor(stream, useCursor) {
    this._stream = stream;
    this.#useCursor = useCursor;
    this._steps = [];
    this.#executed = false;
  }
  /** Return a builder for adding a step to the batch. */
  step() {
    return new BatchStep(this);
  }
  /** Execute the batch. */
  execute() {
    if (this.#executed) {
      throw new MisuseError("This batch has already been executed");
    }
    this.#executed = true;
    const batch = {
      steps: this._steps.map((step) => step.proto)
    };
    if (this.#useCursor) {
      return executeCursor(this._stream, this._steps, batch);
    } else {
      return executeRegular(this._stream, this._steps, batch);
    }
  }
};
function executeRegular(stream, steps, batch) {
  return stream._batch(batch).then((result) => {
    for (let step = 0; step < steps.length; ++step) {
      const stepResult = result.stepResults.get(step);
      const stepError = result.stepErrors.get(step);
      steps[step].callback(stepResult, stepError);
    }
  });
}
async function executeCursor(stream, steps, batch) {
  const cursor = await stream._openCursor(batch);
  try {
    let nextStep = 0;
    let beginEntry = void 0;
    let rows = [];
    for (; ; ) {
      const entry = await cursor.next();
      if (entry === void 0) {
        break;
      }
      if (entry.type === "step_begin") {
        if (entry.step < nextStep || entry.step >= steps.length) {
          throw new ProtoError("Server produced StepBeginEntry for unexpected step");
        } else if (beginEntry !== void 0) {
          throw new ProtoError("Server produced StepBeginEntry before terminating previous step");
        }
        for (let step = nextStep; step < entry.step; ++step) {
          steps[step].callback(void 0, void 0);
        }
        nextStep = entry.step + 1;
        beginEntry = entry;
        rows = [];
      } else if (entry.type === "step_end") {
        if (beginEntry === void 0) {
          throw new ProtoError("Server produced StepEndEntry but no step is active");
        }
        const stmtResult = {
          cols: beginEntry.cols,
          rows,
          affectedRowCount: entry.affectedRowCount,
          lastInsertRowid: entry.lastInsertRowid
        };
        steps[beginEntry.step].callback(stmtResult, void 0);
        beginEntry = void 0;
        rows = [];
      } else if (entry.type === "step_error") {
        if (beginEntry === void 0) {
          if (entry.step >= steps.length) {
            throw new ProtoError("Server produced StepErrorEntry for unexpected step");
          }
          for (let step = nextStep; step < entry.step; ++step) {
            steps[step].callback(void 0, void 0);
          }
        } else {
          if (entry.step !== beginEntry.step) {
            throw new ProtoError("Server produced StepErrorEntry for unexpected step");
          }
          beginEntry = void 0;
          rows = [];
        }
        steps[entry.step].callback(void 0, entry.error);
        nextStep = entry.step + 1;
      } else if (entry.type === "row") {
        if (beginEntry === void 0) {
          throw new ProtoError("Server produced RowEntry but no step is active");
        }
        rows.push(entry.row);
      } else if (entry.type === "error") {
        throw errorFromProto(entry.error);
      } else if (entry.type === "none") {
        throw new ProtoError("Server produced unrecognized CursorEntry");
      } else {
        throw impossible(entry, "Impossible CursorEntry");
      }
    }
    if (beginEntry !== void 0) {
      throw new ProtoError("Server closed Cursor before terminating active step");
    }
    for (let step = nextStep; step < steps.length; ++step) {
      steps[step].callback(void 0, void 0);
    }
  } finally {
    cursor.close();
  }
}
var BatchStep = class {
  /** @private */
  _batch;
  #conds;
  /** @private */
  _index;
  /** @private */
  constructor(batch) {
    this._batch = batch;
    this.#conds = [];
    this._index = void 0;
  }
  /** Add the condition that needs to be satisfied to execute the statement. If you use this method multiple
   * times, we join the conditions with a logical AND. */
  condition(cond) {
    this.#conds.push(cond._proto);
    return this;
  }
  /** Add a statement that returns rows. */
  query(stmt) {
    return this.#add(stmt, true, rowsResultFromProto);
  }
  /** Add a statement that returns at most a single row. */
  queryRow(stmt) {
    return this.#add(stmt, true, rowResultFromProto);
  }
  /** Add a statement that returns at most a single value. */
  queryValue(stmt) {
    return this.#add(stmt, true, valueResultFromProto);
  }
  /** Add a statement without returning rows. */
  run(stmt) {
    return this.#add(stmt, false, stmtResultFromProto);
  }
  #add(inStmt, wantRows, fromProto) {
    if (this._index !== void 0) {
      throw new MisuseError("This BatchStep has already been added to the batch");
    }
    const stmt = stmtToProto(this._batch._stream._sqlOwner(), inStmt, wantRows);
    let condition;
    if (this.#conds.length === 0) {
      condition = void 0;
    } else if (this.#conds.length === 1) {
      condition = this.#conds[0];
    } else {
      condition = { type: "and", conds: this.#conds.slice() };
    }
    const proto = { stmt, condition };
    return new Promise((outputCallback, errorCallback) => {
      const callback = (stepResult, stepError) => {
        if (stepResult !== void 0 && stepError !== void 0) {
          errorCallback(new ProtoError("Server returned both result and error"));
        } else if (stepError !== void 0) {
          errorCallback(errorFromProto(stepError));
        } else if (stepResult !== void 0) {
          outputCallback(fromProto(stepResult, this._batch._stream.intMode));
        } else {
          outputCallback(void 0);
        }
      };
      this._index = this._batch._steps.length;
      this._batch._steps.push({ proto, callback });
    });
  }
};
var BatchCond = class {
  /** @private */
  _batch;
  /** @private */
  _proto;
  /** @private */
  constructor(batch, proto) {
    this._batch = batch;
    this._proto = proto;
  }
  /** Create a condition that evaluates to true when the given step executes successfully.
   *
   * If the given step fails error or is skipped because its condition evaluated to false, this
   * condition evaluates to false.
   */
  static ok(step) {
    return new BatchCond(step._batch, { type: "ok", step: stepIndex(step) });
  }
  /** Create a condition that evaluates to true when the given step fails.
   *
   * If the given step succeeds or is skipped because its condition evaluated to false, this condition
   * evaluates to false.
   */
  static error(step) {
    return new BatchCond(step._batch, { type: "error", step: stepIndex(step) });
  }
  /** Create a condition that is a logical negation of another condition.
   */
  static not(cond) {
    return new BatchCond(cond._batch, { type: "not", cond: cond._proto });
  }
  /** Create a condition that is a logical AND of other conditions.
   */
  static and(batch, conds) {
    for (const cond of conds) {
      checkCondBatch(batch, cond);
    }
    return new BatchCond(batch, { type: "and", conds: conds.map((e) => e._proto) });
  }
  /** Create a condition that is a logical OR of other conditions.
   */
  static or(batch, conds) {
    for (const cond of conds) {
      checkCondBatch(batch, cond);
    }
    return new BatchCond(batch, { type: "or", conds: conds.map((e) => e._proto) });
  }
  /** Create a condition that evaluates to true when the SQL connection is in autocommit mode (not inside an
   * explicit transaction). This requires protocol version 3 or higher.
   */
  static isAutocommit(batch) {
    batch._stream.client()._ensureVersion(3, "BatchCond.isAutocommit()");
    return new BatchCond(batch, { type: "is_autocommit" });
  }
};
function stepIndex(step) {
  if (step._index === void 0) {
    throw new MisuseError("Cannot add a condition referencing a step that has not been added to the batch");
  }
  return step._index;
}
function checkCondBatch(expectedBatch, cond) {
  if (cond._batch !== expectedBatch) {
    throw new MisuseError("Cannot mix BatchCond objects for different Batch objects");
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/describe.js
function describeResultFromProto(result) {
  return {
    paramNames: result.params.map((p) => p.name),
    columns: result.cols,
    isExplain: result.isExplain,
    isReadonly: result.isReadonly
  };
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/stream.js
var Stream = class {
  /** @private */
  constructor(intMode) {
    this.intMode = intMode;
  }
  /** Execute a statement and return rows. */
  query(stmt) {
    return this.#execute(stmt, true, rowsResultFromProto);
  }
  /** Execute a statement and return at most a single row. */
  queryRow(stmt) {
    return this.#execute(stmt, true, rowResultFromProto);
  }
  /** Execute a statement and return at most a single value. */
  queryValue(stmt) {
    return this.#execute(stmt, true, valueResultFromProto);
  }
  /** Execute a statement without returning rows. */
  run(stmt) {
    return this.#execute(stmt, false, stmtResultFromProto);
  }
  #execute(inStmt, wantRows, fromProto) {
    const stmt = stmtToProto(this._sqlOwner(), inStmt, wantRows);
    return this._execute(stmt).then((r) => fromProto(r, this.intMode));
  }
  /** Return a builder for creating and executing a batch.
   *
   * If `useCursor` is true, the batch will be executed using a Hrana cursor, which will stream results from
   * the server to the client, which consumes less memory on the server. This requires protocol version 3 or
   * higher.
   */
  batch(useCursor = false) {
    return new Batch(this, useCursor);
  }
  /** Parse and analyze a statement. This requires protocol version 2 or higher. */
  describe(inSql) {
    const protoSql = sqlToProto(this._sqlOwner(), inSql);
    return this._describe(protoSql).then(describeResultFromProto);
  }
  /** Execute a sequence of statements separated by semicolons. This requires protocol version 2 or higher.
   * */
  sequence(inSql) {
    const protoSql = sqlToProto(this._sqlOwner(), inSql);
    return this._sequence(protoSql);
  }
  /** Representation of integers returned from the database. See {@link IntMode}.
   *
   * This value affects the results of all operations on this stream.
   */
  intMode;
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/cursor.js
var Cursor = class {
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/cursor.js
var fetchChunkSize = 1e3;
var fetchQueueSize = 10;
var WsCursor = class extends Cursor {
  #client;
  #stream;
  #cursorId;
  #entryQueue;
  #fetchQueue;
  #closed;
  #done;
  /** @private */
  constructor(client, stream, cursorId) {
    super();
    this.#client = client;
    this.#stream = stream;
    this.#cursorId = cursorId;
    this.#entryQueue = new Queue();
    this.#fetchQueue = new Queue();
    this.#closed = void 0;
    this.#done = false;
  }
  /** Fetch the next entry from the cursor. */
  async next() {
    for (; ; ) {
      if (this.#closed !== void 0) {
        throw new ClosedError("Cursor is closed", this.#closed);
      }
      while (!this.#done && this.#fetchQueue.length < fetchQueueSize) {
        this.#fetchQueue.push(this.#fetch());
      }
      const entry = this.#entryQueue.shift();
      if (this.#done || entry !== void 0) {
        return entry;
      }
      await this.#fetchQueue.shift().then((response) => {
        if (response === void 0) {
          return;
        }
        for (const entry2 of response.entries) {
          this.#entryQueue.push(entry2);
        }
        this.#done ||= response.done;
      });
    }
  }
  #fetch() {
    return this.#stream._sendCursorRequest(this, {
      type: "fetch_cursor",
      cursorId: this.#cursorId,
      maxCount: fetchChunkSize
    }).then((resp) => resp, (error) => {
      this._setClosed(error);
      return void 0;
    });
  }
  /** @private */
  _setClosed(error) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#closed = error;
    this.#stream._sendCursorRequest(this, {
      type: "close_cursor",
      cursorId: this.#cursorId
    }).catch(() => void 0);
    this.#stream._cursorClosed(this);
  }
  /** Close the cursor. */
  close() {
    this._setClosed(new ClientError("Cursor was manually closed"));
  }
  /** True if the cursor is closed. */
  get closed() {
    return this.#closed !== void 0;
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/stream.js
var WsStream = class extends Stream {
  #client;
  #streamId;
  #queue;
  #cursor;
  #closing;
  #closed;
  /** @private */
  static open(client) {
    const streamId = client._streamIdAlloc.alloc();
    const stream = new WsStream(client, streamId);
    const responseCallback = () => void 0;
    const errorCallback = (e) => stream.#setClosed(e);
    const request = { type: "open_stream", streamId };
    client._sendRequest(request, { responseCallback, errorCallback });
    return stream;
  }
  /** @private */
  constructor(client, streamId) {
    super(client.intMode);
    this.#client = client;
    this.#streamId = streamId;
    this.#queue = new Queue();
    this.#cursor = void 0;
    this.#closing = false;
    this.#closed = void 0;
  }
  /** Get the {@link WsClient} object that this stream belongs to. */
  client() {
    return this.#client;
  }
  /** @private */
  _sqlOwner() {
    return this.#client;
  }
  /** @private */
  _execute(stmt) {
    return this.#sendStreamRequest({
      type: "execute",
      streamId: this.#streamId,
      stmt
    }).then((response) => {
      return response.result;
    });
  }
  /** @private */
  _batch(batch) {
    return this.#sendStreamRequest({
      type: "batch",
      streamId: this.#streamId,
      batch
    }).then((response) => {
      return response.result;
    });
  }
  /** @private */
  _describe(protoSql) {
    this.#client._ensureVersion(2, "describe()");
    return this.#sendStreamRequest({
      type: "describe",
      streamId: this.#streamId,
      sql: protoSql.sql,
      sqlId: protoSql.sqlId
    }).then((response) => {
      return response.result;
    });
  }
  /** @private */
  _sequence(protoSql) {
    this.#client._ensureVersion(2, "sequence()");
    return this.#sendStreamRequest({
      type: "sequence",
      streamId: this.#streamId,
      sql: protoSql.sql,
      sqlId: protoSql.sqlId
    }).then((_response) => {
      return void 0;
    });
  }
  /** Check whether the SQL connection underlying this stream is in autocommit state (i.e., outside of an
   * explicit transaction). This requires protocol version 3 or higher.
   */
  getAutocommit() {
    this.#client._ensureVersion(3, "getAutocommit()");
    return this.#sendStreamRequest({
      type: "get_autocommit",
      streamId: this.#streamId
    }).then((response) => {
      return response.isAutocommit;
    });
  }
  #sendStreamRequest(request) {
    return new Promise((responseCallback, errorCallback) => {
      this.#pushToQueue({ type: "request", request, responseCallback, errorCallback });
    });
  }
  /** @private */
  _openCursor(batch) {
    this.#client._ensureVersion(3, "cursor");
    return new Promise((cursorCallback, errorCallback) => {
      this.#pushToQueue({ type: "cursor", batch, cursorCallback, errorCallback });
    });
  }
  /** @private */
  _sendCursorRequest(cursor, request) {
    if (cursor !== this.#cursor) {
      throw new InternalError("Cursor not associated with the stream attempted to execute a request");
    }
    return new Promise((responseCallback, errorCallback) => {
      if (this.#closed !== void 0) {
        errorCallback(new ClosedError("Stream is closed", this.#closed));
      } else {
        this.#client._sendRequest(request, { responseCallback, errorCallback });
      }
    });
  }
  /** @private */
  _cursorClosed(cursor) {
    if (cursor !== this.#cursor) {
      throw new InternalError("Cursor was closed, but it was not associated with the stream");
    }
    this.#cursor = void 0;
    this.#flushQueue();
  }
  #pushToQueue(entry) {
    if (this.#closed !== void 0) {
      entry.errorCallback(new ClosedError("Stream is closed", this.#closed));
    } else if (this.#closing) {
      entry.errorCallback(new ClosedError("Stream is closing", void 0));
    } else {
      this.#queue.push(entry);
      this.#flushQueue();
    }
  }
  #flushQueue() {
    for (; ; ) {
      const entry = this.#queue.first();
      if (entry === void 0 && this.#cursor === void 0 && this.#closing) {
        this.#setClosed(new ClientError("Stream was gracefully closed"));
        break;
      } else if (entry?.type === "request" && this.#cursor === void 0) {
        const { request, responseCallback, errorCallback } = entry;
        this.#queue.shift();
        this.#client._sendRequest(request, { responseCallback, errorCallback });
      } else if (entry?.type === "cursor" && this.#cursor === void 0) {
        const { batch, cursorCallback } = entry;
        this.#queue.shift();
        const cursorId = this.#client._cursorIdAlloc.alloc();
        const cursor = new WsCursor(this.#client, this, cursorId);
        const request = {
          type: "open_cursor",
          streamId: this.#streamId,
          cursorId,
          batch
        };
        const responseCallback = () => void 0;
        const errorCallback = (e) => cursor._setClosed(e);
        this.#client._sendRequest(request, { responseCallback, errorCallback });
        this.#cursor = cursor;
        cursorCallback(cursor);
      } else {
        break;
      }
    }
  }
  #setClosed(error) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#closed = error;
    if (this.#cursor !== void 0) {
      this.#cursor._setClosed(error);
    }
    for (; ; ) {
      const entry = this.#queue.shift();
      if (entry !== void 0) {
        entry.errorCallback(error);
      } else {
        break;
      }
    }
    const request = { type: "close_stream", streamId: this.#streamId };
    const responseCallback = () => this.#client._streamIdAlloc.free(this.#streamId);
    const errorCallback = () => void 0;
    this.#client._sendRequest(request, { responseCallback, errorCallback });
  }
  /** Immediately close the stream. */
  close() {
    this.#setClosed(new ClientError("Stream was manually closed"));
  }
  /** Gracefully close the stream. */
  closeGracefully() {
    this.#closing = true;
    this.#flushQueue();
  }
  /** True if the stream is closed or closing. */
  get closed() {
    return this.#closed !== void 0 || this.#closing;
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/shared/json_encode.js
function Stmt2(w, msg) {
  if (msg.sql !== void 0) {
    w.string("sql", msg.sql);
  }
  if (msg.sqlId !== void 0) {
    w.number("sql_id", msg.sqlId);
  }
  w.arrayObjects("args", msg.args, Value);
  w.arrayObjects("named_args", msg.namedArgs, NamedArg);
  w.boolean("want_rows", msg.wantRows);
}
function NamedArg(w, msg) {
  w.string("name", msg.name);
  w.object("value", msg.value, Value);
}
function Batch2(w, msg) {
  w.arrayObjects("steps", msg.steps, BatchStep2);
}
function BatchStep2(w, msg) {
  if (msg.condition !== void 0) {
    w.object("condition", msg.condition, BatchCond2);
  }
  w.object("stmt", msg.stmt, Stmt2);
}
function BatchCond2(w, msg) {
  w.stringRaw("type", msg.type);
  if (msg.type === "ok" || msg.type === "error") {
    w.number("step", msg.step);
  } else if (msg.type === "not") {
    w.object("cond", msg.cond, BatchCond2);
  } else if (msg.type === "and" || msg.type === "or") {
    w.arrayObjects("conds", msg.conds, BatchCond2);
  } else if (msg.type === "is_autocommit") {
  } else {
    throw impossible(msg, "Impossible type of BatchCond");
  }
}
function Value(w, msg) {
  if (msg === null) {
    w.stringRaw("type", "null");
  } else if (typeof msg === "bigint") {
    w.stringRaw("type", "integer");
    w.stringRaw("value", "" + msg);
  } else if (typeof msg === "number") {
    w.stringRaw("type", "float");
    w.number("value", msg);
  } else if (typeof msg === "string") {
    w.stringRaw("type", "text");
    w.string("value", msg);
  } else if (msg instanceof Uint8Array) {
    w.stringRaw("type", "blob");
    w.stringRaw("base64", gBase64.fromUint8Array(msg));
  } else if (msg === void 0) {
  } else {
    throw impossible(msg, "Impossible type of Value");
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/json_encode.js
function ClientMsg(w, msg) {
  w.stringRaw("type", msg.type);
  if (msg.type === "hello") {
    if (msg.jwt !== void 0) {
      w.string("jwt", msg.jwt);
    }
  } else if (msg.type === "request") {
    w.number("request_id", msg.requestId);
    w.object("request", msg.request, Request2);
  } else {
    throw impossible(msg, "Impossible type of ClientMsg");
  }
}
function Request2(w, msg) {
  w.stringRaw("type", msg.type);
  if (msg.type === "open_stream") {
    w.number("stream_id", msg.streamId);
  } else if (msg.type === "close_stream") {
    w.number("stream_id", msg.streamId);
  } else if (msg.type === "execute") {
    w.number("stream_id", msg.streamId);
    w.object("stmt", msg.stmt, Stmt2);
  } else if (msg.type === "batch") {
    w.number("stream_id", msg.streamId);
    w.object("batch", msg.batch, Batch2);
  } else if (msg.type === "open_cursor") {
    w.number("stream_id", msg.streamId);
    w.number("cursor_id", msg.cursorId);
    w.object("batch", msg.batch, Batch2);
  } else if (msg.type === "close_cursor") {
    w.number("cursor_id", msg.cursorId);
  } else if (msg.type === "fetch_cursor") {
    w.number("cursor_id", msg.cursorId);
    w.number("max_count", msg.maxCount);
  } else if (msg.type === "sequence") {
    w.number("stream_id", msg.streamId);
    if (msg.sql !== void 0) {
      w.string("sql", msg.sql);
    }
    if (msg.sqlId !== void 0) {
      w.number("sql_id", msg.sqlId);
    }
  } else if (msg.type === "describe") {
    w.number("stream_id", msg.streamId);
    if (msg.sql !== void 0) {
      w.string("sql", msg.sql);
    }
    if (msg.sqlId !== void 0) {
      w.number("sql_id", msg.sqlId);
    }
  } else if (msg.type === "store_sql") {
    w.number("sql_id", msg.sqlId);
    w.string("sql", msg.sql);
  } else if (msg.type === "close_sql") {
    w.number("sql_id", msg.sqlId);
  } else if (msg.type === "get_autocommit") {
    w.number("stream_id", msg.streamId);
  } else {
    throw impossible(msg, "Impossible type of Request");
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/shared/protobuf_encode.js
function Stmt3(w, msg) {
  if (msg.sql !== void 0) {
    w.string(1, msg.sql);
  }
  if (msg.sqlId !== void 0) {
    w.int32(2, msg.sqlId);
  }
  for (const arg of msg.args) {
    w.message(3, arg, Value2);
  }
  for (const arg of msg.namedArgs) {
    w.message(4, arg, NamedArg2);
  }
  w.bool(5, msg.wantRows);
}
function NamedArg2(w, msg) {
  w.string(1, msg.name);
  w.message(2, msg.value, Value2);
}
function Batch3(w, msg) {
  for (const step of msg.steps) {
    w.message(1, step, BatchStep3);
  }
}
function BatchStep3(w, msg) {
  if (msg.condition !== void 0) {
    w.message(1, msg.condition, BatchCond3);
  }
  w.message(2, msg.stmt, Stmt3);
}
function BatchCond3(w, msg) {
  if (msg.type === "ok") {
    w.uint32(1, msg.step);
  } else if (msg.type === "error") {
    w.uint32(2, msg.step);
  } else if (msg.type === "not") {
    w.message(3, msg.cond, BatchCond3);
  } else if (msg.type === "and") {
    w.message(4, msg.conds, BatchCondList);
  } else if (msg.type === "or") {
    w.message(5, msg.conds, BatchCondList);
  } else if (msg.type === "is_autocommit") {
    w.message(6, void 0, Empty);
  } else {
    throw impossible(msg, "Impossible type of BatchCond");
  }
}
function BatchCondList(w, msg) {
  for (const cond of msg) {
    w.message(1, cond, BatchCond3);
  }
}
function Value2(w, msg) {
  if (msg === null) {
    w.message(1, void 0, Empty);
  } else if (typeof msg === "bigint") {
    w.sint64(2, msg);
  } else if (typeof msg === "number") {
    w.double(3, msg);
  } else if (typeof msg === "string") {
    w.string(4, msg);
  } else if (msg instanceof Uint8Array) {
    w.bytes(5, msg);
  } else if (msg === void 0) {
  } else {
    throw impossible(msg, "Impossible type of Value");
  }
}
function Empty(_w, _msg) {
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/protobuf_encode.js
function ClientMsg2(w, msg) {
  if (msg.type === "hello") {
    w.message(1, msg, HelloMsg);
  } else if (msg.type === "request") {
    w.message(2, msg, RequestMsg);
  } else {
    throw impossible(msg, "Impossible type of ClientMsg");
  }
}
function HelloMsg(w, msg) {
  if (msg.jwt !== void 0) {
    w.string(1, msg.jwt);
  }
}
function RequestMsg(w, msg) {
  w.int32(1, msg.requestId);
  const request = msg.request;
  if (request.type === "open_stream") {
    w.message(2, request, OpenStreamReq);
  } else if (request.type === "close_stream") {
    w.message(3, request, CloseStreamReq);
  } else if (request.type === "execute") {
    w.message(4, request, ExecuteReq);
  } else if (request.type === "batch") {
    w.message(5, request, BatchReq);
  } else if (request.type === "open_cursor") {
    w.message(6, request, OpenCursorReq);
  } else if (request.type === "close_cursor") {
    w.message(7, request, CloseCursorReq);
  } else if (request.type === "fetch_cursor") {
    w.message(8, request, FetchCursorReq);
  } else if (request.type === "sequence") {
    w.message(9, request, SequenceReq);
  } else if (request.type === "describe") {
    w.message(10, request, DescribeReq);
  } else if (request.type === "store_sql") {
    w.message(11, request, StoreSqlReq);
  } else if (request.type === "close_sql") {
    w.message(12, request, CloseSqlReq);
  } else if (request.type === "get_autocommit") {
    w.message(13, request, GetAutocommitReq);
  } else {
    throw impossible(request, "Impossible type of Request");
  }
}
function OpenStreamReq(w, msg) {
  w.int32(1, msg.streamId);
}
function CloseStreamReq(w, msg) {
  w.int32(1, msg.streamId);
}
function ExecuteReq(w, msg) {
  w.int32(1, msg.streamId);
  w.message(2, msg.stmt, Stmt3);
}
function BatchReq(w, msg) {
  w.int32(1, msg.streamId);
  w.message(2, msg.batch, Batch3);
}
function OpenCursorReq(w, msg) {
  w.int32(1, msg.streamId);
  w.int32(2, msg.cursorId);
  w.message(3, msg.batch, Batch3);
}
function CloseCursorReq(w, msg) {
  w.int32(1, msg.cursorId);
}
function FetchCursorReq(w, msg) {
  w.int32(1, msg.cursorId);
  w.uint32(2, msg.maxCount);
}
function SequenceReq(w, msg) {
  w.int32(1, msg.streamId);
  if (msg.sql !== void 0) {
    w.string(2, msg.sql);
  }
  if (msg.sqlId !== void 0) {
    w.int32(3, msg.sqlId);
  }
}
function DescribeReq(w, msg) {
  w.int32(1, msg.streamId);
  if (msg.sql !== void 0) {
    w.string(2, msg.sql);
  }
  if (msg.sqlId !== void 0) {
    w.int32(3, msg.sqlId);
  }
}
function StoreSqlReq(w, msg) {
  w.int32(1, msg.sqlId);
  w.string(2, msg.sql);
}
function CloseSqlReq(w, msg) {
  w.int32(1, msg.sqlId);
}
function GetAutocommitReq(w, msg) {
  w.int32(1, msg.streamId);
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/shared/json_decode.js
function Error2(obj) {
  const message = string(obj["message"]);
  const code = stringOpt(obj["code"]);
  return { message, code };
}
function StmtResult(obj) {
  const cols = arrayObjectsMap(obj["cols"], Col);
  const rows = array(obj["rows"]).map((rowObj) => arrayObjectsMap(rowObj, Value3));
  const affectedRowCount = number(obj["affected_row_count"]);
  const lastInsertRowidStr = stringOpt(obj["last_insert_rowid"]);
  const lastInsertRowid = lastInsertRowidStr !== void 0 ? BigInt(lastInsertRowidStr) : void 0;
  return { cols, rows, affectedRowCount, lastInsertRowid };
}
function Col(obj) {
  const name = stringOpt(obj["name"]);
  const decltype = stringOpt(obj["decltype"]);
  return { name, decltype };
}
function BatchResult(obj) {
  const stepResults = /* @__PURE__ */ new Map();
  array(obj["step_results"]).forEach((value, i) => {
    if (value !== null) {
      stepResults.set(i, StmtResult(object(value)));
    }
  });
  const stepErrors = /* @__PURE__ */ new Map();
  array(obj["step_errors"]).forEach((value, i) => {
    if (value !== null) {
      stepErrors.set(i, Error2(object(value)));
    }
  });
  return { stepResults, stepErrors };
}
function CursorEntry(obj) {
  const type = string(obj["type"]);
  if (type === "step_begin") {
    const step = number(obj["step"]);
    const cols = arrayObjectsMap(obj["cols"], Col);
    return { type: "step_begin", step, cols };
  } else if (type === "step_end") {
    const affectedRowCount = number(obj["affected_row_count"]);
    const lastInsertRowidStr = stringOpt(obj["last_insert_rowid"]);
    const lastInsertRowid = lastInsertRowidStr !== void 0 ? BigInt(lastInsertRowidStr) : void 0;
    return { type: "step_end", affectedRowCount, lastInsertRowid };
  } else if (type === "step_error") {
    const step = number(obj["step"]);
    const error = Error2(object(obj["error"]));
    return { type: "step_error", step, error };
  } else if (type === "row") {
    const row = arrayObjectsMap(obj["row"], Value3);
    return { type: "row", row };
  } else if (type === "error") {
    const error = Error2(object(obj["error"]));
    return { type: "error", error };
  } else {
    throw new ProtoError("Unexpected type of CursorEntry");
  }
}
function DescribeResult(obj) {
  const params = arrayObjectsMap(obj["params"], DescribeParam);
  const cols = arrayObjectsMap(obj["cols"], DescribeCol);
  const isExplain = boolean(obj["is_explain"]);
  const isReadonly = boolean(obj["is_readonly"]);
  return { params, cols, isExplain, isReadonly };
}
function DescribeParam(obj) {
  const name = stringOpt(obj["name"]);
  return { name };
}
function DescribeCol(obj) {
  const name = string(obj["name"]);
  const decltype = stringOpt(obj["decltype"]);
  return { name, decltype };
}
function Value3(obj) {
  const type = string(obj["type"]);
  if (type === "null") {
    return null;
  } else if (type === "integer") {
    const value = string(obj["value"]);
    return BigInt(value);
  } else if (type === "float") {
    return number(obj["value"]);
  } else if (type === "text") {
    return string(obj["value"]);
  } else if (type === "blob") {
    return gBase64.toUint8Array(string(obj["base64"]));
  } else {
    throw new ProtoError("Unexpected type of Value");
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/json_decode.js
function ServerMsg(obj) {
  const type = string(obj["type"]);
  if (type === "hello_ok") {
    return { type: "hello_ok" };
  } else if (type === "hello_error") {
    const error = Error2(object(obj["error"]));
    return { type: "hello_error", error };
  } else if (type === "response_ok") {
    const requestId = number(obj["request_id"]);
    const response = Response(object(obj["response"]));
    return { type: "response_ok", requestId, response };
  } else if (type === "response_error") {
    const requestId = number(obj["request_id"]);
    const error = Error2(object(obj["error"]));
    return { type: "response_error", requestId, error };
  } else {
    throw new ProtoError("Unexpected type of ServerMsg");
  }
}
function Response(obj) {
  const type = string(obj["type"]);
  if (type === "open_stream") {
    return { type: "open_stream" };
  } else if (type === "close_stream") {
    return { type: "close_stream" };
  } else if (type === "execute") {
    const result = StmtResult(object(obj["result"]));
    return { type: "execute", result };
  } else if (type === "batch") {
    const result = BatchResult(object(obj["result"]));
    return { type: "batch", result };
  } else if (type === "open_cursor") {
    return { type: "open_cursor" };
  } else if (type === "close_cursor") {
    return { type: "close_cursor" };
  } else if (type === "fetch_cursor") {
    const entries = arrayObjectsMap(obj["entries"], CursorEntry);
    const done = boolean(obj["done"]);
    return { type: "fetch_cursor", entries, done };
  } else if (type === "sequence") {
    return { type: "sequence" };
  } else if (type === "describe") {
    const result = DescribeResult(object(obj["result"]));
    return { type: "describe", result };
  } else if (type === "store_sql") {
    return { type: "store_sql" };
  } else if (type === "close_sql") {
    return { type: "close_sql" };
  } else if (type === "get_autocommit") {
    const isAutocommit = boolean(obj["is_autocommit"]);
    return { type: "get_autocommit", isAutocommit };
  } else {
    throw new ProtoError("Unexpected type of Response");
  }
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/shared/protobuf_decode.js
var Error3 = {
  default() {
    return { message: "", code: void 0 };
  },
  1(r, msg) {
    msg.message = r.string();
  },
  2(r, msg) {
    msg.code = r.string();
  }
};
var StmtResult2 = {
  default() {
    return {
      cols: [],
      rows: [],
      affectedRowCount: 0,
      lastInsertRowid: void 0
    };
  },
  1(r, msg) {
    msg.cols.push(r.message(Col2));
  },
  2(r, msg) {
    msg.rows.push(r.message(Row));
  },
  3(r, msg) {
    msg.affectedRowCount = Number(r.uint64());
  },
  4(r, msg) {
    msg.lastInsertRowid = r.sint64();
  }
};
var Col2 = {
  default() {
    return { name: void 0, decltype: void 0 };
  },
  1(r, msg) {
    msg.name = r.string();
  },
  2(r, msg) {
    msg.decltype = r.string();
  }
};
var Row = {
  default() {
    return [];
  },
  1(r, msg) {
    msg.push(r.message(Value4));
  }
};
var BatchResult2 = {
  default() {
    return { stepResults: /* @__PURE__ */ new Map(), stepErrors: /* @__PURE__ */ new Map() };
  },
  1(r, msg) {
    const [key, value] = r.message(BatchResultStepResult);
    msg.stepResults.set(key, value);
  },
  2(r, msg) {
    const [key, value] = r.message(BatchResultStepError);
    msg.stepErrors.set(key, value);
  }
};
var BatchResultStepResult = {
  default() {
    return [0, StmtResult2.default()];
  },
  1(r, msg) {
    msg[0] = r.uint32();
  },
  2(r, msg) {
    msg[1] = r.message(StmtResult2);
  }
};
var BatchResultStepError = {
  default() {
    return [0, Error3.default()];
  },
  1(r, msg) {
    msg[0] = r.uint32();
  },
  2(r, msg) {
    msg[1] = r.message(Error3);
  }
};
var CursorEntry2 = {
  default() {
    return { type: "none" };
  },
  1(r) {
    return r.message(StepBeginEntry);
  },
  2(r) {
    return r.message(StepEndEntry);
  },
  3(r) {
    return r.message(StepErrorEntry);
  },
  4(r) {
    return { type: "row", row: r.message(Row) };
  },
  5(r) {
    return { type: "error", error: r.message(Error3) };
  }
};
var StepBeginEntry = {
  default() {
    return { type: "step_begin", step: 0, cols: [] };
  },
  1(r, msg) {
    msg.step = r.uint32();
  },
  2(r, msg) {
    msg.cols.push(r.message(Col2));
  }
};
var StepEndEntry = {
  default() {
    return {
      type: "step_end",
      affectedRowCount: 0,
      lastInsertRowid: void 0
    };
  },
  1(r, msg) {
    msg.affectedRowCount = r.uint32();
  },
  2(r, msg) {
    msg.lastInsertRowid = r.uint64();
  }
};
var StepErrorEntry = {
  default() {
    return {
      type: "step_error",
      step: 0,
      error: Error3.default()
    };
  },
  1(r, msg) {
    msg.step = r.uint32();
  },
  2(r, msg) {
    msg.error = r.message(Error3);
  }
};
var DescribeResult2 = {
  default() {
    return {
      params: [],
      cols: [],
      isExplain: false,
      isReadonly: false
    };
  },
  1(r, msg) {
    msg.params.push(r.message(DescribeParam2));
  },
  2(r, msg) {
    msg.cols.push(r.message(DescribeCol2));
  },
  3(r, msg) {
    msg.isExplain = r.bool();
  },
  4(r, msg) {
    msg.isReadonly = r.bool();
  }
};
var DescribeParam2 = {
  default() {
    return { name: void 0 };
  },
  1(r, msg) {
    msg.name = r.string();
  }
};
var DescribeCol2 = {
  default() {
    return { name: "", decltype: void 0 };
  },
  1(r, msg) {
    msg.name = r.string();
  },
  2(r, msg) {
    msg.decltype = r.string();
  }
};
var Value4 = {
  default() {
    return void 0;
  },
  1(r) {
    return null;
  },
  2(r) {
    return r.sint64();
  },
  3(r) {
    return r.double();
  },
  4(r) {
    return r.string();
  },
  5(r) {
    return r.bytes();
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/protobuf_decode.js
var ServerMsg2 = {
  default() {
    return { type: "none" };
  },
  1(r) {
    return { type: "hello_ok" };
  },
  2(r) {
    return r.message(HelloErrorMsg);
  },
  3(r) {
    return r.message(ResponseOkMsg);
  },
  4(r) {
    return r.message(ResponseErrorMsg);
  }
};
var HelloErrorMsg = {
  default() {
    return { type: "hello_error", error: Error3.default() };
  },
  1(r, msg) {
    msg.error = r.message(Error3);
  }
};
var ResponseErrorMsg = {
  default() {
    return { type: "response_error", requestId: 0, error: Error3.default() };
  },
  1(r, msg) {
    msg.requestId = r.int32();
  },
  2(r, msg) {
    msg.error = r.message(Error3);
  }
};
var ResponseOkMsg = {
  default() {
    return {
      type: "response_ok",
      requestId: 0,
      response: { type: "none" }
    };
  },
  1(r, msg) {
    msg.requestId = r.int32();
  },
  2(r, msg) {
    msg.response = { type: "open_stream" };
  },
  3(r, msg) {
    msg.response = { type: "close_stream" };
  },
  4(r, msg) {
    msg.response = r.message(ExecuteResp);
  },
  5(r, msg) {
    msg.response = r.message(BatchResp);
  },
  6(r, msg) {
    msg.response = { type: "open_cursor" };
  },
  7(r, msg) {
    msg.response = { type: "close_cursor" };
  },
  8(r, msg) {
    msg.response = r.message(FetchCursorResp);
  },
  9(r, msg) {
    msg.response = { type: "sequence" };
  },
  10(r, msg) {
    msg.response = r.message(DescribeResp);
  },
  11(r, msg) {
    msg.response = { type: "store_sql" };
  },
  12(r, msg) {
    msg.response = { type: "close_sql" };
  },
  13(r, msg) {
    msg.response = r.message(GetAutocommitResp);
  }
};
var ExecuteResp = {
  default() {
    return { type: "execute", result: StmtResult2.default() };
  },
  1(r, msg) {
    msg.result = r.message(StmtResult2);
  }
};
var BatchResp = {
  default() {
    return { type: "batch", result: BatchResult2.default() };
  },
  1(r, msg) {
    msg.result = r.message(BatchResult2);
  }
};
var FetchCursorResp = {
  default() {
    return { type: "fetch_cursor", entries: [], done: false };
  },
  1(r, msg) {
    msg.entries.push(r.message(CursorEntry2));
  },
  2(r, msg) {
    msg.done = r.bool();
  }
};
var DescribeResp = {
  default() {
    return { type: "describe", result: DescribeResult2.default() };
  },
  1(r, msg) {
    msg.result = r.message(DescribeResult2);
  }
};
var GetAutocommitResp = {
  default() {
    return { type: "get_autocommit", isAutocommit: false };
  },
  1(r, msg) {
    msg.isAutocommit = r.bool();
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/ws/client.js
var subprotocolsV2 = /* @__PURE__ */ new Map([
  ["hrana2", { version: 2, encoding: "json" }],
  ["hrana1", { version: 1, encoding: "json" }]
]);
var subprotocolsV3 = /* @__PURE__ */ new Map([
  ["hrana3-protobuf", { version: 3, encoding: "protobuf" }],
  ["hrana3", { version: 3, encoding: "json" }],
  ["hrana2", { version: 2, encoding: "json" }],
  ["hrana1", { version: 1, encoding: "json" }]
]);
var WsClient = class extends Client {
  #socket;
  // List of callbacks that we queue until the socket transitions from the CONNECTING to the OPEN state.
  #openCallbacks;
  // Have we already transitioned from CONNECTING to OPEN and fired the callbacks in #openCallbacks?
  #opened;
  // Stores the error that caused us to close the client (and the socket). If we are not closed, this is
  // `undefined`.
  #closed;
  // Have we received a response to our "hello" from the server?
  #recvdHello;
  // Subprotocol negotiated with the server. It is only available after the socket transitions to the OPEN
  // state.
  #subprotocol;
  // Has the `getVersion()` function been called? This is only used to validate that the API is used
  // correctly.
  #getVersionCalled;
  // A map from request id to the responses that we expect to receive from the server.
  #responseMap;
  // An allocator of request ids.
  #requestIdAlloc;
  // An allocator of stream ids.
  /** @private */
  _streamIdAlloc;
  // An allocator of cursor ids.
  /** @private */
  _cursorIdAlloc;
  // An allocator of SQL text ids.
  #sqlIdAlloc;
  /** @private */
  constructor(socket, jwt) {
    super();
    this.#socket = socket;
    this.#openCallbacks = [];
    this.#opened = false;
    this.#closed = void 0;
    this.#recvdHello = false;
    this.#subprotocol = void 0;
    this.#getVersionCalled = false;
    this.#responseMap = /* @__PURE__ */ new Map();
    this.#requestIdAlloc = new IdAlloc();
    this._streamIdAlloc = new IdAlloc();
    this._cursorIdAlloc = new IdAlloc();
    this.#sqlIdAlloc = new IdAlloc();
    this.#socket.binaryType = "arraybuffer";
    this.#socket.addEventListener("open", () => this.#onSocketOpen());
    this.#socket.addEventListener("close", (event) => this.#onSocketClose(event));
    this.#socket.addEventListener("error", (event) => this.#onSocketError(event));
    this.#socket.addEventListener("message", (event) => this.#onSocketMessage(event));
    this.#send({ type: "hello", jwt });
  }
  // Send (or enqueue to send) a message to the server.
  #send(msg) {
    if (this.#closed !== void 0) {
      throw new InternalError("Trying to send a message on a closed client");
    }
    if (this.#opened) {
      this.#sendToSocket(msg);
    } else {
      const openCallback = () => this.#sendToSocket(msg);
      const errorCallback = () => void 0;
      this.#openCallbacks.push({ openCallback, errorCallback });
    }
  }
  // The socket transitioned from CONNECTING to OPEN
  #onSocketOpen() {
    const protocol = this.#socket.protocol;
    if (protocol === void 0) {
      this.#setClosed(new ClientError("The `WebSocket.protocol` property is undefined. This most likely means that the WebSocket implementation provided by the environment is broken. If you are using Miniflare 2, please update to Miniflare 3, which fixes this problem."));
      return;
    } else if (protocol === "") {
      this.#subprotocol = { version: 1, encoding: "json" };
    } else {
      this.#subprotocol = subprotocolsV3.get(protocol);
      if (this.#subprotocol === void 0) {
        this.#setClosed(new ProtoError(`Unrecognized WebSocket subprotocol: ${JSON.stringify(protocol)}`));
        return;
      }
    }
    for (const callbacks of this.#openCallbacks) {
      callbacks.openCallback();
    }
    this.#openCallbacks.length = 0;
    this.#opened = true;
  }
  #sendToSocket(msg) {
    const encoding = this.#subprotocol.encoding;
    if (encoding === "json") {
      const jsonMsg = writeJsonObject(msg, ClientMsg);
      this.#socket.send(jsonMsg);
    } else if (encoding === "protobuf") {
      const protobufMsg = writeProtobufMessage(msg, ClientMsg2);
      this.#socket.send(protobufMsg);
    } else {
      throw impossible(encoding, "Impossible encoding");
    }
  }
  /** Get the protocol version negotiated with the server, possibly waiting until the socket is open. */
  getVersion() {
    return new Promise((versionCallback, errorCallback) => {
      this.#getVersionCalled = true;
      if (this.#closed !== void 0) {
        errorCallback(this.#closed);
      } else if (!this.#opened) {
        const openCallback = () => versionCallback(this.#subprotocol.version);
        this.#openCallbacks.push({ openCallback, errorCallback });
      } else {
        versionCallback(this.#subprotocol.version);
      }
    });
  }
  // Make sure that the negotiated version is at least `minVersion`.
  /** @private */
  _ensureVersion(minVersion, feature) {
    if (this.#subprotocol === void 0 || !this.#getVersionCalled) {
      throw new ProtocolVersionError(`${feature} is supported only on protocol version ${minVersion} and higher, but the version supported by the WebSocket server is not yet known. Use Client.getVersion() to wait until the version is available.`);
    } else if (this.#subprotocol.version < minVersion) {
      throw new ProtocolVersionError(`${feature} is supported on protocol version ${minVersion} and higher, but the WebSocket server only supports version ${this.#subprotocol.version}`);
    }
  }
  // Send a request to the server and invoke a callback when we get the response.
  /** @private */
  _sendRequest(request, callbacks) {
    if (this.#closed !== void 0) {
      callbacks.errorCallback(new ClosedError("Client is closed", this.#closed));
      return;
    }
    const requestId = this.#requestIdAlloc.alloc();
    this.#responseMap.set(requestId, { ...callbacks, type: request.type });
    this.#send({ type: "request", requestId, request });
  }
  // The socket encountered an error.
  #onSocketError(event) {
    const eventMessage = event.message;
    const message = eventMessage ?? "WebSocket was closed due to an error";
    this.#setClosed(new WebSocketError(message));
  }
  // The socket was closed.
  #onSocketClose(event) {
    let message = `WebSocket was closed with code ${event.code}`;
    if (event.reason) {
      message += `: ${event.reason}`;
    }
    this.#setClosed(new WebSocketError(message));
  }
  // Close the client with the given error.
  #setClosed(error) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#closed = error;
    for (const callbacks of this.#openCallbacks) {
      callbacks.errorCallback(error);
    }
    this.#openCallbacks.length = 0;
    for (const [requestId, responseState] of this.#responseMap.entries()) {
      responseState.errorCallback(error);
      this.#requestIdAlloc.free(requestId);
    }
    this.#responseMap.clear();
    this.#socket.close();
  }
  // We received a message from the socket.
  #onSocketMessage(event) {
    if (this.#closed !== void 0) {
      return;
    }
    try {
      let msg;
      const encoding = this.#subprotocol.encoding;
      if (encoding === "json") {
        if (typeof event.data !== "string") {
          this.#socket.close(3003, "Only text messages are accepted with JSON encoding");
          this.#setClosed(new ProtoError("Received non-text message from server with JSON encoding"));
          return;
        }
        msg = readJsonObject(JSON.parse(event.data), ServerMsg);
      } else if (encoding === "protobuf") {
        if (!(event.data instanceof ArrayBuffer)) {
          this.#socket.close(3003, "Only binary messages are accepted with Protobuf encoding");
          this.#setClosed(new ProtoError("Received non-binary message from server with Protobuf encoding"));
          return;
        }
        msg = readProtobufMessage(new Uint8Array(event.data), ServerMsg2);
      } else {
        throw impossible(encoding, "Impossible encoding");
      }
      this.#handleMsg(msg);
    } catch (e) {
      this.#socket.close(3007, "Could not handle message");
      this.#setClosed(e);
    }
  }
  // Handle a message from the server.
  #handleMsg(msg) {
    if (msg.type === "none") {
      throw new ProtoError("Received an unrecognized ServerMsg");
    } else if (msg.type === "hello_ok" || msg.type === "hello_error") {
      if (this.#recvdHello) {
        throw new ProtoError("Received a duplicated hello response");
      }
      this.#recvdHello = true;
      if (msg.type === "hello_error") {
        throw errorFromProto(msg.error);
      }
      return;
    } else if (!this.#recvdHello) {
      throw new ProtoError("Received a non-hello message before a hello response");
    }
    if (msg.type === "response_ok") {
      const requestId = msg.requestId;
      const responseState = this.#responseMap.get(requestId);
      this.#responseMap.delete(requestId);
      if (responseState === void 0) {
        throw new ProtoError("Received unexpected OK response");
      }
      this.#requestIdAlloc.free(requestId);
      try {
        if (responseState.type !== msg.response.type) {
          console.dir({ responseState, msg });
          throw new ProtoError("Received unexpected type of response");
        }
        responseState.responseCallback(msg.response);
      } catch (e) {
        responseState.errorCallback(e);
        throw e;
      }
    } else if (msg.type === "response_error") {
      const requestId = msg.requestId;
      const responseState = this.#responseMap.get(requestId);
      this.#responseMap.delete(requestId);
      if (responseState === void 0) {
        throw new ProtoError("Received unexpected error response");
      }
      this.#requestIdAlloc.free(requestId);
      responseState.errorCallback(errorFromProto(msg.error));
    } else {
      throw impossible(msg, "Impossible ServerMsg type");
    }
  }
  /** Open a {@link WsStream}, a stream for executing SQL statements. */
  openStream() {
    return WsStream.open(this);
  }
  /** Cache a SQL text on the server. This requires protocol version 2 or higher. */
  storeSql(sql) {
    this._ensureVersion(2, "storeSql()");
    const sqlId = this.#sqlIdAlloc.alloc();
    const sqlObj = new Sql(this, sqlId);
    const responseCallback = () => void 0;
    const errorCallback = (e) => sqlObj._setClosed(e);
    const request = { type: "store_sql", sqlId, sql };
    this._sendRequest(request, { responseCallback, errorCallback });
    return sqlObj;
  }
  /** @private */
  _closeSql(sqlId) {
    if (this.#closed !== void 0) {
      return;
    }
    const responseCallback = () => this.#sqlIdAlloc.free(sqlId);
    const errorCallback = (e) => this.#setClosed(e);
    const request = { type: "close_sql", sqlId };
    this._sendRequest(request, { responseCallback, errorCallback });
  }
  /** Close the client and the WebSocket. */
  close() {
    this.#setClosed(new ClientError("Client was manually closed"));
  }
  /** True if the client is closed. */
  get closed() {
    return this.#closed !== void 0;
  }
};

// node_modules/.pnpm/@libsql+isomorphic-fetch@0.2.5/node_modules/@libsql/isomorphic-fetch/web.js
var _fetch = fetch;
var _Request = Request;
var _Headers = Headers;

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/queue_microtask.js
var _queueMicrotask;
if (typeof queueMicrotask !== "undefined") {
  _queueMicrotask = queueMicrotask;
} else {
  const resolved = Promise.resolve();
  _queueMicrotask = (callback) => {
    resolved.then(callback);
  };
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/byte_queue.js
var ByteQueue = class {
  #array;
  #shiftPos;
  #pushPos;
  constructor(initialCap) {
    this.#array = new Uint8Array(new ArrayBuffer(initialCap));
    this.#shiftPos = 0;
    this.#pushPos = 0;
  }
  get length() {
    return this.#pushPos - this.#shiftPos;
  }
  data() {
    return this.#array.slice(this.#shiftPos, this.#pushPos);
  }
  push(chunk) {
    this.#ensurePush(chunk.byteLength);
    this.#array.set(chunk, this.#pushPos);
    this.#pushPos += chunk.byteLength;
  }
  #ensurePush(pushLength) {
    if (this.#pushPos + pushLength <= this.#array.byteLength) {
      return;
    }
    const filledLength = this.#pushPos - this.#shiftPos;
    if (filledLength + pushLength <= this.#array.byteLength && 2 * this.#pushPos >= this.#array.byteLength) {
      this.#array.copyWithin(0, this.#shiftPos, this.#pushPos);
    } else {
      let newCap = this.#array.byteLength;
      do {
        newCap *= 2;
      } while (filledLength + pushLength > newCap);
      const newArray = new Uint8Array(new ArrayBuffer(newCap));
      newArray.set(this.#array.slice(this.#shiftPos, this.#pushPos), 0);
      this.#array = newArray;
    }
    this.#pushPos = filledLength;
    this.#shiftPos = 0;
  }
  shift(length) {
    this.#shiftPos += length;
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/json_decode.js
function PipelineRespBody(obj) {
  const baton = stringOpt(obj["baton"]);
  const baseUrl = stringOpt(obj["base_url"]);
  const results = arrayObjectsMap(obj["results"], StreamResult);
  return { baton, baseUrl, results };
}
function StreamResult(obj) {
  const type = string(obj["type"]);
  if (type === "ok") {
    const response = StreamResponse(object(obj["response"]));
    return { type: "ok", response };
  } else if (type === "error") {
    const error = Error2(object(obj["error"]));
    return { type: "error", error };
  } else {
    throw new ProtoError("Unexpected type of StreamResult");
  }
}
function StreamResponse(obj) {
  const type = string(obj["type"]);
  if (type === "close") {
    return { type: "close" };
  } else if (type === "execute") {
    const result = StmtResult(object(obj["result"]));
    return { type: "execute", result };
  } else if (type === "batch") {
    const result = BatchResult(object(obj["result"]));
    return { type: "batch", result };
  } else if (type === "sequence") {
    return { type: "sequence" };
  } else if (type === "describe") {
    const result = DescribeResult(object(obj["result"]));
    return { type: "describe", result };
  } else if (type === "store_sql") {
    return { type: "store_sql" };
  } else if (type === "close_sql") {
    return { type: "close_sql" };
  } else if (type === "get_autocommit") {
    const isAutocommit = boolean(obj["is_autocommit"]);
    return { type: "get_autocommit", isAutocommit };
  } else {
    throw new ProtoError("Unexpected type of StreamResponse");
  }
}
function CursorRespBody(obj) {
  const baton = stringOpt(obj["baton"]);
  const baseUrl = stringOpt(obj["base_url"]);
  return { baton, baseUrl };
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/protobuf_decode.js
var PipelineRespBody2 = {
  default() {
    return { baton: void 0, baseUrl: void 0, results: [] };
  },
  1(r, msg) {
    msg.baton = r.string();
  },
  2(r, msg) {
    msg.baseUrl = r.string();
  },
  3(r, msg) {
    msg.results.push(r.message(StreamResult2));
  }
};
var StreamResult2 = {
  default() {
    return { type: "none" };
  },
  1(r) {
    return { type: "ok", response: r.message(StreamResponse2) };
  },
  2(r) {
    return { type: "error", error: r.message(Error3) };
  }
};
var StreamResponse2 = {
  default() {
    return { type: "none" };
  },
  1(r) {
    return { type: "close" };
  },
  2(r) {
    return r.message(ExecuteStreamResp);
  },
  3(r) {
    return r.message(BatchStreamResp);
  },
  4(r) {
    return { type: "sequence" };
  },
  5(r) {
    return r.message(DescribeStreamResp);
  },
  6(r) {
    return { type: "store_sql" };
  },
  7(r) {
    return { type: "close_sql" };
  },
  8(r) {
    return r.message(GetAutocommitStreamResp);
  }
};
var ExecuteStreamResp = {
  default() {
    return { type: "execute", result: StmtResult2.default() };
  },
  1(r, msg) {
    msg.result = r.message(StmtResult2);
  }
};
var BatchStreamResp = {
  default() {
    return { type: "batch", result: BatchResult2.default() };
  },
  1(r, msg) {
    msg.result = r.message(BatchResult2);
  }
};
var DescribeStreamResp = {
  default() {
    return { type: "describe", result: DescribeResult2.default() };
  },
  1(r, msg) {
    msg.result = r.message(DescribeResult2);
  }
};
var GetAutocommitStreamResp = {
  default() {
    return { type: "get_autocommit", isAutocommit: false };
  },
  1(r, msg) {
    msg.isAutocommit = r.bool();
  }
};
var CursorRespBody2 = {
  default() {
    return { baton: void 0, baseUrl: void 0 };
  },
  1(r, msg) {
    msg.baton = r.string();
  },
  2(r, msg) {
    msg.baseUrl = r.string();
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/cursor.js
var HttpCursor = class extends Cursor {
  #stream;
  #encoding;
  #reader;
  #queue;
  #closed;
  #done;
  /** @private */
  constructor(stream, encoding) {
    super();
    this.#stream = stream;
    this.#encoding = encoding;
    this.#reader = void 0;
    this.#queue = new ByteQueue(16 * 1024);
    this.#closed = void 0;
    this.#done = false;
  }
  async open(response) {
    if (response.body === null) {
      throw new ProtoError("No response body for cursor request");
    }
    this.#reader = response.body.getReader();
    const respBody = await this.#nextItem(CursorRespBody, CursorRespBody2);
    if (respBody === void 0) {
      throw new ProtoError("Empty response to cursor request");
    }
    return respBody;
  }
  /** Fetch the next entry from the cursor. */
  next() {
    return this.#nextItem(CursorEntry, CursorEntry2);
  }
  /** Close the cursor. */
  close() {
    this._setClosed(new ClientError("Cursor was manually closed"));
  }
  /** @private */
  _setClosed(error) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#closed = error;
    this.#stream._cursorClosed(this);
    if (this.#reader !== void 0) {
      this.#reader.cancel();
    }
  }
  /** True if the cursor is closed. */
  get closed() {
    return this.#closed !== void 0;
  }
  async #nextItem(jsonFun, protobufDef) {
    for (; ; ) {
      if (this.#done) {
        return void 0;
      } else if (this.#closed !== void 0) {
        throw new ClosedError("Cursor is closed", this.#closed);
      }
      if (this.#encoding === "json") {
        const jsonData = this.#parseItemJson();
        if (jsonData !== void 0) {
          const jsonText = new TextDecoder().decode(jsonData);
          const jsonValue = JSON.parse(jsonText);
          return readJsonObject(jsonValue, jsonFun);
        }
      } else if (this.#encoding === "protobuf") {
        const protobufData = this.#parseItemProtobuf();
        if (protobufData !== void 0) {
          return readProtobufMessage(protobufData, protobufDef);
        }
      } else {
        throw impossible(this.#encoding, "Impossible encoding");
      }
      if (this.#reader === void 0) {
        throw new InternalError("Attempted to read from HTTP cursor before it was opened");
      }
      const { value, done } = await this.#reader.read();
      if (done && this.#queue.length === 0) {
        this.#done = true;
      } else if (done) {
        throw new ProtoError("Unexpected end of cursor stream");
      } else {
        this.#queue.push(value);
      }
    }
  }
  #parseItemJson() {
    const data = this.#queue.data();
    const newlineByte = 10;
    const newlinePos = data.indexOf(newlineByte);
    if (newlinePos < 0) {
      return void 0;
    }
    const jsonData = data.slice(0, newlinePos);
    this.#queue.shift(newlinePos + 1);
    return jsonData;
  }
  #parseItemProtobuf() {
    const data = this.#queue.data();
    let varintValue = 0;
    let varintLength = 0;
    for (; ; ) {
      if (varintLength >= data.byteLength) {
        return void 0;
      }
      const byte = data[varintLength];
      varintValue |= (byte & 127) << 7 * varintLength;
      varintLength += 1;
      if (!(byte & 128)) {
        break;
      }
    }
    if (data.byteLength < varintLength + varintValue) {
      return void 0;
    }
    const protobufData = data.slice(varintLength, varintLength + varintValue);
    this.#queue.shift(varintLength + varintValue);
    return protobufData;
  }
};

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/json_encode.js
function PipelineReqBody(w, msg) {
  if (msg.baton !== void 0) {
    w.string("baton", msg.baton);
  }
  w.arrayObjects("requests", msg.requests, StreamRequest);
}
function StreamRequest(w, msg) {
  w.stringRaw("type", msg.type);
  if (msg.type === "close") {
  } else if (msg.type === "execute") {
    w.object("stmt", msg.stmt, Stmt2);
  } else if (msg.type === "batch") {
    w.object("batch", msg.batch, Batch2);
  } else if (msg.type === "sequence") {
    if (msg.sql !== void 0) {
      w.string("sql", msg.sql);
    }
    if (msg.sqlId !== void 0) {
      w.number("sql_id", msg.sqlId);
    }
  } else if (msg.type === "describe") {
    if (msg.sql !== void 0) {
      w.string("sql", msg.sql);
    }
    if (msg.sqlId !== void 0) {
      w.number("sql_id", msg.sqlId);
    }
  } else if (msg.type === "store_sql") {
    w.number("sql_id", msg.sqlId);
    w.string("sql", msg.sql);
  } else if (msg.type === "close_sql") {
    w.number("sql_id", msg.sqlId);
  } else if (msg.type === "get_autocommit") {
  } else {
    throw impossible(msg, "Impossible type of StreamRequest");
  }
}
function CursorReqBody(w, msg) {
  if (msg.baton !== void 0) {
    w.string("baton", msg.baton);
  }
  w.object("batch", msg.batch, Batch2);
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/protobuf_encode.js
function PipelineReqBody2(w, msg) {
  if (msg.baton !== void 0) {
    w.string(1, msg.baton);
  }
  for (const req of msg.requests) {
    w.message(2, req, StreamRequest2);
  }
}
function StreamRequest2(w, msg) {
  if (msg.type === "close") {
    w.message(1, msg, CloseStreamReq2);
  } else if (msg.type === "execute") {
    w.message(2, msg, ExecuteStreamReq);
  } else if (msg.type === "batch") {
    w.message(3, msg, BatchStreamReq);
  } else if (msg.type === "sequence") {
    w.message(4, msg, SequenceStreamReq);
  } else if (msg.type === "describe") {
    w.message(5, msg, DescribeStreamReq);
  } else if (msg.type === "store_sql") {
    w.message(6, msg, StoreSqlStreamReq);
  } else if (msg.type === "close_sql") {
    w.message(7, msg, CloseSqlStreamReq);
  } else if (msg.type === "get_autocommit") {
    w.message(8, msg, GetAutocommitStreamReq);
  } else {
    throw impossible(msg, "Impossible type of StreamRequest");
  }
}
function CloseStreamReq2(_w, _msg) {
}
function ExecuteStreamReq(w, msg) {
  w.message(1, msg.stmt, Stmt3);
}
function BatchStreamReq(w, msg) {
  w.message(1, msg.batch, Batch3);
}
function SequenceStreamReq(w, msg) {
  if (msg.sql !== void 0) {
    w.string(1, msg.sql);
  }
  if (msg.sqlId !== void 0) {
    w.int32(2, msg.sqlId);
  }
}
function DescribeStreamReq(w, msg) {
  if (msg.sql !== void 0) {
    w.string(1, msg.sql);
  }
  if (msg.sqlId !== void 0) {
    w.int32(2, msg.sqlId);
  }
}
function StoreSqlStreamReq(w, msg) {
  w.int32(1, msg.sqlId);
  w.string(2, msg.sql);
}
function CloseSqlStreamReq(w, msg) {
  w.int32(1, msg.sqlId);
}
function GetAutocommitStreamReq(_w, _msg) {
}
function CursorReqBody2(w, msg) {
  if (msg.baton !== void 0) {
    w.string(1, msg.baton);
  }
  w.message(2, msg.batch, Batch3);
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/stream.js
var HttpStream = class extends Stream {
  #client;
  #baseUrl;
  #jwt;
  #fetch;
  #baton;
  #queue;
  #flushing;
  #cursor;
  #closing;
  #closeQueued;
  #closed;
  #sqlIdAlloc;
  /** @private */
  constructor(client, baseUrl, jwt, customFetch) {
    super(client.intMode);
    this.#client = client;
    this.#baseUrl = baseUrl.toString();
    this.#jwt = jwt;
    this.#fetch = customFetch;
    this.#baton = void 0;
    this.#queue = new Queue();
    this.#flushing = false;
    this.#closing = false;
    this.#closeQueued = false;
    this.#closed = void 0;
    this.#sqlIdAlloc = new IdAlloc();
  }
  /** Get the {@link HttpClient} object that this stream belongs to. */
  client() {
    return this.#client;
  }
  /** @private */
  _sqlOwner() {
    return this;
  }
  /** Cache a SQL text on the server. */
  storeSql(sql) {
    const sqlId = this.#sqlIdAlloc.alloc();
    this.#sendStreamRequest({ type: "store_sql", sqlId, sql }).then(() => void 0, (error) => this._setClosed(error));
    return new Sql(this, sqlId);
  }
  /** @private */
  _closeSql(sqlId) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#sendStreamRequest({ type: "close_sql", sqlId }).then(() => this.#sqlIdAlloc.free(sqlId), (error) => this._setClosed(error));
  }
  /** @private */
  _execute(stmt) {
    return this.#sendStreamRequest({ type: "execute", stmt }).then((response) => {
      return response.result;
    });
  }
  /** @private */
  _batch(batch) {
    return this.#sendStreamRequest({ type: "batch", batch }).then((response) => {
      return response.result;
    });
  }
  /** @private */
  _describe(protoSql) {
    return this.#sendStreamRequest({
      type: "describe",
      sql: protoSql.sql,
      sqlId: protoSql.sqlId
    }).then((response) => {
      return response.result;
    });
  }
  /** @private */
  _sequence(protoSql) {
    return this.#sendStreamRequest({
      type: "sequence",
      sql: protoSql.sql,
      sqlId: protoSql.sqlId
    }).then((_response) => {
      return void 0;
    });
  }
  /** Check whether the SQL connection underlying this stream is in autocommit state (i.e., outside of an
   * explicit transaction). This requires protocol version 3 or higher.
   */
  getAutocommit() {
    this.#client._ensureVersion(3, "getAutocommit()");
    return this.#sendStreamRequest({
      type: "get_autocommit"
    }).then((response) => {
      return response.isAutocommit;
    });
  }
  #sendStreamRequest(request) {
    return new Promise((responseCallback, errorCallback) => {
      this.#pushToQueue({ type: "pipeline", request, responseCallback, errorCallback });
    });
  }
  /** @private */
  _openCursor(batch) {
    return new Promise((cursorCallback, errorCallback) => {
      this.#pushToQueue({ type: "cursor", batch, cursorCallback, errorCallback });
    });
  }
  /** @private */
  _cursorClosed(cursor) {
    if (cursor !== this.#cursor) {
      throw new InternalError("Cursor was closed, but it was not associated with the stream");
    }
    this.#cursor = void 0;
    _queueMicrotask(() => this.#flushQueue());
  }
  /** Immediately close the stream. */
  close() {
    this._setClosed(new ClientError("Stream was manually closed"));
  }
  /** Gracefully close the stream. */
  closeGracefully() {
    this.#closing = true;
    _queueMicrotask(() => this.#flushQueue());
  }
  /** True if the stream is closed. */
  get closed() {
    return this.#closed !== void 0 || this.#closing;
  }
  /** @private */
  _setClosed(error) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#closed = error;
    if (this.#cursor !== void 0) {
      this.#cursor._setClosed(error);
    }
    this.#client._streamClosed(this);
    for (; ; ) {
      const entry = this.#queue.shift();
      if (entry !== void 0) {
        entry.errorCallback(error);
      } else {
        break;
      }
    }
    if ((this.#baton !== void 0 || this.#flushing) && !this.#closeQueued) {
      this.#queue.push({
        type: "pipeline",
        request: { type: "close" },
        responseCallback: () => void 0,
        errorCallback: () => void 0
      });
      this.#closeQueued = true;
      _queueMicrotask(() => this.#flushQueue());
    }
  }
  #pushToQueue(entry) {
    if (this.#closed !== void 0) {
      throw new ClosedError("Stream is closed", this.#closed);
    } else if (this.#closing) {
      throw new ClosedError("Stream is closing", void 0);
    } else {
      this.#queue.push(entry);
      _queueMicrotask(() => this.#flushQueue());
    }
  }
  #flushQueue() {
    if (this.#flushing || this.#cursor !== void 0) {
      return;
    }
    if (this.#closing && this.#queue.length === 0) {
      this._setClosed(new ClientError("Stream was gracefully closed"));
      return;
    }
    const endpoint = this.#client._endpoint;
    if (endpoint === void 0) {
      this.#client._endpointPromise.then(() => this.#flushQueue(), (error) => this._setClosed(error));
      return;
    }
    const firstEntry = this.#queue.shift();
    if (firstEntry === void 0) {
      return;
    } else if (firstEntry.type === "pipeline") {
      const pipeline = [firstEntry];
      for (; ; ) {
        const entry = this.#queue.first();
        if (entry !== void 0 && entry.type === "pipeline") {
          pipeline.push(entry);
          this.#queue.shift();
        } else if (entry === void 0 && this.#closing && !this.#closeQueued) {
          pipeline.push({
            type: "pipeline",
            request: { type: "close" },
            responseCallback: () => void 0,
            errorCallback: () => void 0
          });
          this.#closeQueued = true;
          break;
        } else {
          break;
        }
      }
      this.#flushPipeline(endpoint, pipeline);
    } else if (firstEntry.type === "cursor") {
      this.#flushCursor(endpoint, firstEntry);
    } else {
      throw impossible(firstEntry, "Impossible type of QueueEntry");
    }
  }
  #flushPipeline(endpoint, pipeline) {
    this.#flush(() => this.#createPipelineRequest(pipeline, endpoint), (resp) => decodePipelineResponse(resp, endpoint.encoding), (respBody) => respBody.baton, (respBody) => respBody.baseUrl, (respBody) => handlePipelineResponse(pipeline, respBody), (error) => pipeline.forEach((entry) => entry.errorCallback(error)));
  }
  #flushCursor(endpoint, entry) {
    const cursor = new HttpCursor(this, endpoint.encoding);
    this.#cursor = cursor;
    this.#flush(() => this.#createCursorRequest(entry, endpoint), (resp) => cursor.open(resp), (respBody) => respBody.baton, (respBody) => respBody.baseUrl, (_respBody) => entry.cursorCallback(cursor), (error) => entry.errorCallback(error));
  }
  #flush(createRequest, decodeResponse, getBaton, getBaseUrl, handleResponse, handleError) {
    let promise;
    try {
      const request = createRequest();
      const fetch2 = this.#fetch;
      promise = fetch2(request);
    } catch (error) {
      promise = Promise.reject(error);
    }
    this.#flushing = true;
    promise.then((resp) => {
      if (!resp.ok) {
        return errorFromResponse(resp).then((error) => {
          throw error;
        });
      }
      return decodeResponse(resp);
    }).then((r) => {
      this.#baton = getBaton(r);
      this.#baseUrl = getBaseUrl(r) ?? this.#baseUrl;
      handleResponse(r);
    }).catch((error) => {
      this._setClosed(error);
      handleError(error);
    }).finally(() => {
      this.#flushing = false;
      this.#flushQueue();
    });
  }
  #createPipelineRequest(pipeline, endpoint) {
    return this.#createRequest(new URL(endpoint.pipelinePath, this.#baseUrl), {
      baton: this.#baton,
      requests: pipeline.map((entry) => entry.request)
    }, endpoint.encoding, PipelineReqBody, PipelineReqBody2);
  }
  #createCursorRequest(entry, endpoint) {
    if (endpoint.cursorPath === void 0) {
      throw new ProtocolVersionError(`Cursors are supported only on protocol version 3 and higher, but the HTTP server only supports version ${endpoint.version}.`);
    }
    return this.#createRequest(new URL(endpoint.cursorPath, this.#baseUrl), {
      baton: this.#baton,
      batch: entry.batch
    }, endpoint.encoding, CursorReqBody, CursorReqBody2);
  }
  #createRequest(url, reqBody, encoding, jsonFun, protobufFun) {
    let bodyData;
    let contentType;
    if (encoding === "json") {
      bodyData = writeJsonObject(reqBody, jsonFun);
      contentType = "application/json";
    } else if (encoding === "protobuf") {
      bodyData = writeProtobufMessage(reqBody, protobufFun);
      contentType = "application/x-protobuf";
    } else {
      throw impossible(encoding, "Impossible encoding");
    }
    const headers = new _Headers();
    headers.set("content-type", contentType);
    if (this.#jwt !== void 0) {
      headers.set("authorization", `Bearer ${this.#jwt}`);
    }
    return new _Request(url.toString(), { method: "POST", headers, body: bodyData });
  }
};
function handlePipelineResponse(pipeline, respBody) {
  if (respBody.results.length !== pipeline.length) {
    throw new ProtoError("Server returned unexpected number of pipeline results");
  }
  for (let i = 0; i < pipeline.length; ++i) {
    const result = respBody.results[i];
    const entry = pipeline[i];
    if (result.type === "ok") {
      if (result.response.type !== entry.request.type) {
        throw new ProtoError("Received unexpected type of response");
      }
      entry.responseCallback(result.response);
    } else if (result.type === "error") {
      entry.errorCallback(errorFromProto(result.error));
    } else if (result.type === "none") {
      throw new ProtoError("Received unrecognized type of StreamResult");
    } else {
      throw impossible(result, "Received impossible type of StreamResult");
    }
  }
}
async function decodePipelineResponse(resp, encoding) {
  if (encoding === "json") {
    const respJson = await resp.json();
    return readJsonObject(respJson, PipelineRespBody);
  } else if (encoding === "protobuf") {
    const respData = await resp.arrayBuffer();
    return readProtobufMessage(new Uint8Array(respData), PipelineRespBody2);
  } else {
    throw impossible(encoding, "Impossible encoding");
  }
}
async function errorFromResponse(resp) {
  const respType = resp.headers.get("content-type") ?? "text/plain";
  if (respType === "application/json") {
    const respBody = await resp.json();
    if ("message" in respBody) {
      return errorFromProto(respBody);
    }
  }
  let message = `Server returned HTTP status ${resp.status}`;
  if (respType === "text/plain") {
    const respBody = (await resp.text()).trim();
    if (respBody !== "") {
      message += `: ${respBody}`;
    }
  }
  return new HttpServerError(message, resp.status);
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/http/client.js
var checkEndpoints = [
  {
    versionPath: "v3-protobuf",
    pipelinePath: "v3-protobuf/pipeline",
    cursorPath: "v3-protobuf/cursor",
    version: 3,
    encoding: "protobuf"
  }
  /*
  {
      versionPath: "v3",
      pipelinePath: "v3/pipeline",
      cursorPath: "v3/cursor",
      version: 3,
      encoding: "json",
  },
  */
];
var fallbackEndpoint = {
  versionPath: "v2",
  pipelinePath: "v2/pipeline",
  cursorPath: void 0,
  version: 2,
  encoding: "json"
};
var HttpClient = class extends Client {
  #url;
  #jwt;
  #fetch;
  #closed;
  #streams;
  /** @private */
  _endpointPromise;
  /** @private */
  _endpoint;
  /** @private */
  constructor(url, jwt, customFetch, protocolVersion = 2) {
    super();
    this.#url = url;
    this.#jwt = jwt;
    this.#fetch = customFetch ?? _fetch;
    this.#closed = void 0;
    this.#streams = /* @__PURE__ */ new Set();
    if (protocolVersion == 3) {
      this._endpointPromise = findEndpoint(this.#fetch, this.#url);
      this._endpointPromise.then((endpoint) => this._endpoint = endpoint, (error) => this.#setClosed(error));
    } else {
      this._endpointPromise = Promise.resolve(fallbackEndpoint);
      this._endpointPromise.then((endpoint) => this._endpoint = endpoint, (error) => this.#setClosed(error));
    }
  }
  /** Get the protocol version supported by the server. */
  async getVersion() {
    if (this._endpoint !== void 0) {
      return this._endpoint.version;
    }
    return (await this._endpointPromise).version;
  }
  // Make sure that the negotiated version is at least `minVersion`.
  /** @private */
  _ensureVersion(minVersion, feature) {
    if (minVersion <= fallbackEndpoint.version) {
      return;
    } else if (this._endpoint === void 0) {
      throw new ProtocolVersionError(`${feature} is supported only on protocol version ${minVersion} and higher, but the version supported by the HTTP server is not yet known. Use Client.getVersion() to wait until the version is available.`);
    } else if (this._endpoint.version < minVersion) {
      throw new ProtocolVersionError(`${feature} is supported only on protocol version ${minVersion} and higher, but the HTTP server only supports version ${this._endpoint.version}.`);
    }
  }
  /** Open a {@link HttpStream}, a stream for executing SQL statements. */
  openStream() {
    if (this.#closed !== void 0) {
      throw new ClosedError("Client is closed", this.#closed);
    }
    const stream = new HttpStream(this, this.#url, this.#jwt, this.#fetch);
    this.#streams.add(stream);
    return stream;
  }
  /** @private */
  _streamClosed(stream) {
    this.#streams.delete(stream);
  }
  /** Close the client and all its streams. */
  close() {
    this.#setClosed(new ClientError("Client was manually closed"));
  }
  /** True if the client is closed. */
  get closed() {
    return this.#closed !== void 0;
  }
  #setClosed(error) {
    if (this.#closed !== void 0) {
      return;
    }
    this.#closed = error;
    for (const stream of Array.from(this.#streams)) {
      stream._setClosed(new ClosedError("Client was closed", error));
    }
  }
};
async function findEndpoint(customFetch, clientUrl) {
  const fetch2 = customFetch;
  for (const endpoint of checkEndpoints) {
    const url = new URL(endpoint.versionPath, clientUrl);
    const request = new _Request(url.toString(), { method: "GET" });
    const response = await fetch2(request);
    await response.arrayBuffer();
    if (response.ok) {
      return endpoint;
    }
  }
  return fallbackEndpoint;
}

// node_modules/.pnpm/@libsql+hrana-client@0.6.2/node_modules/@libsql/hrana-client/lib-esm/index.js
function openWs(url, jwt, protocolVersion = 2) {
  if (typeof _WebSocket === "undefined") {
    throw new WebSocketUnsupportedError("WebSockets are not supported in this environment");
  }
  var subprotocols = void 0;
  if (protocolVersion == 3) {
    subprotocols = Array.from(subprotocolsV3.keys());
  } else {
    subprotocols = Array.from(subprotocolsV2.keys());
  }
  const socket = new _WebSocket(url, subprotocols);
  return new WsClient(socket, jwt);
}
function openHttp(url, jwt, customFetch, protocolVersion = 2) {
  return new HttpClient(url instanceof URL ? url : new URL(url), jwt, customFetch, protocolVersion);
}

// node_modules/.pnpm/@libsql+client@0.10.0/node_modules/@libsql/client/lib-esm/hrana.js
var HranaTransaction = class {
  #mode;
  #version;
  // Promise that is resolved when the BEGIN statement completes, or `undefined` if we haven't executed the
  // BEGIN statement yet.
  #started;
  /** @private */
  constructor(mode, version2) {
    this.#mode = mode;
    this.#version = version2;
    this.#started = void 0;
  }
  execute(stmt) {
    return this.batch([stmt]).then((results) => results[0]);
  }
  async batch(stmts) {
    const stream = this._getStream();
    if (stream.closed) {
      throw new LibsqlError("Cannot execute statements because the transaction is closed", "TRANSACTION_CLOSED");
    }
    try {
      const hranaStmts = stmts.map(stmtToHrana);
      let rowsPromises;
      if (this.#started === void 0) {
        this._getSqlCache().apply(hranaStmts);
        const batch = stream.batch(this.#version >= 3);
        const beginStep = batch.step();
        const beginPromise = beginStep.run(transactionModeToBegin(this.#mode));
        let lastStep = beginStep;
        rowsPromises = hranaStmts.map((hranaStmt) => {
          const stmtStep = batch.step().condition(BatchCond.ok(lastStep));
          if (this.#version >= 3) {
            stmtStep.condition(BatchCond.not(BatchCond.isAutocommit(batch)));
          }
          const rowsPromise = stmtStep.query(hranaStmt);
          rowsPromise.catch(() => void 0);
          lastStep = stmtStep;
          return rowsPromise;
        });
        this.#started = batch.execute().then(() => beginPromise).then(() => void 0);
        try {
          await this.#started;
        } catch (e) {
          this.close();
          throw e;
        }
      } else {
        if (this.#version < 3) {
          await this.#started;
        } else {
        }
        this._getSqlCache().apply(hranaStmts);
        const batch = stream.batch(this.#version >= 3);
        let lastStep = void 0;
        rowsPromises = hranaStmts.map((hranaStmt) => {
          const stmtStep = batch.step();
          if (lastStep !== void 0) {
            stmtStep.condition(BatchCond.ok(lastStep));
          }
          if (this.#version >= 3) {
            stmtStep.condition(BatchCond.not(BatchCond.isAutocommit(batch)));
          }
          const rowsPromise = stmtStep.query(hranaStmt);
          rowsPromise.catch(() => void 0);
          lastStep = stmtStep;
          return rowsPromise;
        });
        await batch.execute();
      }
      const resultSets = [];
      for (const rowsPromise of rowsPromises) {
        const rows = await rowsPromise;
        if (rows === void 0) {
          throw new LibsqlError("Statement in a transaction was not executed, probably because the transaction has been rolled back", "TRANSACTION_CLOSED");
        }
        resultSets.push(resultSetFromHrana(rows));
      }
      return resultSets;
    } catch (e) {
      throw mapHranaError(e);
    }
  }
  async executeMultiple(sql) {
    const stream = this._getStream();
    if (stream.closed) {
      throw new LibsqlError("Cannot execute statements because the transaction is closed", "TRANSACTION_CLOSED");
    }
    try {
      if (this.#started === void 0) {
        this.#started = stream.run(transactionModeToBegin(this.#mode)).then(() => void 0);
        try {
          await this.#started;
        } catch (e) {
          this.close();
          throw e;
        }
      } else {
        await this.#started;
      }
      await stream.sequence(sql);
    } catch (e) {
      throw mapHranaError(e);
    }
  }
  async rollback() {
    try {
      const stream = this._getStream();
      if (stream.closed) {
        return;
      }
      if (this.#started !== void 0) {
      } else {
        return;
      }
      const promise = stream.run("ROLLBACK").catch((e) => {
        throw mapHranaError(e);
      });
      stream.closeGracefully();
      await promise;
    } catch (e) {
      throw mapHranaError(e);
    } finally {
      this.close();
    }
  }
  async commit() {
    try {
      const stream = this._getStream();
      if (stream.closed) {
        throw new LibsqlError("Cannot commit the transaction because it is already closed", "TRANSACTION_CLOSED");
      }
      if (this.#started !== void 0) {
        await this.#started;
      } else {
        return;
      }
      const promise = stream.run("COMMIT").catch((e) => {
        throw mapHranaError(e);
      });
      stream.closeGracefully();
      await promise;
    } catch (e) {
      throw mapHranaError(e);
    } finally {
      this.close();
    }
  }
};
async function executeHranaBatch(mode, version2, batch, hranaStmts, disableForeignKeys = false) {
  if (disableForeignKeys) {
    batch.step().run("PRAGMA foreign_keys=off");
  }
  const beginStep = batch.step();
  const beginPromise = beginStep.run(transactionModeToBegin(mode));
  let lastStep = beginStep;
  const stmtPromises = hranaStmts.map((hranaStmt) => {
    const stmtStep = batch.step().condition(BatchCond.ok(lastStep));
    if (version2 >= 3) {
      stmtStep.condition(BatchCond.not(BatchCond.isAutocommit(batch)));
    }
    const stmtPromise = stmtStep.query(hranaStmt);
    lastStep = stmtStep;
    return stmtPromise;
  });
  const commitStep = batch.step().condition(BatchCond.ok(lastStep));
  if (version2 >= 3) {
    commitStep.condition(BatchCond.not(BatchCond.isAutocommit(batch)));
  }
  const commitPromise = commitStep.run("COMMIT");
  const rollbackStep = batch.step().condition(BatchCond.not(BatchCond.ok(commitStep)));
  rollbackStep.run("ROLLBACK").catch((_) => void 0);
  if (disableForeignKeys) {
    batch.step().run("PRAGMA foreign_keys=on");
  }
  await batch.execute();
  const resultSets = [];
  await beginPromise;
  for (const stmtPromise of stmtPromises) {
    const hranaRows = await stmtPromise;
    if (hranaRows === void 0) {
      throw new LibsqlError("Statement in a batch was not executed, probably because the transaction has been rolled back", "TRANSACTION_CLOSED");
    }
    resultSets.push(resultSetFromHrana(hranaRows));
  }
  await commitPromise;
  return resultSets;
}
function stmtToHrana(stmt) {
  if (typeof stmt === "string") {
    return new Stmt(stmt);
  }
  const hranaStmt = new Stmt(stmt.sql);
  if (Array.isArray(stmt.args)) {
    hranaStmt.bindIndexes(stmt.args);
  } else {
    for (const [key, value] of Object.entries(stmt.args)) {
      hranaStmt.bindName(key, value);
    }
  }
  return hranaStmt;
}
function resultSetFromHrana(hranaRows) {
  const columns = hranaRows.columnNames.map((c) => c ?? "");
  const columnTypes = hranaRows.columnDecltypes.map((c) => c ?? "");
  const rows = hranaRows.rows;
  const rowsAffected = hranaRows.affectedRowCount;
  const lastInsertRowid = hranaRows.lastInsertRowid !== void 0 ? hranaRows.lastInsertRowid : void 0;
  return new ResultSetImpl(columns, columnTypes, rows, rowsAffected, lastInsertRowid);
}
function mapHranaError(e) {
  if (e instanceof ClientError) {
    const code = mapHranaErrorCode(e);
    return new LibsqlError(e.message, code, void 0, e);
  }
  return e;
}
function mapHranaErrorCode(e) {
  if (e instanceof ResponseError && e.code !== void 0) {
    return e.code;
  } else if (e instanceof ProtoError) {
    return "HRANA_PROTO_ERROR";
  } else if (e instanceof ClosedError) {
    return e.cause instanceof ClientError ? mapHranaErrorCode(e.cause) : "HRANA_CLOSED_ERROR";
  } else if (e instanceof WebSocketError) {
    return "HRANA_WEBSOCKET_ERROR";
  } else if (e instanceof HttpServerError) {
    return "SERVER_ERROR";
  } else if (e instanceof ProtocolVersionError) {
    return "PROTOCOL_VERSION_ERROR";
  } else if (e instanceof InternalError) {
    return "INTERNAL_ERROR";
  } else {
    return "UNKNOWN";
  }
}

// node_modules/.pnpm/@libsql+client@0.10.0/node_modules/@libsql/client/lib-esm/sql_cache.js
var SqlCache = class {
  #owner;
  #sqls;
  capacity;
  constructor(owner, capacity) {
    this.#owner = owner;
    this.#sqls = new Lru();
    this.capacity = capacity;
  }
  // Replaces SQL strings with cached `hrana.Sql` objects in the statements in `hranaStmts`. After this
  // function returns, we guarantee that all `hranaStmts` refer to valid (not closed) `hrana.Sql` objects,
  // but _we may invalidate any other `hrana.Sql` objects_ (by closing them, thus removing them from the
  // server).
  //
  // In practice, this means that after calling this function, you can use the statements only up to the
  // first `await`, because concurrent code may also use the cache and invalidate those statements.
  apply(hranaStmts) {
    if (this.capacity <= 0) {
      return;
    }
    const usedSqlObjs = /* @__PURE__ */ new Set();
    for (const hranaStmt of hranaStmts) {
      if (typeof hranaStmt.sql !== "string") {
        continue;
      }
      const sqlText = hranaStmt.sql;
      if (sqlText.length >= 5e3) {
        continue;
      }
      let sqlObj = this.#sqls.get(sqlText);
      if (sqlObj === void 0) {
        while (this.#sqls.size + 1 > this.capacity) {
          const [evictSqlText, evictSqlObj] = this.#sqls.peekLru();
          if (usedSqlObjs.has(evictSqlObj)) {
            break;
          }
          evictSqlObj.close();
          this.#sqls.delete(evictSqlText);
        }
        if (this.#sqls.size + 1 <= this.capacity) {
          sqlObj = this.#owner.storeSql(sqlText);
          this.#sqls.set(sqlText, sqlObj);
        }
      }
      if (sqlObj !== void 0) {
        hranaStmt.sql = sqlObj;
        usedSqlObjs.add(sqlObj);
      }
    }
  }
};
var Lru = class {
  // This maps keys to the cache values. The entries are ordered by their last use (entires that were used
  // most recently are at the end).
  #cache;
  constructor() {
    this.#cache = /* @__PURE__ */ new Map();
  }
  get(key) {
    const value = this.#cache.get(key);
    if (value !== void 0) {
      this.#cache.delete(key);
      this.#cache.set(key, value);
    }
    return value;
  }
  set(key, value) {
    this.#cache.set(key, value);
  }
  peekLru() {
    for (const entry of this.#cache.entries()) {
      return entry;
    }
    return void 0;
  }
  delete(key) {
    this.#cache.delete(key);
  }
  get size() {
    return this.#cache.size;
  }
};

// node_modules/.pnpm/@libsql+client@0.10.0/node_modules/@libsql/client/lib-esm/ws.js
var import_promise_limit = __toESM(require_promise_limit(), 1);
function _createClient(config) {
  if (config.scheme !== "wss" && config.scheme !== "ws") {
    throw new LibsqlError(`The WebSocket client supports only "libsql:", "wss:" and "ws:" URLs, got ${JSON.stringify(config.scheme + ":")}. For more information, please read ${supportedUrlLink}`, "URL_SCHEME_NOT_SUPPORTED");
  }
  if (config.encryptionKey !== void 0) {
    throw new LibsqlError("Encryption key is not supported by the remote client.", "ENCRYPTION_KEY_NOT_SUPPORTED");
  }
  if (config.scheme === "ws" && config.tls) {
    throw new LibsqlError(`A "ws:" URL cannot opt into TLS by using ?tls=1`, "URL_INVALID");
  } else if (config.scheme === "wss" && !config.tls) {
    throw new LibsqlError(`A "wss:" URL cannot opt out of TLS by using ?tls=0`, "URL_INVALID");
  }
  const url = encodeBaseUrl(config.scheme, config.authority, config.path);
  let client;
  try {
    client = openWs(url, config.authToken);
  } catch (e) {
    if (e instanceof WebSocketUnsupportedError) {
      const suggestedScheme = config.scheme === "wss" ? "https" : "http";
      const suggestedUrl = encodeBaseUrl(suggestedScheme, config.authority, config.path);
      throw new LibsqlError(`This environment does not support WebSockets, please switch to the HTTP client by using a "${suggestedScheme}:" URL (${JSON.stringify(suggestedUrl)}). For more information, please read ${supportedUrlLink}`, "WEBSOCKETS_NOT_SUPPORTED");
    }
    throw mapHranaError(e);
  }
  return new WsClient2(client, url, config.authToken, config.intMode, config.concurrency);
}
var maxConnAgeMillis = 60 * 1e3;
var sqlCacheCapacity = 100;
var WsClient2 = class {
  #url;
  #authToken;
  #intMode;
  // State of the current connection. The `hrana.WsClient` inside may be closed at any moment due to an
  // asynchronous error.
  #connState;
  // If defined, this is a connection that will be used in the future, once it is ready.
  #futureConnState;
  closed;
  protocol;
  #isSchemaDatabase;
  #promiseLimitFunction;
  /** @private */
  constructor(client, url, authToken, intMode, concurrency) {
    this.#url = url;
    this.#authToken = authToken;
    this.#intMode = intMode;
    this.#connState = this.#openConn(client);
    this.#futureConnState = void 0;
    this.closed = false;
    this.protocol = "ws";
    this.#promiseLimitFunction = (0, import_promise_limit.default)(concurrency);
  }
  async limit(fn) {
    return this.#promiseLimitFunction(fn);
  }
  async execute(stmtOrSql, args) {
    let stmt;
    if (typeof stmtOrSql === "string") {
      stmt = {
        sql: stmtOrSql,
        args: args || []
      };
    } else {
      stmt = stmtOrSql;
    }
    return this.limit(async () => {
      const streamState = await this.#openStream();
      try {
        const hranaStmt = stmtToHrana(stmt);
        streamState.conn.sqlCache.apply([hranaStmt]);
        const hranaRowsPromise = streamState.stream.query(hranaStmt);
        streamState.stream.closeGracefully();
        const hranaRowsResult = await hranaRowsPromise;
        return resultSetFromHrana(hranaRowsResult);
      } catch (e) {
        throw mapHranaError(e);
      } finally {
        this._closeStream(streamState);
      }
    });
  }
  async batch(stmts, mode = "deferred") {
    return this.limit(async () => {
      const streamState = await this.#openStream();
      try {
        const hranaStmts = stmts.map(stmtToHrana);
        const version2 = await streamState.conn.client.getVersion();
        streamState.conn.sqlCache.apply(hranaStmts);
        const batch = streamState.stream.batch(version2 >= 3);
        const resultsPromise = executeHranaBatch(mode, version2, batch, hranaStmts);
        const results = await resultsPromise;
        return results;
      } catch (e) {
        throw mapHranaError(e);
      } finally {
        this._closeStream(streamState);
      }
    });
  }
  async migrate(stmts) {
    return this.limit(async () => {
      const streamState = await this.#openStream();
      try {
        const hranaStmts = stmts.map(stmtToHrana);
        const version2 = await streamState.conn.client.getVersion();
        const batch = streamState.stream.batch(version2 >= 3);
        const resultsPromise = executeHranaBatch("deferred", version2, batch, hranaStmts, true);
        const results = await resultsPromise;
        return results;
      } catch (e) {
        throw mapHranaError(e);
      } finally {
        this._closeStream(streamState);
      }
    });
  }
  async transaction(mode = "write") {
    return this.limit(async () => {
      const streamState = await this.#openStream();
      try {
        const version2 = await streamState.conn.client.getVersion();
        return new WsTransaction(this, streamState, mode, version2);
      } catch (e) {
        this._closeStream(streamState);
        throw mapHranaError(e);
      }
    });
  }
  async executeMultiple(sql) {
    return this.limit(async () => {
      const streamState = await this.#openStream();
      try {
        const promise = streamState.stream.sequence(sql);
        streamState.stream.closeGracefully();
        await promise;
      } catch (e) {
        throw mapHranaError(e);
      } finally {
        this._closeStream(streamState);
      }
    });
  }
  sync() {
    throw new LibsqlError("sync not supported in ws mode", "SYNC_NOT_SUPPORTED");
  }
  async #openStream() {
    if (this.closed) {
      throw new LibsqlError("The client is closed", "CLIENT_CLOSED");
    }
    const now = new Date();
    const ageMillis = now.valueOf() - this.#connState.openTime.valueOf();
    if (ageMillis > maxConnAgeMillis && this.#futureConnState === void 0) {
      const futureConnState = this.#openConn();
      this.#futureConnState = futureConnState;
      futureConnState.client.getVersion().then((_version) => {
        if (this.#connState !== futureConnState) {
          if (this.#connState.streamStates.size === 0) {
            this.#connState.client.close();
          } else {
          }
        }
        this.#connState = futureConnState;
        this.#futureConnState = void 0;
      }, (_e) => {
        this.#futureConnState = void 0;
      });
    }
    if (this.#connState.client.closed) {
      try {
        if (this.#futureConnState !== void 0) {
          this.#connState = this.#futureConnState;
        } else {
          this.#connState = this.#openConn();
        }
      } catch (e) {
        throw mapHranaError(e);
      }
    }
    const connState = this.#connState;
    try {
      if (connState.useSqlCache === void 0) {
        connState.useSqlCache = await connState.client.getVersion() >= 2;
        if (connState.useSqlCache) {
          connState.sqlCache.capacity = sqlCacheCapacity;
        }
      }
      const stream = connState.client.openStream();
      stream.intMode = this.#intMode;
      const streamState = { conn: connState, stream };
      connState.streamStates.add(streamState);
      return streamState;
    } catch (e) {
      throw mapHranaError(e);
    }
  }
  #openConn(client) {
    try {
      client ??= openWs(this.#url, this.#authToken);
      return {
        client,
        useSqlCache: void 0,
        sqlCache: new SqlCache(client, 0),
        openTime: new Date(),
        streamStates: /* @__PURE__ */ new Set()
      };
    } catch (e) {
      throw mapHranaError(e);
    }
  }
  _closeStream(streamState) {
    streamState.stream.close();
    const connState = streamState.conn;
    connState.streamStates.delete(streamState);
    if (connState.streamStates.size === 0 && connState !== this.#connState) {
      connState.client.close();
    }
  }
  close() {
    this.#connState.client.close();
    this.closed = true;
  }
};
var WsTransaction = class extends HranaTransaction {
  #client;
  #streamState;
  /** @private */
  constructor(client, state, mode, version2) {
    super(mode, version2);
    this.#client = client;
    this.#streamState = state;
  }
  /** @private */
  _getStream() {
    return this.#streamState.stream;
  }
  /** @private */
  _getSqlCache() {
    return this.#streamState.conn.sqlCache;
  }
  close() {
    this.#client._closeStream(this.#streamState);
  }
  get closed() {
    return this.#streamState.stream.closed;
  }
};

// node_modules/.pnpm/@libsql+client@0.10.0/node_modules/@libsql/client/lib-esm/http.js
var import_promise_limit2 = __toESM(require_promise_limit(), 1);
function _createClient2(config) {
  if (config.scheme !== "https" && config.scheme !== "http") {
    throw new LibsqlError(`The HTTP client supports only "libsql:", "https:" and "http:" URLs, got ${JSON.stringify(config.scheme + ":")}. For more information, please read ${supportedUrlLink}`, "URL_SCHEME_NOT_SUPPORTED");
  }
  if (config.encryptionKey !== void 0) {
    throw new LibsqlError("Encryption key is not supported by the remote client.", "ENCRYPTION_KEY_NOT_SUPPORTED");
  }
  if (config.scheme === "http" && config.tls) {
    throw new LibsqlError(`A "http:" URL cannot opt into TLS by using ?tls=1`, "URL_INVALID");
  } else if (config.scheme === "https" && !config.tls) {
    throw new LibsqlError(`A "https:" URL cannot opt out of TLS by using ?tls=0`, "URL_INVALID");
  }
  const url = encodeBaseUrl(config.scheme, config.authority, config.path);
  return new HttpClient2(url, config.authToken, config.intMode, config.fetch, config.concurrency);
}
var sqlCacheCapacity2 = 30;
var HttpClient2 = class {
  #client;
  protocol;
  #authToken;
  #promiseLimitFunction;
  /** @private */
  constructor(url, authToken, intMode, customFetch, concurrency) {
    this.#client = openHttp(url, authToken, customFetch);
    this.#client.intMode = intMode;
    this.protocol = "http";
    this.#authToken = authToken;
    this.#promiseLimitFunction = (0, import_promise_limit2.default)(concurrency);
  }
  async limit(fn) {
    return this.#promiseLimitFunction(fn);
  }
  async execute(stmtOrSql, args) {
    let stmt;
    if (typeof stmtOrSql === "string") {
      stmt = {
        sql: stmtOrSql,
        args: args || []
      };
    } else {
      stmt = stmtOrSql;
    }
    return this.limit(async () => {
      try {
        const hranaStmt = stmtToHrana(stmt);
        let rowsPromise;
        const stream = this.#client.openStream();
        try {
          rowsPromise = stream.query(hranaStmt);
        } finally {
          stream.closeGracefully();
        }
        const rowsResult = await rowsPromise;
        return resultSetFromHrana(rowsResult);
      } catch (e) {
        throw mapHranaError(e);
      }
    });
  }
  async batch(stmts, mode = "deferred") {
    return this.limit(async () => {
      try {
        const hranaStmts = stmts.map(stmtToHrana);
        const version2 = await this.#client.getVersion();
        let resultsPromise;
        const stream = this.#client.openStream();
        try {
          const sqlCache = new SqlCache(stream, sqlCacheCapacity2);
          sqlCache.apply(hranaStmts);
          const batch = stream.batch(false);
          resultsPromise = executeHranaBatch(mode, version2, batch, hranaStmts);
        } finally {
          stream.closeGracefully();
        }
        const results = await resultsPromise;
        return results;
      } catch (e) {
        throw mapHranaError(e);
      }
    });
  }
  async migrate(stmts) {
    return this.limit(async () => {
      try {
        const hranaStmts = stmts.map(stmtToHrana);
        const version2 = await this.#client.getVersion();
        let resultsPromise;
        const stream = this.#client.openStream();
        try {
          const batch = stream.batch(false);
          resultsPromise = executeHranaBatch("deferred", version2, batch, hranaStmts, true);
        } finally {
          stream.closeGracefully();
        }
        const results = await resultsPromise;
        return results;
      } catch (e) {
        throw mapHranaError(e);
      }
    });
  }
  async transaction(mode = "write") {
    return this.limit(async () => {
      try {
        const version2 = await this.#client.getVersion();
        return new HttpTransaction(this.#client.openStream(), mode, version2);
      } catch (e) {
        throw mapHranaError(e);
      }
    });
  }
  async executeMultiple(sql) {
    return this.limit(async () => {
      try {
        let promise;
        const stream = this.#client.openStream();
        try {
          promise = stream.sequence(sql);
        } finally {
          stream.closeGracefully();
        }
        await promise;
      } catch (e) {
        throw mapHranaError(e);
      }
    });
  }
  sync() {
    throw new LibsqlError("sync not supported in http mode", "SYNC_NOT_SUPPORTED");
  }
  close() {
    this.#client.close();
  }
  get closed() {
    return this.#client.closed;
  }
};
var HttpTransaction = class extends HranaTransaction {
  #stream;
  #sqlCache;
  /** @private */
  constructor(stream, mode, version2) {
    super(mode, version2);
    this.#stream = stream;
    this.#sqlCache = new SqlCache(stream, sqlCacheCapacity2);
  }
  /** @private */
  _getStream() {
    return this.#stream;
  }
  /** @private */
  _getSqlCache() {
    return this.#sqlCache;
  }
  close() {
    this.#stream.close();
  }
  get closed() {
    return this.#stream.closed;
  }
};

// node_modules/.pnpm/@libsql+client@0.10.0/node_modules/@libsql/client/lib-esm/web.js
function createClient(config) {
  return _createClient3(expandConfig(config, true));
}
function _createClient3(config) {
  if (config.scheme === "ws" || config.scheme === "wss") {
    return _createClient(config);
  } else if (config.scheme === "http" || config.scheme === "https") {
    return _createClient2(config);
  } else {
    throw new LibsqlError(`The client that uses Web standard APIs supports only "libsql:", "wss:", "ws:", "https:" and "http:" URLs, got ${JSON.stringify(config.scheme + ":")}. For more information, please read ${supportedUrlLink}`, "URL_SCHEME_NOT_SUPPORTED");
  }
}

// src/database.ts
var path = __toESM(require("path"));
var DatabaseManager = class {
  constructor(configDir, localDbName, remoteDbUrl, authToken, syncInterval = 60) {
    this.configDir = configDir;
    this.localDbName = localDbName;
    this.remoteDbUrl = remoteDbUrl;
    this.authToken = authToken;
    this.syncInterval = syncInterval;
  }
  client;
  async initialize() {
    const localDbPath = path.join(this.configDir, this.localDbName);
    this.client = createClient({
      url: this.remoteDbUrl,
      // url: `file:${localDbPath}`,
      // syncUrl: this.remoteDbUrl,
      authToken: this.authToken
      // syncInterval: this.syncInterval
    });
    await this.client.execute(`
            CREATE TABLE IF NOT EXISTS notes (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                title TEXT,
                content TEXT,
                created_at INTEGER,
                updated_at INTEGER
            )
        `);
  }
  async addNote(title, content) {
    const now = Date.now();
    const result = await this.client.execute({
      sql: "INSERT INTO notes (title, content, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id",
      args: [title, content, now, now]
    });
    return result.rows[0].id;
  }
  async getNote(id) {
    const result = await this.client.execute({
      sql: "SELECT * FROM notes WHERE id = ?",
      args: [id]
    });
    return result.rows[0];
  }
  async getAllNotes() {
    const result = await this.client.execute("SELECT * FROM notes");
    console.log("::RESULT", result);
    return result.rows;
  }
  async updateNote(id, title, content) {
    const now = Date.now();
    await this.client.execute({
      sql: "UPDATE notes SET title = ?, content = ?, updated_at = ? WHERE id = ?",
      args: [title, content, now, id]
    });
  }
  async deleteNote(id) {
    await this.client.execute({
      sql: "DELETE FROM notes WHERE id = ?",
      args: [id]
    });
  }
  async sync() {
    await this.client.sync();
  }
  close() {
  }
};

// src/main.ts
var SYNC_ICON = `<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>`;
var SQLitePlugin = class extends import_obsidian2.Plugin {
  settings;
  db;
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SQLitePluginSettingTab(this.app, this));
    this.db = new DatabaseManager(
      this.app.vault.configDir,
      this.settings.localDBPath,
      this.settings.remoteDBUrl,
      this.settings.remoteDBSecret,
      60
      // sync every 60 seconds
    );
    await this.db.initialize();
    (0, import_obsidian2.addIcon)("sync-database", SYNC_ICON);
    this.addRibbonIcon("sync-database", "Sync Database", async (evt) => {
      await this.syncDatabase();
    });
    this.addCommand({
      id: "add-note",
      name: "Add Note",
      callback: () => this.db.addNote("New Note", "This is a new note.")
    });
    this.addCommand({
      id: "get-all-notes",
      name: "Get All Notes",
      callback: () => this.db.getAllNotes()
    });
  }
  onunload() {
    this.db.close();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async syncDatabase() {
    try {
      await this.db.sync();
      new import_obsidian2.Notice("Database synced successfully");
    } catch (error) {
      console.error("Sync failed:", error);
      new import_obsidian2.Notice("Sync failed. Check console for details.");
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzLy5wbnBtL3Byb21pc2UtbGltaXRAMi43LjAvbm9kZV9tb2R1bGVzL3Byb21pc2UtbGltaXQvaW5kZXguanMiLCAic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2NvcmVAMC4xMC4wL25vZGVfbW9kdWxlcy9AbGlic3FsL2NvcmUvbGliLWVzbS9hcGkuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwrY29yZUAwLjEwLjAvbm9kZV9tb2R1bGVzL0BsaWJzcWwvY29yZS9saWItZXNtL3VyaS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vanMtYmFzZTY0QDMuNy43L25vZGVfbW9kdWxlcy9qcy1iYXNlNjQvYmFzZTY0Lm1qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtjb3JlQDAuMTAuMC9ub2RlX21vZHVsZXMvQGxpYnNxbC9jb3JlL2xpYi1lc20vdXRpbC5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtjb3JlQDAuMTAuMC9ub2RlX21vZHVsZXMvQGxpYnNxbC9jb3JlL2xpYi1lc20vY29uZmlnLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2lzb21vcnBoaWMtd3NAMC4xLjUvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaXNvbW9ycGhpYy13cy93ZWIubWpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9jbGllbnQuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL2Vycm9ycy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vZW5jb2RpbmcvanNvbi9kZWNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL2VuY29kaW5nL2pzb24vZW5jb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9lbmNvZGluZy9wcm90b2J1Zi91dGlsLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9lbmNvZGluZy9wcm90b2J1Zi9kZWNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL2VuY29kaW5nL3Byb3RvYnVmL2VuY29kZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vaWRfYWxsb2MuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3V0aWwuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3ZhbHVlLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9yZXN1bHQuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3NxbC5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vcXVldWUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3N0bXQuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL2JhdGNoLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9kZXNjcmliZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vc3RyZWFtLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9jdXJzb3IuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3dzL2N1cnNvci5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vd3Mvc3RyZWFtLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9zaGFyZWQvanNvbl9lbmNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3dzL2pzb25fZW5jb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9zaGFyZWQvcHJvdG9idWZfZW5jb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS93cy9wcm90b2J1Zl9lbmNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3NoYXJlZC9qc29uX2RlY29kZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vd3MvanNvbl9kZWNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3NoYXJlZC9wcm90b2J1Zl9kZWNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3dzL3Byb3RvYnVmX2RlY29kZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vd3MvY2xpZW50LmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2lzb21vcnBoaWMtZmV0Y2hAMC4yLjUvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaXNvbW9ycGhpYy1mZXRjaC93ZWIuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL3F1ZXVlX21pY3JvdGFzay5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vYnl0ZV9xdWV1ZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vaHR0cC9qc29uX2RlY29kZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vaHR0cC9wcm90b2J1Zl9kZWNvZGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL2h0dHAvY3Vyc29yLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9odHRwL2pzb25fZW5jb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9odHRwL3Byb3RvYnVmX2VuY29kZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtocmFuYS1jbGllbnRAMC42LjIvbm9kZV9tb2R1bGVzL0BsaWJzcWwvaHJhbmEtY2xpZW50L2xpYi1lc20vaHR0cC9zdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwraHJhbmEtY2xpZW50QDAuNi4yL25vZGVfbW9kdWxlcy9AbGlic3FsL2hyYW5hLWNsaWVudC9saWItZXNtL2h0dHAvY2xpZW50LmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2hyYW5hLWNsaWVudEAwLjYuMi9ub2RlX21vZHVsZXMvQGxpYnNxbC9ocmFuYS1jbGllbnQvbGliLWVzbS9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vQGxpYnNxbCtjbGllbnRAMC4xMC4wL25vZGVfbW9kdWxlcy9AbGlic3FsL2NsaWVudC9saWItZXNtL2hyYW5hLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2NsaWVudEAwLjEwLjAvbm9kZV9tb2R1bGVzL0BsaWJzcWwvY2xpZW50L2xpYi1lc20vc3FsX2NhY2hlLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2NsaWVudEAwLjEwLjAvbm9kZV9tb2R1bGVzL0BsaWJzcWwvY2xpZW50L2xpYi1lc20vd3MuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL0BsaWJzcWwrY2xpZW50QDAuMTAuMC9ub2RlX21vZHVsZXMvQGxpYnNxbC9jbGllbnQvbGliLWVzbS9odHRwLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9AbGlic3FsK2NsaWVudEAwLjEwLjAvbm9kZV9tb2R1bGVzL0BsaWJzcWwvY2xpZW50L2xpYi1lc20vd2ViLmpzIiwgInNyYy9kYXRhYmFzZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZnVuY3Rpb24gbGltaXRlciAoY291bnQpIHtcbiAgdmFyIG91dHN0YW5kaW5nID0gMFxuICB2YXIgam9icyA9IFtdXG5cbiAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICBvdXRzdGFuZGluZy0tXG5cbiAgICBpZiAob3V0c3RhbmRpbmcgPCBjb3VudCkge1xuICAgICAgZGVxdWV1ZSgpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVxdWV1ZSAoKSB7XG4gICAgdmFyIGpvYiA9IGpvYnMuc2hpZnQoKVxuICAgIHNlbWFwaG9yZS5xdWV1ZSA9IGpvYnMubGVuZ3RoXG5cbiAgICBpZiAoam9iKSB7XG4gICAgICBydW4oam9iLmZuKS50aGVuKGpvYi5yZXNvbHZlKS5jYXRjaChqb2IucmVqZWN0KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHF1ZXVlIChmbikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBqb2JzLnB1c2goe2ZuOiBmbiwgcmVzb2x2ZTogcmVzb2x2ZSwgcmVqZWN0OiByZWplY3R9KVxuICAgICAgc2VtYXBob3JlLnF1ZXVlID0gam9icy5sZW5ndGhcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcnVuIChmbikge1xuICAgIG91dHN0YW5kaW5nKytcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmbigpKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmVtb3ZlKClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHJlbW92ZSgpXG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmVtb3ZlKClcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpXG4gICAgfVxuICB9XG5cbiAgdmFyIHNlbWFwaG9yZSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmIChvdXRzdGFuZGluZyA+PSBjb3VudCkge1xuICAgICAgcmV0dXJuIHF1ZXVlKGZuKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcnVuKGZuKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzZW1hcGhvcmVcbn1cblxuZnVuY3Rpb24gbWFwIChpdGVtcywgbWFwcGVyKSB7XG4gIHZhciBmYWlsZWQgPSBmYWxzZVxuXG4gIHZhciBsaW1pdCA9IHRoaXNcblxuICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMubWFwKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50c1xuICAgIHJldHVybiBsaW1pdChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWZhaWxlZCkge1xuICAgICAgICByZXR1cm4gbWFwcGVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncykuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBmYWlsZWQgPSB0cnVlXG4gICAgICAgICAgdGhyb3cgZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH0pKVxufVxuXG5mdW5jdGlvbiBhZGRFeHRyYXMgKGZuKSB7XG4gIGZuLnF1ZXVlID0gMFxuICBmbi5tYXAgPSBtYXBcbiAgcmV0dXJuIGZuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gIGlmIChjb3VudCkge1xuICAgIHJldHVybiBhZGRFeHRyYXMobGltaXRlcihjb3VudCkpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFkZEV4dHJhcyhmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiBmbigpXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBhZGRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU1FMaXRlUGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIFNRTGl0ZVBsdWdpblNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IERhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4vZGF0YWJhc2UnO1xuXG5jb25zdCBTWU5DX0lDT04gPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJmZWF0aGVyIGZlYXRoZXItcmVmcmVzaC1jd1wiPjxwb2x5bGluZSBwb2ludHM9XCIyMyA0IDIzIDEwIDE3IDEwXCI+PC9wb2x5bGluZT48cG9seWxpbmUgcG9pbnRzPVwiMSAyMCAxIDE0IDcgMTRcIj48L3BvbHlsaW5lPjxwYXRoIGQ9XCJNMy41MSA5YTkgOSAwIDAgMSAxNC44NS0zLjM2TDIzIDEwTTEgMTRsNC42NCA0LjM2QTkgOSAwIDAgMCAyMC40OSAxNVwiPjwvcGF0aD48L3N2Zz5gO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTUUxpdGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBTUUxpdGVQbHVnaW5TZXR0aW5ncztcbiAgICBkYjogRGF0YWJhc2VNYW5hZ2VyO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNRTGl0ZVBsdWdpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgdGhpcy5kYiA9IG5ldyBEYXRhYmFzZU1hbmFnZXIoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5jb25maWdEaXIsXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmxvY2FsREJQYXRoLFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yZW1vdGVEQlVybCxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmVtb3RlREJTZWNyZXQsXG4gICAgICAgICAgICA2MCAvLyBzeW5jIGV2ZXJ5IDYwIHNlY29uZHNcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYi5pbml0aWFsaXplKCk7XG5cbiAgICAgICAgYWRkSWNvbignc3luYy1kYXRhYmFzZScsIFNZTkNfSUNPTik7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdzeW5jLWRhdGFiYXNlJywgJ1N5bmMgRGF0YWJhc2UnLCBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNEYXRhYmFzZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdhZGQtbm90ZScsXG4gICAgICAgICAgICBuYW1lOiAnQWRkIE5vdGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZGIuYWRkTm90ZSgnTmV3IE5vdGUnLCAnVGhpcyBpcyBhIG5ldyBub3RlLicpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2dldC1hbGwtbm90ZXMnLFxuICAgICAgICAgICAgbmFtZTogJ0dldCBBbGwgTm90ZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZGIuZ2V0QWxsTm90ZXMoKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgdGhpcy5kYi5jbG9zZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHN5bmNEYXRhYmFzZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGIuc3luYygpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRGF0YWJhc2Ugc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU3luYyBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnU3luYyBmYWlsZWQuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBTUUxpdGVQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBTUUxpdGVQbHVnaW5TZXR0aW5ncyB7XG4gICAgbG9jYWxEQlBhdGg6IHN0cmluZztcbiAgICByZW1vdGVEQlVybDogc3RyaW5nO1xuICAgIHJlbW90ZURCU2VjcmV0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBTUUxpdGVQbHVnaW5TZXR0aW5ncyA9IHtcbiAgICBsb2NhbERCUGF0aDogJy5vYnNpZGlhbi1zcWwtbGl0ZS5kYicsXG4gICAgcmVtb3RlREJVcmw6ICcnLFxuICAgIHJlbW90ZURCU2VjcmV0OiAnJ1xufVxuXG5leHBvcnQgY2xhc3MgU1FMaXRlUGx1Z2luU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogU1FMaXRlUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU1FMaXRlUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEQiBVUkwnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBUdXJzbyBEQiB1cmwnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHVybCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW90ZURCVXJsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3RlREJVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEQiBTZWNyZXQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBUdXJzbyBEQiBzZWNyZXQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHNlY3JldCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW90ZURCU2VjcmV0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3RlREJTZWNyZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RhdGFiYXNlIGZpbGUgbmFtZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIG5hbWUgb2YgdGhlIFNRTGl0ZSBkYXRhYmFzZSBmaWxlIChzdG9yZWQgaW4gLm9ic2lkaWFuIGZvbGRlciknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciBmaWxlIG5hbWUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2NhbERCUGF0aClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxvY2FsREJQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59IiwgIi8qKiBFcnJvciB0aHJvd24gYnkgdGhlIGNsaWVudC4gKi9cbmV4cG9ydCBjbGFzcyBMaWJzcWxFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKiogTWFjaGluZS1yZWFkYWJsZSBlcnJvciBjb2RlLiAqL1xuICAgIGNvZGU7XG4gICAgLyoqIFJhdyBudW1lcmljIGVycm9yIGNvZGUgKi9cbiAgICByYXdDb2RlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNvZGUsIHJhd0NvZGUsIGNhdXNlKSB7XG4gICAgICAgIGlmIChjb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHtjb2RlfTogJHttZXNzYWdlfWA7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobWVzc2FnZSwgeyBjYXVzZSB9KTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5yYXdDb2RlID0gcmF3Q29kZTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJMaWJzcWxFcnJvclwiO1xuICAgIH1cbn1cbiIsICIvLyBVUkkgcGFyc2VyIGJhc2VkIG9uIFJGQyAzOTg2XG4vLyBXZSBjYW4ndCB1c2UgdGhlIHN0YW5kYXJkIGBVUkxgIG9iamVjdCwgYmVjYXVzZSB3ZSB3YW50IHRvIHN1cHBvcnQgcmVsYXRpdmUgYGZpbGU6YCBVUkxzIGxpa2Vcbi8vIGBmaWxlOnJlbGF0aXZlL3BhdGgvZGF0YWJhc2UuZGJgLCB3aGljaCBhcmUgbm90IGNvcnJlY3QgYWNjb3JkaW5nIHRvIFJGQyA4MDg5LCB3aGljaCBzdGFuZGFyZGl6ZXMgdGhlXG4vLyBgZmlsZWAgc2NoZW1lLlxuaW1wb3J0IHsgTGlic3FsRXJyb3IgfSBmcm9tIFwiLi9hcGkuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVyaSh0ZXh0KSB7XG4gICAgY29uc3QgbWF0Y2ggPSBVUklfUkUuZXhlYyh0ZXh0KTtcbiAgICBpZiAobWF0Y2ggPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKGBUaGUgVVJMICcke3RleHR9JyBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXRgLCBcIlVSTF9JTlZBTElEXCIpO1xuICAgIH1cbiAgICBjb25zdCBncm91cHMgPSBtYXRjaC5ncm91cHM7XG4gICAgY29uc3Qgc2NoZW1lID0gZ3JvdXBzW1wic2NoZW1lXCJdO1xuICAgIGNvbnN0IGF1dGhvcml0eSA9IGdyb3Vwc1tcImF1dGhvcml0eVwiXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gcGFyc2VBdXRob3JpdHkoZ3JvdXBzW1wiYXV0aG9yaXR5XCJdKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwYXRoID0gcGVyY2VudERlY29kZShncm91cHNbXCJwYXRoXCJdKTtcbiAgICBjb25zdCBxdWVyeSA9IGdyb3Vwc1tcInF1ZXJ5XCJdICE9PSB1bmRlZmluZWQgPyBwYXJzZVF1ZXJ5KGdyb3Vwc1tcInF1ZXJ5XCJdKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBmcmFnbWVudCA9IGdyb3Vwc1tcImZyYWdtZW50XCJdICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBwZXJjZW50RGVjb2RlKGdyb3Vwc1tcImZyYWdtZW50XCJdKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4geyBzY2hlbWUsIGF1dGhvcml0eSwgcGF0aCwgcXVlcnksIGZyYWdtZW50IH07XG59XG5jb25zdCBVUklfUkUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IFNDSEVNRSA9IFwiKD88c2NoZW1lPltBLVphLXpdW0EtWmEtei4rLV0qKVwiO1xuICAgIGNvbnN0IEFVVEhPUklUWSA9IFwiKD88YXV0aG9yaXR5PlteLz8jXSopXCI7XG4gICAgY29uc3QgUEFUSCA9IFwiKD88cGF0aD5bXj8jXSopXCI7XG4gICAgY29uc3QgUVVFUlkgPSBcIig/PHF1ZXJ5PlteI10qKVwiO1xuICAgIGNvbnN0IEZSQUdNRU5UID0gXCIoPzxmcmFnbWVudD4uKilcIjtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7U0NIRU1FfTooLy8ke0FVVEhPUklUWX0pPyR7UEFUSH0oXFxcXD8ke1FVRVJZfSk/KCMke0ZSQUdNRU5UfSk/JGAsIFwic3VcIik7XG59KSgpO1xuZnVuY3Rpb24gcGFyc2VBdXRob3JpdHkodGV4dCkge1xuICAgIGNvbnN0IG1hdGNoID0gQVVUSE9SSVRZX1JFLmV4ZWModGV4dCk7XG4gICAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihcIlRoZSBhdXRob3JpdHkgcGFydCBvZiB0aGUgVVJMIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdFwiLCBcIlVSTF9JTlZBTElEXCIpO1xuICAgIH1cbiAgICBjb25zdCBncm91cHMgPSBtYXRjaC5ncm91cHM7XG4gICAgY29uc3QgaG9zdCA9IHBlcmNlbnREZWNvZGUoZ3JvdXBzW1wiaG9zdF9iclwiXSA/PyBncm91cHNbXCJob3N0XCJdKTtcbiAgICBjb25zdCBwb3J0ID0gZ3JvdXBzW1wicG9ydFwiXSA/IHBhcnNlSW50KGdyb3Vwc1tcInBvcnRcIl0sIDEwKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCB1c2VyaW5mbyA9IGdyb3Vwc1tcInVzZXJuYW1lXCJdICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB1c2VybmFtZTogcGVyY2VudERlY29kZShncm91cHNbXCJ1c2VybmFtZVwiXSksXG4gICAgICAgICAgICBwYXNzd29yZDogZ3JvdXBzW1wicGFzc3dvcmRcIl0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gcGVyY2VudERlY29kZShncm91cHNbXCJwYXNzd29yZFwiXSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4geyBob3N0LCBwb3J0LCB1c2VyaW5mbyB9O1xufVxuY29uc3QgQVVUSE9SSVRZX1JFID0gKCgpID0+IHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXigoPzx1c2VybmFtZT5bXjpdKikoOig/PHBhc3N3b3JkPi4qKSk/QCk/KCg/PGhvc3Q+W146XFxcXFtcXFxcXV0qKXwoXFxcXFsoPzxob3N0X2JyPlteXFxcXFtcXFxcXV0qKVxcXFxdKSkoOig/PHBvcnQ+WzAtOV0qKSk/JGAsIFwic3VcIik7XG59KSgpO1xuLy8gUXVlcnkgc3RyaW5nIGlzIHBhcnNlZCBhcyBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQgYWNjb3JkaW5nIHRvIHRoZSBXZWIgVVJMIHN0YW5kYXJkOlxuLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmdcbmZ1bmN0aW9uIHBhcnNlUXVlcnkodGV4dCkge1xuICAgIGNvbnN0IHNlcXVlbmNlcyA9IHRleHQuc3BsaXQoXCImXCIpO1xuICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgZm9yIChjb25zdCBzZXF1ZW5jZSBvZiBzZXF1ZW5jZXMpIHtcbiAgICAgICAgaWYgKHNlcXVlbmNlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQga2V5O1xuICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgIGNvbnN0IHNwbGl0SWR4ID0gc2VxdWVuY2UuaW5kZXhPZihcIj1cIik7XG4gICAgICAgIGlmIChzcGxpdElkeCA8IDApIHtcbiAgICAgICAgICAgIGtleSA9IHNlcXVlbmNlO1xuICAgICAgICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5ID0gc2VxdWVuY2Uuc3Vic3RyaW5nKDAsIHNwbGl0SWR4KTtcbiAgICAgICAgICAgIHZhbHVlID0gc2VxdWVuY2Uuc3Vic3RyaW5nKHNwbGl0SWR4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICBrZXk6IHBlcmNlbnREZWNvZGUoa2V5LnJlcGxhY2VBbGwoXCIrXCIsIFwiIFwiKSksXG4gICAgICAgICAgICB2YWx1ZTogcGVyY2VudERlY29kZSh2YWx1ZS5yZXBsYWNlQWxsKFwiK1wiLCBcIiBcIikpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcGFpcnMgfTtcbn1cbmZ1bmN0aW9uIHBlcmNlbnREZWNvZGUodGV4dCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodGV4dCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgVVJJRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihgVVJMIGNvbXBvbmVudCBoYXMgaW52YWxpZCBwZXJjZW50IGVuY29kaW5nOiAke2V9YCwgXCJVUkxfSU5WQUxJRFwiLCB1bmRlZmluZWQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZUJhc2VVcmwoc2NoZW1lLCBhdXRob3JpdHksIHBhdGgpIHtcbiAgICBpZiAoYXV0aG9yaXR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKGBVUkwgd2l0aCBzY2hlbWUgJHtKU09OLnN0cmluZ2lmeShzY2hlbWUgKyBcIjpcIil9IHJlcXVpcmVzIGF1dGhvcml0eSAodGhlIFwiLy9cIiBwYXJ0KWAsIFwiVVJMX0lOVkFMSURcIik7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtZVRleHQgPSBgJHtzY2hlbWV9OmA7XG4gICAgY29uc3QgaG9zdFRleHQgPSBlbmNvZGVIb3N0KGF1dGhvcml0eS5ob3N0KTtcbiAgICBjb25zdCBwb3J0VGV4dCA9IGVuY29kZVBvcnQoYXV0aG9yaXR5LnBvcnQpO1xuICAgIGNvbnN0IHVzZXJpbmZvVGV4dCA9IGVuY29kZVVzZXJpbmZvKGF1dGhvcml0eS51c2VyaW5mbyk7XG4gICAgY29uc3QgYXV0aG9yaXR5VGV4dCA9IGAvLyR7dXNlcmluZm9UZXh0fSR7aG9zdFRleHR9JHtwb3J0VGV4dH1gO1xuICAgIGxldCBwYXRoVGV4dCA9IHBhdGguc3BsaXQoXCIvXCIpLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oXCIvXCIpO1xuICAgIGlmIChwYXRoVGV4dCAhPT0gXCJcIiAmJiAhcGF0aFRleHQuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgcGF0aFRleHQgPSBcIi9cIiArIHBhdGhUZXh0O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVSTChgJHtzY2hlbWVUZXh0fSR7YXV0aG9yaXR5VGV4dH0ke3BhdGhUZXh0fWApO1xufVxuZnVuY3Rpb24gZW5jb2RlSG9zdChob3N0KSB7XG4gICAgcmV0dXJuIGhvc3QuaW5jbHVkZXMoXCI6XCIpID8gYFske2VuY29kZVVSSShob3N0KX1dYCA6IGVuY29kZVVSSShob3N0KTtcbn1cbmZ1bmN0aW9uIGVuY29kZVBvcnQocG9ydCkge1xuICAgIHJldHVybiBwb3J0ICE9PSB1bmRlZmluZWQgPyBgOiR7cG9ydH1gIDogXCJcIjtcbn1cbmZ1bmN0aW9uIGVuY29kZVVzZXJpbmZvKHVzZXJpbmZvKSB7XG4gICAgaWYgKHVzZXJpbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IHVzZXJuYW1lVGV4dCA9IGVuY29kZVVSSUNvbXBvbmVudCh1c2VyaW5mby51c2VybmFtZSk7XG4gICAgY29uc3QgcGFzc3dvcmRUZXh0ID0gdXNlcmluZm8ucGFzc3dvcmQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IGA6JHtlbmNvZGVVUklDb21wb25lbnQodXNlcmluZm8ucGFzc3dvcmQpfWBcbiAgICAgICAgOiBcIlwiO1xuICAgIHJldHVybiBgJHt1c2VybmFtZVRleHR9JHtwYXNzd29yZFRleHR9QGA7XG59XG4iLCAiLyoqXG4gKiAgYmFzZTY0LnRzXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1DbGF1c2UgTGljZW5zZS5cbiAqICAgIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9CU0QtMy1DbGF1c2VcbiAqXG4gKiAgUmVmZXJlbmNlczpcbiAqICAgIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0XG4gKlxuICogQGF1dGhvciBEYW4gS29nYWkgKGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5rb2dhaSlcbiAqL1xuY29uc3QgdmVyc2lvbiA9ICczLjcuNyc7XG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZSBsb3dlcmNhc2UgYHZlcnNpb25gLlxuICovXG5jb25zdCBWRVJTSU9OID0gdmVyc2lvbjtcbmNvbnN0IF9oYXNCdWZmZXIgPSB0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nO1xuY29uc3QgX1REID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAnZnVuY3Rpb24nID8gbmV3IFRleHREZWNvZGVyKCkgOiB1bmRlZmluZWQ7XG5jb25zdCBfVEUgPSB0eXBlb2YgVGV4dEVuY29kZXIgPT09ICdmdW5jdGlvbicgPyBuZXcgVGV4dEVuY29kZXIoKSA6IHVuZGVmaW5lZDtcbmNvbnN0IGI2NGNoID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcbmNvbnN0IGI2NGNocyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGI2NGNoKTtcbmNvbnN0IGI2NHRhYiA9ICgoYSkgPT4ge1xuICAgIGxldCB0YWIgPSB7fTtcbiAgICBhLmZvckVhY2goKGMsIGkpID0+IHRhYltjXSA9IGkpO1xuICAgIHJldHVybiB0YWI7XG59KShiNjRjaHMpO1xuY29uc3QgYjY0cmUgPSAvXig/OltBLVphLXpcXGQrXFwvXXs0fSkqPyg/OltBLVphLXpcXGQrXFwvXXsyfSg/Oj09KT98W0EtWmEtelxcZCtcXC9dezN9PT8pPyQvO1xuY29uc3QgX2Zyb21DQyA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYmluZChTdHJpbmcpO1xuY29uc3QgX1U4QWZyb20gPSB0eXBlb2YgVWludDhBcnJheS5mcm9tID09PSAnZnVuY3Rpb24nXG4gICAgPyBVaW50OEFycmF5LmZyb20uYmluZChVaW50OEFycmF5KVxuICAgIDogKGl0KSA9PiBuZXcgVWludDhBcnJheShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpdCwgMCkpO1xuY29uc3QgX21rVXJpU2FmZSA9IChzcmMpID0+IHNyY1xuICAgIC5yZXBsYWNlKC89L2csICcnKS5yZXBsYWNlKC9bK1xcL10vZywgKG0wKSA9PiBtMCA9PSAnKycgPyAnLScgOiAnXycpO1xuY29uc3QgX3RpZHlCNjQgPSAocykgPT4gcy5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpO1xuLyoqXG4gKiBwb2x5ZmlsbCB2ZXJzaW9uIG9mIGBidG9hYFxuICovXG5jb25zdCBidG9hUG9seWZpbGwgPSAoYmluKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ3BvbHlmaWxsZWQnKTtcbiAgICBsZXQgdTMyLCBjMCwgYzEsIGMyLCBhc2MgPSAnJztcbiAgICBjb25zdCBwYWQgPSBiaW4ubGVuZ3RoICUgMztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbi5sZW5ndGg7KSB7XG4gICAgICAgIGlmICgoYzAgPSBiaW4uY2hhckNvZGVBdChpKyspKSA+IDI1NSB8fFxuICAgICAgICAgICAgKGMxID0gYmluLmNoYXJDb2RlQXQoaSsrKSkgPiAyNTUgfHxcbiAgICAgICAgICAgIChjMiA9IGJpbi5jaGFyQ29kZUF0KGkrKykpID4gMjU1KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBjaGFyYWN0ZXIgZm91bmQnKTtcbiAgICAgICAgdTMyID0gKGMwIDw8IDE2KSB8IChjMSA8PCA4KSB8IGMyO1xuICAgICAgICBhc2MgKz0gYjY0Y2hzW3UzMiA+PiAxOCAmIDYzXVxuICAgICAgICAgICAgKyBiNjRjaHNbdTMyID4+IDEyICYgNjNdXG4gICAgICAgICAgICArIGI2NGNoc1t1MzIgPj4gNiAmIDYzXVxuICAgICAgICAgICAgKyBiNjRjaHNbdTMyICYgNjNdO1xuICAgIH1cbiAgICByZXR1cm4gcGFkID8gYXNjLnNsaWNlKDAsIHBhZCAtIDMpICsgXCI9PT1cIi5zdWJzdHJpbmcocGFkKSA6IGFzYztcbn07XG4vKipcbiAqIGRvZXMgd2hhdCBgd2luZG93LmJ0b2FgIG9mIHdlYiBicm93c2VycyBkby5cbiAqIEBwYXJhbSB7U3RyaW5nfSBiaW4gYmluYXJ5IHN0cmluZ1xuICogQHJldHVybnMge3N0cmluZ30gQmFzZTY0LWVuY29kZWQgc3RyaW5nXG4gKi9cbmNvbnN0IF9idG9hID0gdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicgPyAoYmluKSA9PiBidG9hKGJpbilcbiAgICA6IF9oYXNCdWZmZXIgPyAoYmluKSA9PiBCdWZmZXIuZnJvbShiaW4sICdiaW5hcnknKS50b1N0cmluZygnYmFzZTY0JylcbiAgICAgICAgOiBidG9hUG9seWZpbGw7XG5jb25zdCBfZnJvbVVpbnQ4QXJyYXkgPSBfaGFzQnVmZmVyXG4gICAgPyAodThhKSA9PiBCdWZmZXIuZnJvbSh1OGEpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgIDogKHU4YSkgPT4ge1xuICAgICAgICAvLyBjZi4gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTI3MTAwMDEvaG93LXRvLWNvbnZlcnQtdWludDgtYXJyYXktdG8tYmFzZTY0LWVuY29kZWQtc3RyaW5nLzEyNzEzMzI2IzEyNzEzMzI2XG4gICAgICAgIGNvbnN0IG1heGFyZ3MgPSAweDEwMDA7XG4gICAgICAgIGxldCBzdHJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdThhLmxlbmd0aDsgaSA8IGw7IGkgKz0gbWF4YXJncykge1xuICAgICAgICAgICAgc3Rycy5wdXNoKF9mcm9tQ0MuYXBwbHkobnVsbCwgdThhLnN1YmFycmF5KGksIGkgKyBtYXhhcmdzKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfYnRvYShzdHJzLmpvaW4oJycpKTtcbiAgICB9O1xuLyoqXG4gKiBjb252ZXJ0cyBhIFVpbnQ4QXJyYXkgdG8gYSBCYXNlNjQgc3RyaW5nLlxuICogQHBhcmFtIHtib29sZWFufSBbdXJsc2FmZV0gVVJMLWFuZC1maWxlbmFtZS1zYWZlIGEgbGEgUkZDNDY0OCBcdTAwQTc1XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBCYXNlNjQgc3RyaW5nXG4gKi9cbmNvbnN0IGZyb21VaW50OEFycmF5ID0gKHU4YSwgdXJsc2FmZSA9IGZhbHNlKSA9PiB1cmxzYWZlID8gX21rVXJpU2FmZShfZnJvbVVpbnQ4QXJyYXkodThhKSkgOiBfZnJvbVVpbnQ4QXJyYXkodThhKTtcbi8vIFRoaXMgdHJpY2sgaXMgZm91bmQgYnJva2VuIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5rb2dhaS9qcy1iYXNlNjQvaXNzdWVzLzEzMFxuLy8gY29uc3QgdXRvYiA9IChzcmM6IHN0cmluZykgPT4gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHNyYykpO1xuLy8gcmV2ZXJ0aW5nIGdvb2Qgb2xkIGZhdGlvbmVkIHJlZ2V4cFxuY29uc3QgY2JfdXRvYiA9IChjKSA9PiB7XG4gICAgaWYgKGMubGVuZ3RoIDwgMikge1xuICAgICAgICB2YXIgY2MgPSBjLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHJldHVybiBjYyA8IDB4ODAgPyBjXG4gICAgICAgICAgICA6IGNjIDwgMHg4MDAgPyAoX2Zyb21DQygweGMwIHwgKGNjID4+PiA2KSlcbiAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8IChjYyAmIDB4M2YpKSlcbiAgICAgICAgICAgICAgICA6IChfZnJvbUNDKDB4ZTAgfCAoKGNjID4+PiAxMikgJiAweDBmKSlcbiAgICAgICAgICAgICAgICAgICAgKyBfZnJvbUNDKDB4ODAgfCAoKGNjID4+PiA2KSAmIDB4M2YpKVxuICAgICAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8IChjYyAmIDB4M2YpKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgY2MgPSAweDEwMDAwXG4gICAgICAgICAgICArIChjLmNoYXJDb2RlQXQoMCkgLSAweEQ4MDApICogMHg0MDBcbiAgICAgICAgICAgICsgKGMuY2hhckNvZGVBdCgxKSAtIDB4REMwMCk7XG4gICAgICAgIHJldHVybiAoX2Zyb21DQygweGYwIHwgKChjYyA+Pj4gMTgpICYgMHgwNykpXG4gICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8ICgoY2MgPj4+IDEyKSAmIDB4M2YpKVxuICAgICAgICAgICAgKyBfZnJvbUNDKDB4ODAgfCAoKGNjID4+PiA2KSAmIDB4M2YpKVxuICAgICAgICAgICAgKyBfZnJvbUNDKDB4ODAgfCAoY2MgJiAweDNmKSkpO1xuICAgIH1cbn07XG5jb25zdCByZV91dG9iID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRkZdfFteXFx4MDAtXFx4N0ZdL2c7XG4vKipcbiAqIEBkZXByZWNhdGVkIHNob3VsZCBoYXZlIGJlZW4gaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFVURi04IHN0cmluZ1xuICogQHJldHVybnMge3N0cmluZ30gVVRGLTE2IHN0cmluZ1xuICovXG5jb25zdCB1dG9iID0gKHUpID0+IHUucmVwbGFjZShyZV91dG9iLCBjYl91dG9iKTtcbi8vXG5jb25zdCBfZW5jb2RlID0gX2hhc0J1ZmZlclxuICAgID8gKHMpID0+IEJ1ZmZlci5mcm9tKHMsICd1dGY4JykudG9TdHJpbmcoJ2Jhc2U2NCcpXG4gICAgOiBfVEVcbiAgICAgICAgPyAocykgPT4gX2Zyb21VaW50OEFycmF5KF9URS5lbmNvZGUocykpXG4gICAgICAgIDogKHMpID0+IF9idG9hKHV0b2IocykpO1xuLyoqXG4gKiBjb252ZXJ0cyBhIFVURi04LWVuY29kZWQgc3RyaW5nIHRvIGEgQmFzZTY0IHN0cmluZy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VybHNhZmVdIGlmIGB0cnVlYCBtYWtlIHRoZSByZXN1bHQgVVJMLXNhZmVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEJhc2U2NCBzdHJpbmdcbiAqL1xuY29uc3QgZW5jb2RlID0gKHNyYywgdXJsc2FmZSA9IGZhbHNlKSA9PiB1cmxzYWZlXG4gICAgPyBfbWtVcmlTYWZlKF9lbmNvZGUoc3JjKSlcbiAgICA6IF9lbmNvZGUoc3JjKTtcbi8qKlxuICogY29udmVydHMgYSBVVEYtOC1lbmNvZGVkIHN0cmluZyB0byBVUkwtc2FmZSBCYXNlNjQgUkZDNDY0OCBcdTAwQTc1LlxuICogQHJldHVybnMge3N0cmluZ30gQmFzZTY0IHN0cmluZ1xuICovXG5jb25zdCBlbmNvZGVVUkkgPSAoc3JjKSA9PiBlbmNvZGUoc3JjLCB0cnVlKTtcbi8vIFRoaXMgdHJpY2sgaXMgZm91bmQgYnJva2VuIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5rb2dhaS9qcy1iYXNlNjQvaXNzdWVzLzEzMFxuLy8gY29uc3QgYnRvdSA9IChzcmM6IHN0cmluZykgPT4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShzcmMpKTtcbi8vIHJldmVydGluZyBnb29kIG9sZCBmYXRpb25lZCByZWdleHBcbmNvbnN0IHJlX2J0b3UgPSAvW1xceEMwLVxceERGXVtcXHg4MC1cXHhCRl18W1xceEUwLVxceEVGXVtcXHg4MC1cXHhCRl17Mn18W1xceEYwLVxceEY3XVtcXHg4MC1cXHhCRl17M30vZztcbmNvbnN0IGNiX2J0b3UgPSAoY2NjYykgPT4ge1xuICAgIHN3aXRjaCAoY2NjYy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgdmFyIGNwID0gKCgweDA3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOClcbiAgICAgICAgICAgICAgICB8ICgoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIpXG4gICAgICAgICAgICAgICAgfCAoKDB4M2YgJiBjY2NjLmNoYXJDb2RlQXQoMikpIDw8IDYpXG4gICAgICAgICAgICAgICAgfCAoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgzKSksIG9mZnNldCA9IGNwIC0gMHgxMDAwMDtcbiAgICAgICAgICAgIHJldHVybiAoX2Zyb21DQygob2Zmc2V0ID4+PiAxMCkgKyAweEQ4MDApXG4gICAgICAgICAgICAgICAgKyBfZnJvbUNDKChvZmZzZXQgJiAweDNGRikgKyAweERDMDApKTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIF9mcm9tQ0MoKCgweDBmICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMilcbiAgICAgICAgICAgICAgICB8ICgoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgNilcbiAgICAgICAgICAgICAgICB8ICgweDNmICYgY2NjYy5jaGFyQ29kZUF0KDIpKSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gX2Zyb21DQygoKDB4MWYgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDYpXG4gICAgICAgICAgICAgICAgfCAoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgxKSkpO1xuICAgIH1cbn07XG4vKipcbiAqIEBkZXByZWNhdGVkIHNob3VsZCBoYXZlIGJlZW4gaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFVURi0xNiBzdHJpbmdcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFVURi04IHN0cmluZ1xuICovXG5jb25zdCBidG91ID0gKGIpID0+IGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTtcbi8qKlxuICogcG9seWZpbGwgdmVyc2lvbiBvZiBgYXRvYmBcbiAqL1xuY29uc3QgYXRvYlBvbHlmaWxsID0gKGFzYykgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKCdwb2x5ZmlsbGVkJyk7XG4gICAgYXNjID0gYXNjLnJlcGxhY2UoL1xccysvZywgJycpO1xuICAgIGlmICghYjY0cmUudGVzdChhc2MpKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYWxmb3JtZWQgYmFzZTY0LicpO1xuICAgIGFzYyArPSAnPT0nLnNsaWNlKDIgLSAoYXNjLmxlbmd0aCAmIDMpKTtcbiAgICBsZXQgdTI0LCBiaW4gPSAnJywgcjEsIHIyO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXNjLmxlbmd0aDspIHtcbiAgICAgICAgdTI0ID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0gPDwgMThcbiAgICAgICAgICAgIHwgYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0gPDwgMTJcbiAgICAgICAgICAgIHwgKHIxID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0pIDw8IDZcbiAgICAgICAgICAgIHwgKHIyID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0pO1xuICAgICAgICBiaW4gKz0gcjEgPT09IDY0ID8gX2Zyb21DQyh1MjQgPj4gMTYgJiAyNTUpXG4gICAgICAgICAgICA6IHIyID09PSA2NCA/IF9mcm9tQ0ModTI0ID4+IDE2ICYgMjU1LCB1MjQgPj4gOCAmIDI1NSlcbiAgICAgICAgICAgICAgICA6IF9mcm9tQ0ModTI0ID4+IDE2ICYgMjU1LCB1MjQgPj4gOCAmIDI1NSwgdTI0ICYgMjU1KTtcbiAgICB9XG4gICAgcmV0dXJuIGJpbjtcbn07XG4vKipcbiAqIGRvZXMgd2hhdCBgd2luZG93LmF0b2JgIG9mIHdlYiBicm93c2VycyBkby5cbiAqIEBwYXJhbSB7U3RyaW5nfSBhc2MgQmFzZTY0LWVuY29kZWQgc3RyaW5nXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBiaW5hcnkgc3RyaW5nXG4gKi9cbmNvbnN0IF9hdG9iID0gdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicgPyAoYXNjKSA9PiBhdG9iKF90aWR5QjY0KGFzYykpXG4gICAgOiBfaGFzQnVmZmVyID8gKGFzYykgPT4gQnVmZmVyLmZyb20oYXNjLCAnYmFzZTY0JykudG9TdHJpbmcoJ2JpbmFyeScpXG4gICAgICAgIDogYXRvYlBvbHlmaWxsO1xuLy9cbmNvbnN0IF90b1VpbnQ4QXJyYXkgPSBfaGFzQnVmZmVyXG4gICAgPyAoYSkgPT4gX1U4QWZyb20oQnVmZmVyLmZyb20oYSwgJ2Jhc2U2NCcpKVxuICAgIDogKGEpID0+IF9VOEFmcm9tKF9hdG9iKGEpLnNwbGl0KCcnKS5tYXAoYyA9PiBjLmNoYXJDb2RlQXQoMCkpKTtcbi8qKlxuICogY29udmVydHMgYSBCYXNlNjQgc3RyaW5nIHRvIGEgVWludDhBcnJheS5cbiAqL1xuY29uc3QgdG9VaW50OEFycmF5ID0gKGEpID0+IF90b1VpbnQ4QXJyYXkoX3VuVVJJKGEpKTtcbi8vXG5jb25zdCBfZGVjb2RlID0gX2hhc0J1ZmZlclxuICAgID8gKGEpID0+IEJ1ZmZlci5mcm9tKGEsICdiYXNlNjQnKS50b1N0cmluZygndXRmOCcpXG4gICAgOiBfVERcbiAgICAgICAgPyAoYSkgPT4gX1RELmRlY29kZShfdG9VaW50OEFycmF5KGEpKVxuICAgICAgICA6IChhKSA9PiBidG91KF9hdG9iKGEpKTtcbmNvbnN0IF91blVSSSA9IChhKSA9PiBfdGlkeUI2NChhLnJlcGxhY2UoL1stX10vZywgKG0wKSA9PiBtMCA9PSAnLScgPyAnKycgOiAnLycpKTtcbi8qKlxuICogY29udmVydHMgYSBCYXNlNjQgc3RyaW5nIHRvIGEgVVRGLTggc3RyaW5nLlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBCYXNlNjQgc3RyaW5nLiAgQm90aCBub3JtYWwgYW5kIFVSTC1zYWZlIGFyZSBzdXBwb3J0ZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFVURi04IHN0cmluZ1xuICovXG5jb25zdCBkZWNvZGUgPSAoc3JjKSA9PiBfZGVjb2RlKF91blVSSShzcmMpKTtcbi8qKlxuICogY2hlY2sgaWYgYSB2YWx1ZSBpcyBhIHZhbGlkIEJhc2U2NCBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgYSB2YWx1ZSB0byBjaGVja1xuICAqL1xuY29uc3QgaXNWYWxpZCA9IChzcmMpID0+IHtcbiAgICBpZiAodHlwZW9mIHNyYyAhPT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBzID0gc3JjLnJlcGxhY2UoL1xccysvZywgJycpLnJlcGxhY2UoLz17MCwyfSQvLCAnJyk7XG4gICAgcmV0dXJuICEvW15cXHMwLTlhLXpBLVpcXCsvXS8udGVzdChzKSB8fCAhL1teXFxzMC05YS16QS1aXFwtX10vLnRlc3Qocyk7XG59O1xuLy9cbmNvbnN0IF9ub0VudW0gPSAodikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2LCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH07XG59O1xuLyoqXG4gKiBleHRlbmQgU3RyaW5nLnByb3RvdHlwZSB3aXRoIHJlbGV2YW50IG1ldGhvZHNcbiAqL1xuY29uc3QgZXh0ZW5kU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IF9hZGQgPSAobmFtZSwgYm9keSkgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIG5hbWUsIF9ub0VudW0oYm9keSkpO1xuICAgIF9hZGQoJ2Zyb21CYXNlNjQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWNvZGUodGhpcyk7IH0pO1xuICAgIF9hZGQoJ3RvQmFzZTY0JywgZnVuY3Rpb24gKHVybHNhZmUpIHsgcmV0dXJuIGVuY29kZSh0aGlzLCB1cmxzYWZlKTsgfSk7XG4gICAgX2FkZCgndG9CYXNlNjRVUkknLCBmdW5jdGlvbiAoKSB7IHJldHVybiBlbmNvZGUodGhpcywgdHJ1ZSk7IH0pO1xuICAgIF9hZGQoJ3RvQmFzZTY0VVJMJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZW5jb2RlKHRoaXMsIHRydWUpOyB9KTtcbiAgICBfYWRkKCd0b1VpbnQ4QXJyYXknLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0b1VpbnQ4QXJyYXkodGhpcyk7IH0pO1xufTtcbi8qKlxuICogZXh0ZW5kIFVpbnQ4QXJyYXkucHJvdG90eXBlIHdpdGggcmVsZXZhbnQgbWV0aG9kc1xuICovXG5jb25zdCBleHRlbmRVaW50OEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IF9hZGQgPSAobmFtZSwgYm9keSkgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KFVpbnQ4QXJyYXkucHJvdG90eXBlLCBuYW1lLCBfbm9FbnVtKGJvZHkpKTtcbiAgICBfYWRkKCd0b0Jhc2U2NCcsIGZ1bmN0aW9uICh1cmxzYWZlKSB7IHJldHVybiBmcm9tVWludDhBcnJheSh0aGlzLCB1cmxzYWZlKTsgfSk7XG4gICAgX2FkZCgndG9CYXNlNjRVUkknLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmcm9tVWludDhBcnJheSh0aGlzLCB0cnVlKTsgfSk7XG4gICAgX2FkZCgndG9CYXNlNjRVUkwnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmcm9tVWludDhBcnJheSh0aGlzLCB0cnVlKTsgfSk7XG59O1xuLyoqXG4gKiBleHRlbmQgQnVpbHRpbiBwcm90b3R5cGVzIHdpdGggcmVsZXZhbnQgbWV0aG9kc1xuICovXG5jb25zdCBleHRlbmRCdWlsdGlucyA9ICgpID0+IHtcbiAgICBleHRlbmRTdHJpbmcoKTtcbiAgICBleHRlbmRVaW50OEFycmF5KCk7XG59O1xuY29uc3QgZ0Jhc2U2NCA9IHtcbiAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgIFZFUlNJT046IFZFUlNJT04sXG4gICAgYXRvYjogX2F0b2IsXG4gICAgYXRvYlBvbHlmaWxsOiBhdG9iUG9seWZpbGwsXG4gICAgYnRvYTogX2J0b2EsXG4gICAgYnRvYVBvbHlmaWxsOiBidG9hUG9seWZpbGwsXG4gICAgZnJvbUJhc2U2NDogZGVjb2RlLFxuICAgIHRvQmFzZTY0OiBlbmNvZGUsXG4gICAgZW5jb2RlOiBlbmNvZGUsXG4gICAgZW5jb2RlVVJJOiBlbmNvZGVVUkksXG4gICAgZW5jb2RlVVJMOiBlbmNvZGVVUkksXG4gICAgdXRvYjogdXRvYixcbiAgICBidG91OiBidG91LFxuICAgIGRlY29kZTogZGVjb2RlLFxuICAgIGlzVmFsaWQ6IGlzVmFsaWQsXG4gICAgZnJvbVVpbnQ4QXJyYXk6IGZyb21VaW50OEFycmF5LFxuICAgIHRvVWludDhBcnJheTogdG9VaW50OEFycmF5LFxuICAgIGV4dGVuZFN0cmluZzogZXh0ZW5kU3RyaW5nLFxuICAgIGV4dGVuZFVpbnQ4QXJyYXk6IGV4dGVuZFVpbnQ4QXJyYXksXG4gICAgZXh0ZW5kQnVpbHRpbnM6IGV4dGVuZEJ1aWx0aW5zXG59O1xuLy8gbWFrZWNqczpDVVQgLy9cbmV4cG9ydCB7IHZlcnNpb24gfTtcbmV4cG9ydCB7IFZFUlNJT04gfTtcbmV4cG9ydCB7IF9hdG9iIGFzIGF0b2IgfTtcbmV4cG9ydCB7IGF0b2JQb2x5ZmlsbCB9O1xuZXhwb3J0IHsgX2J0b2EgYXMgYnRvYSB9O1xuZXhwb3J0IHsgYnRvYVBvbHlmaWxsIH07XG5leHBvcnQgeyBkZWNvZGUgYXMgZnJvbUJhc2U2NCB9O1xuZXhwb3J0IHsgZW5jb2RlIGFzIHRvQmFzZTY0IH07XG5leHBvcnQgeyB1dG9iIH07XG5leHBvcnQgeyBlbmNvZGUgfTtcbmV4cG9ydCB7IGVuY29kZVVSSSB9O1xuZXhwb3J0IHsgZW5jb2RlVVJJIGFzIGVuY29kZVVSTCB9O1xuZXhwb3J0IHsgYnRvdSB9O1xuZXhwb3J0IHsgZGVjb2RlIH07XG5leHBvcnQgeyBpc1ZhbGlkIH07XG5leHBvcnQgeyBmcm9tVWludDhBcnJheSB9O1xuZXhwb3J0IHsgdG9VaW50OEFycmF5IH07XG5leHBvcnQgeyBleHRlbmRTdHJpbmcgfTtcbmV4cG9ydCB7IGV4dGVuZFVpbnQ4QXJyYXkgfTtcbmV4cG9ydCB7IGV4dGVuZEJ1aWx0aW5zIH07XG4vLyBhbmQgZmluYWxseSxcbmV4cG9ydCB7IGdCYXNlNjQgYXMgQmFzZTY0IH07XG4iLCAiaW1wb3J0IHsgQmFzZTY0IH0gZnJvbSBcImpzLWJhc2U2NFwiO1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRlZFVybExpbmsgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9saWJzcWwvbGlic3FsLWNsaWVudC10cyNzdXBwb3J0ZWQtdXJsc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zYWN0aW9uTW9kZVRvQmVnaW4obW9kZSkge1xuICAgIGlmIChtb2RlID09PSBcIndyaXRlXCIpIHtcbiAgICAgICAgcmV0dXJuIFwiQkVHSU4gSU1NRURJQVRFXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1vZGUgPT09IFwicmVhZFwiKSB7XG4gICAgICAgIHJldHVybiBcIkJFR0lOIFRSQU5TQUNUSU9OIFJFQURPTkxZXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1vZGUgPT09IFwiZGVmZXJyZWRcIikge1xuICAgICAgICByZXR1cm4gXCJCRUdJTiBERUZFUlJFRFwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcignVW5rbm93biB0cmFuc2FjdGlvbiBtb2RlLCBzdXBwb3J0ZWQgdmFsdWVzIGFyZSBcIndyaXRlXCIsIFwicmVhZFwiIGFuZCBcImRlZmVycmVkXCInKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUmVzdWx0U2V0SW1wbCB7XG4gICAgY29sdW1ucztcbiAgICBjb2x1bW5UeXBlcztcbiAgICByb3dzO1xuICAgIHJvd3NBZmZlY3RlZDtcbiAgICBsYXN0SW5zZXJ0Um93aWQ7XG4gICAgY29uc3RydWN0b3IoY29sdW1ucywgY29sdW1uVHlwZXMsIHJvd3MsIHJvd3NBZmZlY3RlZCwgbGFzdEluc2VydFJvd2lkKSB7XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgIHRoaXMuY29sdW1uVHlwZXMgPSBjb2x1bW5UeXBlcztcbiAgICAgICAgdGhpcy5yb3dzID0gcm93cztcbiAgICAgICAgdGhpcy5yb3dzQWZmZWN0ZWQgPSByb3dzQWZmZWN0ZWQ7XG4gICAgICAgIHRoaXMubGFzdEluc2VydFJvd2lkID0gbGFzdEluc2VydFJvd2lkO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbnMsXG4gICAgICAgICAgICBjb2x1bW5UeXBlczogdGhpcy5jb2x1bW5UeXBlcyxcbiAgICAgICAgICAgIHJvd3M6IHRoaXMucm93cy5tYXAocm93VG9Kc29uKSxcbiAgICAgICAgICAgIHJvd3NBZmZlY3RlZDogdGhpcy5yb3dzQWZmZWN0ZWQsXG4gICAgICAgICAgICBsYXN0SW5zZXJ0Um93aWQ6IHRoaXMubGFzdEluc2VydFJvd2lkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IFwiXCIgKyB0aGlzLmxhc3RJbnNlcnRSb3dpZFxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiByb3dUb0pzb24ocm93KSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChyb3csIHZhbHVlVG9Kc29uKTtcbn1cbmZ1bmN0aW9uIHZhbHVlVG9Kc29uKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBCYXNlNjQuZnJvbVVpbnQ4QXJyYXkobmV3IFVpbnQ4QXJyYXkodmFsdWUpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTGlic3FsRXJyb3IgfSBmcm9tIFwiLi9hcGkuanNcIjtcbmltcG9ydCB7IHBhcnNlVXJpIH0gZnJvbSBcIi4vdXJpLmpzXCI7XG5pbXBvcnQgeyBzdXBwb3J0ZWRVcmxMaW5rIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuY29uc3QgaW5NZW1vcnlNb2RlID0gXCI6bWVtb3J5OlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW5NZW1vcnlDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIChjb25maWcuc2NoZW1lID09PSBcImZpbGVcIiAmJlxuICAgICAgICAoY29uZmlnLnBhdGggPT09IFwiOm1lbW9yeTpcIiB8fCBjb25maWcucGF0aC5zdGFydHNXaXRoKFwiOm1lbW9yeTo/XCIpKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kQ29uZmlnKGNvbmZpZywgcHJlZmVySHR0cCkge1xuICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIC8vIHByb2R1Y2UgYSByZWFzb25hYmxlIGVycm9yIG1lc3NhZ2UgaW4gdGhlIGNvbW1vbiBjYXNlIHdoZXJlIHVzZXJzIHR5cGVcbiAgICAgICAgLy8gYGNyZWF0ZUNsaWVudChcImxpYnNxbDovLy4uLlwiKWAgaW5zdGVhZCBvZiBgY3JlYXRlQ2xpZW50KHt1cmw6IFwibGlic3FsOi8vLi4uXCJ9KWBcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgY2xpZW50IGNvbmZpZ3VyYXRpb24gYXMgb2JqZWN0LCBnb3QgJHt0eXBlb2YgY29uZmlnfWApO1xuICAgIH1cbiAgICBsZXQgeyB1cmwsIGF1dGhUb2tlbiwgdGxzLCBpbnRNb2RlLCBjb25jdXJyZW5jeSB9ID0gY29uZmlnO1xuICAgIC8vIGZpbGwgc2ltcGxlIGRlZmF1bHRzIHJpZ2h0IGhlcmVcbiAgICBjb25jdXJyZW5jeSA9IE1hdGgubWF4KDAsIGNvbmN1cnJlbmN5IHx8IDIwKTtcbiAgICBpbnRNb2RlID8/PSBcIm51bWJlclwiO1xuICAgIGxldCBjb25uZWN0aW9uUXVlcnlQYXJhbXMgPSBbXTsgLy8gcmVjb2duaXplZCBxdWVyeSBwYXJhbWV0ZXJzIHdoaWNoIHdlIHNhbml0aXplIHRocm91Z2ggd2hpdGUgbGlzdCBvZiB2YWxpZCBrZXktdmFsdWUgcGFpcnNcbiAgICAvLyBjb252ZXJ0IHBsYWluIDptZW1vcnk6IHVybCB0byBVUkkgZm9ybWF0IHRvIG1ha2UgbG9naWMgbW9yZSB1bmlmb3JtXG4gICAgaWYgKHVybCA9PT0gaW5NZW1vcnlNb2RlKSB7XG4gICAgICAgIHVybCA9IFwiZmlsZTo6bWVtb3J5OlwiO1xuICAgIH1cbiAgICAvLyBwYXJzZSB1cmwgcGFyYW1ldGVycyBmaXJzdCBhbmQgb3ZlcnJpZGUgY29uZmlnIHdpdGggdXBkYXRlIHZhbHVlc1xuICAgIGNvbnN0IHVyaSA9IHBhcnNlVXJpKHVybCk7XG4gICAgY29uc3Qgb3JpZ2luYWxVcmlTY2hlbWUgPSB1cmkuc2NoZW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgaXNJbk1lbW9yeU1vZGUgPSBvcmlnaW5hbFVyaVNjaGVtZSA9PT0gXCJmaWxlXCIgJiZcbiAgICAgICAgdXJpLnBhdGggPT09IGluTWVtb3J5TW9kZSAmJlxuICAgICAgICB1cmkuYXV0aG9yaXR5ID09PSB1bmRlZmluZWQ7XG4gICAgbGV0IHF1ZXJ5UGFyYW1zRGVmO1xuICAgIGlmIChpc0luTWVtb3J5TW9kZSkge1xuICAgICAgICBxdWVyeVBhcmFtc0RlZiA9IHtcbiAgICAgICAgICAgIGNhY2hlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXCJzaGFyZWRcIiwgXCJwcml2YXRlXCJdLFxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKGtleSwgdmFsdWUpID0+IGNvbm5lY3Rpb25RdWVyeVBhcmFtcy5wdXNoKGAke2tleX09JHt2YWx1ZX1gKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBxdWVyeVBhcmFtc0RlZiA9IHtcbiAgICAgICAgICAgIHRsczoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW1wiMFwiLCBcIjFcIl0sXG4gICAgICAgICAgICAgICAgdXBkYXRlOiAoXywgdmFsdWUpID0+ICh0bHMgPSB2YWx1ZSA9PT0gXCIxXCIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1dGhUb2tlbjoge1xuICAgICAgICAgICAgICAgIHVwZGF0ZTogKF8sIHZhbHVlKSA9PiAoYXV0aFRva2VuID0gdmFsdWUpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7IGtleSwgdmFsdWUgfSBvZiB1cmkucXVlcnk/LnBhaXJzID8/IFtdKSB7XG4gICAgICAgIGlmICghT2JqZWN0Lmhhc093bihxdWVyeVBhcmFtc0RlZiwga2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKGBVbnN1cHBvcnRlZCBVUkwgcXVlcnkgcGFyYW1ldGVyICR7SlNPTi5zdHJpbmdpZnkoa2V5KX1gLCBcIlVSTF9QQVJBTV9OT1RfU1VQUE9SVEVEXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1EZWYgPSBxdWVyeVBhcmFtc0RlZltrZXldO1xuICAgICAgICBpZiAocXVlcnlQYXJhbURlZi52YWx1ZXMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgIXF1ZXJ5UGFyYW1EZWYudmFsdWVzLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKGBVbmtub3duIHZhbHVlIGZvciB0aGUgXCIke2tleX1cIiBxdWVyeSBhcmd1bWVudDogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9LiBTdXBwb3J0ZWQgdmFsdWVzIGFyZTogWyR7cXVlcnlQYXJhbURlZi52YWx1ZXMubWFwKCh4KSA9PiAnXCInICsgeCArICdcIicpLmpvaW4oXCIsIFwiKX1dYCwgXCJVUkxfSU5WQUxJRFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVlcnlQYXJhbURlZi51cGRhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbURlZj8udXBkYXRlKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGZpbGwgY29tcGxleCBkZWZhdWx0cyAmIHZhbGlkYXRlIGNvbmZpZ1xuICAgIGNvbnN0IGNvbm5lY3Rpb25RdWVyeVBhcmFtc1N0cmluZyA9IGNvbm5lY3Rpb25RdWVyeVBhcmFtcy5sZW5ndGggPT09IDBcbiAgICAgICAgPyBcIlwiXG4gICAgICAgIDogYD8ke2Nvbm5lY3Rpb25RdWVyeVBhcmFtcy5qb2luKFwiJlwiKX1gO1xuICAgIGNvbnN0IHBhdGggPSB1cmkucGF0aCArIGNvbm5lY3Rpb25RdWVyeVBhcmFtc1N0cmluZztcbiAgICBsZXQgc2NoZW1lO1xuICAgIGlmIChvcmlnaW5hbFVyaVNjaGVtZSA9PT0gXCJsaWJzcWxcIikge1xuICAgICAgICBpZiAodGxzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKHVyaS5hdXRob3JpdHk/LnBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcignQSBcImxpYnNxbDpcIiBVUkwgd2l0aCA/dGxzPTAgbXVzdCBzcGVjaWZ5IGFuIGV4cGxpY2l0IHBvcnQnLCBcIlVSTF9JTlZBTElEXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NoZW1lID0gcHJlZmVySHR0cCA/IFwiaHR0cFwiIDogXCJ3c1wiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NoZW1lID0gcHJlZmVySHR0cCA/IFwiaHR0cHNcIiA6IFwid3NzXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNjaGVtZSA9IG9yaWdpbmFsVXJpU2NoZW1lO1xuICAgIH1cbiAgICBpZiAoc2NoZW1lID09PSBcImh0dHBcIiB8fCBzY2hlbWUgPT09IFwid3NcIikge1xuICAgICAgICB0bHMgPz89IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGxzID8/PSB0cnVlO1xuICAgIH1cbiAgICBpZiAoc2NoZW1lICE9PSBcImh0dHBcIiAmJlxuICAgICAgICBzY2hlbWUgIT09IFwid3NcIiAmJlxuICAgICAgICBzY2hlbWUgIT09IFwiaHR0cHNcIiAmJlxuICAgICAgICBzY2hlbWUgIT09IFwid3NzXCIgJiZcbiAgICAgICAgc2NoZW1lICE9PSBcImZpbGVcIikge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoJ1RoZSBjbGllbnQgc3VwcG9ydHMgb25seSBcImxpYnNxbDpcIiwgXCJ3c3M6XCIsIFwid3M6XCIsIFwiaHR0cHM6XCIsIFwiaHR0cDpcIiBhbmQgXCJmaWxlOlwiIFVSTHMsICcgK1xuICAgICAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KHVyaS5zY2hlbWUgKyBcIjpcIil9LiBgICtcbiAgICAgICAgICAgIGBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHJlYWQgJHtzdXBwb3J0ZWRVcmxMaW5rfWAsIFwiVVJMX1NDSEVNRV9OT1RfU1VQUE9SVEVEXCIpO1xuICAgIH1cbiAgICBpZiAoaW50TW9kZSAhPT0gXCJudW1iZXJcIiAmJiBpbnRNb2RlICE9PSBcImJpZ2ludFwiICYmIGludE1vZGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBmb3IgaW50TW9kZSwgZXhwZWN0ZWQgXCJudW1iZXJcIiwgXCJiaWdpbnRcIiBvciBcInN0cmluZ1wiLCBnb3QgJHtKU09OLnN0cmluZ2lmeShpbnRNb2RlKX1gKTtcbiAgICB9XG4gICAgaWYgKHVyaS5mcmFnbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihgVVJMIGZyYWdtZW50cyBhcmUgbm90IHN1cHBvcnRlZDogJHtKU09OLnN0cmluZ2lmeShcIiNcIiArIHVyaS5mcmFnbWVudCl9YCwgXCJVUkxfSU5WQUxJRFwiKTtcbiAgICB9XG4gICAgaWYgKGlzSW5NZW1vcnlNb2RlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWU6IFwiZmlsZVwiLFxuICAgICAgICAgICAgdGxzOiBmYWxzZSxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBpbnRNb2RlLFxuICAgICAgICAgICAgY29uY3VycmVuY3ksXG4gICAgICAgICAgICBzeW5jVXJsOiBjb25maWcuc3luY1VybCxcbiAgICAgICAgICAgIHN5bmNJbnRlcnZhbDogY29uZmlnLnN5bmNJbnRlcnZhbCxcbiAgICAgICAgICAgIGZldGNoOiBjb25maWcuZmV0Y2gsXG4gICAgICAgICAgICBhdXRoVG9rZW46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuY3J5cHRpb25LZXk6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF1dGhvcml0eTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzY2hlbWUsXG4gICAgICAgIHRscyxcbiAgICAgICAgYXV0aG9yaXR5OiB1cmkuYXV0aG9yaXR5LFxuICAgICAgICBwYXRoLFxuICAgICAgICBhdXRoVG9rZW4sXG4gICAgICAgIGludE1vZGUsXG4gICAgICAgIGNvbmN1cnJlbmN5LFxuICAgICAgICBlbmNyeXB0aW9uS2V5OiBjb25maWcuZW5jcnlwdGlvbktleSxcbiAgICAgICAgc3luY1VybDogY29uZmlnLnN5bmNVcmwsXG4gICAgICAgIHN5bmNJbnRlcnZhbDogY29uZmlnLnN5bmNJbnRlcnZhbCxcbiAgICAgICAgZmV0Y2g6IGNvbmZpZy5mZXRjaCxcbiAgICB9O1xufVxuIiwgImxldCBfV2ViU29ja2V0O1xuaWYgKHR5cGVvZiBXZWJTb2NrZXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBfV2ViU29ja2V0ID0gV2ViU29ja2V0O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgX1dlYlNvY2tldCA9IGdsb2JhbC5XZWJTb2NrZXQ7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBfV2ViU29ja2V0ID0gd2luZG93LldlYlNvY2tldDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBfV2ViU29ja2V0ID0gc2VsZi5XZWJTb2NrZXQ7XG59XG5leHBvcnQgeyBfV2ViU29ja2V0IGFzIFdlYlNvY2tldCB9O1xuIiwgIi8qKiBBIGNsaWVudCBmb3IgdGhlIEhyYW5hIHByb3RvY29sIChhIFwiZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sXCIpLiAqL1xuZXhwb3J0IGNsYXNzIENsaWVudCB7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW50TW9kZSA9IFwibnVtYmVyXCI7XG4gICAgfVxuICAgIC8qKiBSZXByZXNlbnRhdGlvbiBvZiBpbnRlZ2VycyByZXR1cm5lZCBmcm9tIHRoZSBkYXRhYmFzZS4gU2VlIHtAbGluayBJbnRNb2RlfS5cbiAgICAgKlxuICAgICAqIFRoaXMgdmFsdWUgaXMgaW5oZXJpdGVkIGJ5IHtAbGluayBTdHJlYW19IG9iamVjdHMgY3JlYXRlZCB3aXRoIHtAbGluayBvcGVuU3RyZWFtfSwgYnV0IHlvdSBjYW5cbiAgICAgKiBvdmVycmlkZSB0aGUgaW50ZWdlciBtb2RlIGZvciBldmVyeSBzdHJlYW0gYnkgc2V0dGluZyB7QGxpbmsgU3RyZWFtLmludE1vZGV9IG9uIHRoZSBzdHJlYW0uXG4gICAgICovXG4gICAgaW50TW9kZTtcbn1cbiIsICIvKiogR2VuZXJpYyBlcnJvciBwcm9kdWNlZCBieSB0aGUgSHJhbmEgY2xpZW50LiAqL1xuZXhwb3J0IGNsYXNzIENsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQ2xpZW50RXJyb3JcIjtcbiAgICB9XG59XG4vKiogRXJyb3IgdGhyb3duIHdoZW4gdGhlIHNlcnZlciB2aW9sYXRlcyB0aGUgcHJvdG9jb2wuICovXG5leHBvcnQgY2xhc3MgUHJvdG9FcnJvciBleHRlbmRzIENsaWVudEVycm9yIHtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlByb3RvRXJyb3JcIjtcbiAgICB9XG59XG4vKiogRXJyb3IgdGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yIHJlc3BvbnNlLiAqL1xuZXhwb3J0IGNsYXNzIFJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBDbGllbnRFcnJvciB7XG4gICAgY29kZTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgcHJvdG87XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcHJvdG9FcnJvcikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJSZXNwb25zZUVycm9yXCI7XG4gICAgICAgIHRoaXMuY29kZSA9IHByb3RvRXJyb3IuY29kZTtcbiAgICAgICAgdGhpcy5wcm90byA9IHByb3RvRXJyb3I7XG4gICAgICAgIHRoaXMuc3RhY2sgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqIEVycm9yIHRocm93biB3aGVuIHRoZSBjbGllbnQgb3Igc3RyZWFtIGlzIGNsb3NlZC4gKi9cbmV4cG9ydCBjbGFzcyBDbG9zZWRFcnJvciBleHRlbmRzIENsaWVudEVycm9yIHtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjYXVzZSkge1xuICAgICAgICBpZiAoY2F1c2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3VwZXIoYCR7bWVzc2FnZX06ICR7Y2F1c2V9YCk7XG4gICAgICAgICAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIkNsb3NlZEVycm9yXCI7XG4gICAgfVxufVxuLyoqIEVycm9yIHRocm93biB3aGVuIHRoZSBlbnZpcm9ubWVudCBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgV2ViU29ja2V0cy4gKi9cbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRVbnN1cHBvcnRlZEVycm9yIGV4dGVuZHMgQ2xpZW50RXJyb3Ige1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiV2ViU29ja2V0VW5zdXBwb3J0ZWRFcnJvclwiO1xuICAgIH1cbn1cbi8qKiBFcnJvciB0aHJvd24gd2hlbiB3ZSBlbmNvdW50ZXIgYSBXZWJTb2NrZXQgZXJyb3IuICovXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0RXJyb3IgZXh0ZW5kcyBDbGllbnRFcnJvciB7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJXZWJTb2NrZXRFcnJvclwiO1xuICAgIH1cbn1cbi8qKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgSFRUUCBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciByZXNwb25zZS4gKi9cbmV4cG9ydCBjbGFzcyBIdHRwU2VydmVyRXJyb3IgZXh0ZW5kcyBDbGllbnRFcnJvciB7XG4gICAgc3RhdHVzO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXR1cykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiSHR0cFNlcnZlckVycm9yXCI7XG4gICAgfVxufVxuLyoqIEVycm9yIHRocm93biB3aGVuIGEgbGlic3FsIFVSTCBpcyBub3QgdmFsaWQuICovXG5leHBvcnQgY2xhc3MgTGlic3FsVXJsUGFyc2VFcnJvciBleHRlbmRzIENsaWVudEVycm9yIHtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkxpYnNxbFVybFBhcnNlRXJyb3JcIjtcbiAgICB9XG59XG4vKiogRXJyb3IgdGhyb3duIHdoZW4gdGhlIHByb3RvY29sIHZlcnNpb24gaXMgdG9vIGxvdyB0byBzdXBwb3J0IGEgZmVhdHVyZS4gKi9cbmV4cG9ydCBjbGFzcyBQcm90b2NvbFZlcnNpb25FcnJvciBleHRlbmRzIENsaWVudEVycm9yIHtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlByb3RvY29sVmVyc2lvbkVycm9yXCI7XG4gICAgfVxufVxuLyoqIEVycm9yIHRocm93biB3aGVuIGFuIGludGVybmFsIGNsaWVudCBlcnJvciBoYXBwZW5zLiAqL1xuZXhwb3J0IGNsYXNzIEludGVybmFsRXJyb3IgZXh0ZW5kcyBDbGllbnRFcnJvciB7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJJbnRlcm5hbEVycm9yXCI7XG4gICAgfVxufVxuLyoqIEVycm9yIHRocm93biB3aGVuIHRoZSBBUEkgaXMgbWlzdXNlZC4gKi9cbmV4cG9ydCBjbGFzcyBNaXN1c2VFcnJvciBleHRlbmRzIENsaWVudEVycm9yIHtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk1pc3VzZUVycm9yXCI7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFByb3RvRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3JzLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHRocm93IHR5cGVFcnJvcih2YWx1ZSwgXCJzdHJpbmdcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nT3B0KHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgdHlwZUVycm9yKHZhbHVlLCBcInN0cmluZyBvciBudWxsXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlcih2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICB0aHJvdyB0eXBlRXJyb3IodmFsdWUsIFwibnVtYmVyXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJvb2xlYW4odmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHRocm93IHR5cGVFcnJvcih2YWx1ZSwgXCJib29sZWFuXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5KHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgdHlwZUVycm9yKHZhbHVlLCBcImFycmF5XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9iamVjdCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgdHlwZUVycm9yKHZhbHVlLCBcIm9iamVjdFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU9iamVjdHNNYXAodmFsdWUsIGZ1bikge1xuICAgIHJldHVybiBhcnJheSh2YWx1ZSkubWFwKChlbGVtVmFsdWUpID0+IGZ1bihvYmplY3QoZWxlbVZhbHVlKSkpO1xufVxuZnVuY3Rpb24gdHlwZUVycm9yKHZhbHVlLCBleHBlY3RlZCkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvdG9FcnJvcihgRXhwZWN0ZWQgJHtleHBlY3RlZH0sIGJ1dCB0aGUgcHJvcGVydHkgd2FzIG1pc3NpbmdgKTtcbiAgICB9XG4gICAgbGV0IHJlY2VpdmVkID0gdHlwZW9mIHZhbHVlO1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZWNlaXZlZCA9IFwibnVsbFwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZWNlaXZlZCA9IFwiYXJyYXlcIjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm90b0Vycm9yKGBFeHBlY3RlZCAke2V4cGVjdGVkfSwgcmVjZWl2ZWQgJHtyZWNlaXZlZH1gKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkSnNvbk9iamVjdCh2YWx1ZSwgZnVuKSB7XG4gICAgcmV0dXJuIGZ1bihvYmplY3QodmFsdWUpKTtcbn1cbiIsICJleHBvcnQgY2xhc3MgT2JqZWN0V3JpdGVyIHtcbiAgICAjb3V0cHV0O1xuICAgICNpc0ZpcnN0O1xuICAgIGNvbnN0cnVjdG9yKG91dHB1dCkge1xuICAgICAgICB0aGlzLiNvdXRwdXQgPSBvdXRwdXQ7XG4gICAgICAgIHRoaXMuI2lzRmlyc3QgPSBmYWxzZTtcbiAgICB9XG4gICAgYmVnaW4oKSB7XG4gICAgICAgIHRoaXMuI291dHB1dC5wdXNoKCd7Jyk7XG4gICAgICAgIHRoaXMuI2lzRmlyc3QgPSB0cnVlO1xuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHRoaXMuI291dHB1dC5wdXNoKCd9Jyk7XG4gICAgICAgIHRoaXMuI2lzRmlyc3QgPSBmYWxzZTtcbiAgICB9XG4gICAgI2tleShuYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLiNpc0ZpcnN0KSB7XG4gICAgICAgICAgICB0aGlzLiNvdXRwdXQucHVzaCgnXCInKTtcbiAgICAgICAgICAgIHRoaXMuI2lzRmlyc3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI291dHB1dC5wdXNoKCcsXCInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNvdXRwdXQucHVzaChuYW1lKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0LnB1c2goJ1wiOicpO1xuICAgIH1cbiAgICBzdHJpbmcobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy4ja2V5KG5hbWUpO1xuICAgICAgICB0aGlzLiNvdXRwdXQucHVzaChKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIH1cbiAgICBzdHJpbmdSYXcobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy4ja2V5KG5hbWUpO1xuICAgICAgICB0aGlzLiNvdXRwdXQucHVzaCgnXCInKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0LnB1c2godmFsdWUpO1xuICAgICAgICB0aGlzLiNvdXRwdXQucHVzaCgnXCInKTtcbiAgICB9XG4gICAgbnVtYmVyKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuI2tleShuYW1lKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0LnB1c2goXCJcIiArIHZhbHVlKTtcbiAgICB9XG4gICAgYm9vbGVhbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLiNrZXkobmFtZSk7XG4gICAgICAgIHRoaXMuI291dHB1dC5wdXNoKHZhbHVlID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIpO1xuICAgIH1cbiAgICBvYmplY3QobmFtZSwgdmFsdWUsIHZhbHVlRnVuKSB7XG4gICAgICAgIHRoaXMuI2tleShuYW1lKTtcbiAgICAgICAgdGhpcy5iZWdpbigpO1xuICAgICAgICB2YWx1ZUZ1bih0aGlzLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgfVxuICAgIGFycmF5T2JqZWN0cyhuYW1lLCB2YWx1ZXMsIHZhbHVlRnVuKSB7XG4gICAgICAgIHRoaXMuI2tleShuYW1lKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0LnB1c2goJ1snKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb3V0cHV0LnB1c2goJywnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmVnaW4oKTtcbiAgICAgICAgICAgIHZhbHVlRnVuKHRoaXMsIHZhbHVlc1tpXSk7XG4gICAgICAgICAgICB0aGlzLmVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI291dHB1dC5wdXNoKCddJyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlSnNvbk9iamVjdCh2YWx1ZSwgZnVuKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gW107XG4gICAgY29uc3Qgd3JpdGVyID0gbmV3IE9iamVjdFdyaXRlcihvdXRwdXQpO1xuICAgIHdyaXRlci5iZWdpbigpO1xuICAgIGZ1bih3cml0ZXIsIHZhbHVlKTtcbiAgICB3cml0ZXIuZW5kKCk7XG4gICAgcmV0dXJuIG91dHB1dC5qb2luKFwiXCIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBWQVJJTlQgPSAwO1xuZXhwb3J0IGNvbnN0IEZJWEVEXzY0ID0gMTtcbmV4cG9ydCBjb25zdCBMRU5HVEhfREVMSU1JVEVEID0gMjtcbmV4cG9ydCBjb25zdCBHUk9VUF9TVEFSVCA9IDM7XG5leHBvcnQgY29uc3QgR1JPVVBfRU5EID0gNDtcbmV4cG9ydCBjb25zdCBGSVhFRF8zMiA9IDU7XG4iLCAiaW1wb3J0IHsgUHJvdG9FcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IFZBUklOVCwgRklYRURfNjQsIExFTkdUSF9ERUxJTUlURUQsIEZJWEVEXzMyIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuY2xhc3MgTWVzc2FnZVJlYWRlciB7XG4gICAgI2FycmF5O1xuICAgICN2aWV3O1xuICAgICNwb3M7XG4gICAgY29uc3RydWN0b3IoYXJyYXkpIHtcbiAgICAgICAgdGhpcy4jYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy4jdmlldyA9IG5ldyBEYXRhVmlldyhhcnJheS5idWZmZXIsIGFycmF5LmJ5dGVPZmZzZXQsIGFycmF5LmJ5dGVMZW5ndGgpO1xuICAgICAgICB0aGlzLiNwb3MgPSAwO1xuICAgIH1cbiAgICB2YXJpbnQoKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgICAgIGZvciAobGV0IHNoaWZ0ID0gMDs7IHNoaWZ0ICs9IDcpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUgPSB0aGlzLiNhcnJheVt0aGlzLiNwb3MrK107XG4gICAgICAgICAgICB2YWx1ZSB8PSAoYnl0ZSAmIDB4N2YpIDw8IHNoaWZ0O1xuICAgICAgICAgICAgaWYgKCEoYnl0ZSAmIDB4ODApKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICB2YXJpbnRCaWcoKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IDBuO1xuICAgICAgICBmb3IgKGxldCBzaGlmdCA9IDBuOzsgc2hpZnQgKz0gN24pIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUgPSB0aGlzLiNhcnJheVt0aGlzLiNwb3MrK107XG4gICAgICAgICAgICB2YWx1ZSB8PSBCaWdJbnQoYnl0ZSAmIDB4N2YpIDw8IHNoaWZ0O1xuICAgICAgICAgICAgaWYgKCEoYnl0ZSAmIDB4ODApKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBieXRlcyhsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLiNhcnJheS5idWZmZXIsIHRoaXMuI2FycmF5LmJ5dGVPZmZzZXQgKyB0aGlzLiNwb3MsIGxlbmd0aCk7XG4gICAgICAgIHRoaXMuI3BvcyArPSBsZW5ndGg7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG4gICAgZG91YmxlKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuI3ZpZXcuZ2V0RmxvYXQ2NCh0aGlzLiNwb3MsIHRydWUpO1xuICAgICAgICB0aGlzLiNwb3MgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBza2lwVmFyaW50KCkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBjb25zdCBieXRlID0gdGhpcy4jYXJyYXlbdGhpcy4jcG9zKytdO1xuICAgICAgICAgICAgaWYgKCEoYnl0ZSAmIDB4ODApKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2tpcChjb3VudCkge1xuICAgICAgICB0aGlzLiNwb3MgKz0gY291bnQ7XG4gICAgfVxuICAgIGVvZigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3BvcyA+PSB0aGlzLiNhcnJheS5ieXRlTGVuZ3RoO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBGaWVsZFJlYWRlciB7XG4gICAgI3JlYWRlcjtcbiAgICAjd2lyZVR5cGU7XG4gICAgY29uc3RydWN0b3IocmVhZGVyKSB7XG4gICAgICAgIHRoaXMuI3JlYWRlciA9IHJlYWRlcjtcbiAgICAgICAgdGhpcy4jd2lyZVR5cGUgPSAtMTtcbiAgICB9XG4gICAgc2V0dXAod2lyZVR5cGUpIHtcbiAgICAgICAgdGhpcy4jd2lyZVR5cGUgPSB3aXJlVHlwZTtcbiAgICB9XG4gICAgI2V4cGVjdChleHBlY3RlZFdpcmVUeXBlKSB7XG4gICAgICAgIGlmICh0aGlzLiN3aXJlVHlwZSAhPT0gZXhwZWN0ZWRXaXJlVHlwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoYEV4cGVjdGVkIHdpcmUgdHlwZSAke2V4cGVjdGVkV2lyZVR5cGV9LCBnb3QgJHt0aGlzLiN3aXJlVHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN3aXJlVHlwZSA9IC0xO1xuICAgIH1cbiAgICBieXRlcygpIHtcbiAgICAgICAgdGhpcy4jZXhwZWN0KExFTkdUSF9ERUxJTUlURUQpO1xuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLiNyZWFkZXIudmFyaW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkZXIuYnl0ZXMobGVuZ3RoKTtcbiAgICB9XG4gICAgc3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKHRoaXMuYnl0ZXMoKSk7XG4gICAgfVxuICAgIG1lc3NhZ2UoZGVmKSB7XG4gICAgICAgIHJldHVybiByZWFkUHJvdG9idWZNZXNzYWdlKHRoaXMuYnl0ZXMoKSwgZGVmKTtcbiAgICB9XG4gICAgaW50MzIoKSB7XG4gICAgICAgIHRoaXMuI2V4cGVjdChWQVJJTlQpO1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGVyLnZhcmludCgpO1xuICAgIH1cbiAgICB1aW50MzIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludDMyKCk7XG4gICAgfVxuICAgIGJvb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludDMyKCkgIT09IDA7XG4gICAgfVxuICAgIHVpbnQ2NCgpIHtcbiAgICAgICAgdGhpcy4jZXhwZWN0KFZBUklOVCk7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkZXIudmFyaW50QmlnKCk7XG4gICAgfVxuICAgIHNpbnQ2NCgpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnVpbnQ2NCgpO1xuICAgICAgICByZXR1cm4gKHZhbHVlID4+IDFuKSBeICgtKHZhbHVlICYgMW4pKTtcbiAgICB9XG4gICAgZG91YmxlKCkge1xuICAgICAgICB0aGlzLiNleHBlY3QoRklYRURfNjQpO1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGVyLmRvdWJsZSgpO1xuICAgIH1cbiAgICBtYXliZVNraXAoKSB7XG4gICAgICAgIGlmICh0aGlzLiN3aXJlVHlwZSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiN3aXJlVHlwZSA9PT0gVkFSSU5UKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkZXIuc2tpcFZhcmludCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI3dpcmVUeXBlID09PSBGSVhFRF82NCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGVyLnNraXAoOCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jd2lyZVR5cGUgPT09IExFTkdUSF9ERUxJTUlURUQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuI3JlYWRlci52YXJpbnQoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRlci5za2lwKGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jd2lyZVR5cGUgPT09IEZJWEVEXzMyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkZXIuc2tpcCg0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKGBVbmV4cGVjdGVkIHdpcmUgdHlwZSAke3RoaXMuI3dpcmVUeXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3dpcmVUeXBlID0gLTE7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRQcm90b2J1Zk1lc3NhZ2UoZGF0YSwgZGVmKSB7XG4gICAgY29uc3QgbXNnUmVhZGVyID0gbmV3IE1lc3NhZ2VSZWFkZXIoZGF0YSk7XG4gICAgY29uc3QgZmllbGRSZWFkZXIgPSBuZXcgRmllbGRSZWFkZXIobXNnUmVhZGVyKTtcbiAgICBsZXQgdmFsdWUgPSBkZWYuZGVmYXVsdCgpO1xuICAgIHdoaWxlICghbXNnUmVhZGVyLmVvZigpKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG1zZ1JlYWRlci52YXJpbnQoKTtcbiAgICAgICAgY29uc3QgdGFnID0ga2V5ID4+IDM7XG4gICAgICAgIGNvbnN0IHdpcmVUeXBlID0ga2V5ICYgMHg3O1xuICAgICAgICBmaWVsZFJlYWRlci5zZXR1cCh3aXJlVHlwZSk7XG4gICAgICAgIGNvbnN0IHRhZ0Z1biA9IGRlZlt0YWddO1xuICAgICAgICBpZiAodGFnRnVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldHVybmVkVmFsdWUgPSB0YWdGdW4oZmllbGRSZWFkZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJldHVybmVkVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmllbGRSZWFkZXIubWF5YmVTa2lwKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbiIsICJpbXBvcnQgeyBWQVJJTlQsIEZJWEVEXzY0LCBMRU5HVEhfREVMSU1JVEVEIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNsYXNzIE1lc3NhZ2VXcml0ZXIge1xuICAgICNidWY7XG4gICAgI2FycmF5O1xuICAgICN2aWV3O1xuICAgICNwb3M7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI2J1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyNTYpO1xuICAgICAgICB0aGlzLiNhcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuI2J1Zik7XG4gICAgICAgIHRoaXMuI3ZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy4jYnVmKTtcbiAgICAgICAgdGhpcy4jcG9zID0gMDtcbiAgICB9XG4gICAgI2Vuc3VyZShleHRyYSkge1xuICAgICAgICBpZiAodGhpcy4jcG9zICsgZXh0cmEgPD0gdGhpcy4jYnVmLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV3Q2FwID0gdGhpcy4jYnVmLmJ5dGVMZW5ndGg7XG4gICAgICAgIHdoaWxlIChuZXdDYXAgPCB0aGlzLiNwb3MgKyBleHRyYSkge1xuICAgICAgICAgICAgbmV3Q2FwICo9IDI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QnVmID0gbmV3IEFycmF5QnVmZmVyKG5ld0NhcCk7XG4gICAgICAgIGNvbnN0IG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3QnVmKTtcbiAgICAgICAgY29uc3QgbmV3VmlldyA9IG5ldyBEYXRhVmlldyhuZXdCdWYpO1xuICAgICAgICBuZXdBcnJheS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy4jYnVmLCAwLCB0aGlzLiNwb3MpKTtcbiAgICAgICAgdGhpcy4jYnVmID0gbmV3QnVmO1xuICAgICAgICB0aGlzLiNhcnJheSA9IG5ld0FycmF5O1xuICAgICAgICB0aGlzLiN2aWV3ID0gbmV3VmlldztcbiAgICB9XG4gICAgI3ZhcmludCh2YWx1ZSkge1xuICAgICAgICB0aGlzLiNlbnN1cmUoNSk7XG4gICAgICAgIHZhbHVlID0gMCB8IHZhbHVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBsZXQgYnl0ZSA9IHZhbHVlICYgMHg3ZjtcbiAgICAgICAgICAgIHZhbHVlID4+Pj0gNztcbiAgICAgICAgICAgIGJ5dGUgfD0gKHZhbHVlID8gMHg4MCA6IDApO1xuICAgICAgICAgICAgdGhpcy4jYXJyYXlbdGhpcy4jcG9zKytdID0gYnl0ZTtcbiAgICAgICAgfSB3aGlsZSAodmFsdWUpO1xuICAgIH1cbiAgICAjdmFyaW50QmlnKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuI2Vuc3VyZSgxMCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUgJiAweGZmZmZmZmZmZmZmZmZmZmZuO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBsZXQgYnl0ZSA9IE51bWJlcih2YWx1ZSAmIDB4N2ZuKTtcbiAgICAgICAgICAgIHZhbHVlID4+PSA3bjtcbiAgICAgICAgICAgIGJ5dGUgfD0gKHZhbHVlID8gMHg4MCA6IDApO1xuICAgICAgICAgICAgdGhpcy4jYXJyYXlbdGhpcy4jcG9zKytdID0gYnl0ZTtcbiAgICAgICAgfSB3aGlsZSAodmFsdWUpO1xuICAgIH1cbiAgICAjdGFnKHRhZywgd2lyZVR5cGUpIHtcbiAgICAgICAgdGhpcy4jdmFyaW50KCh0YWcgPDwgMykgfCB3aXJlVHlwZSk7XG4gICAgfVxuICAgIGJ5dGVzKHRhZywgdmFsdWUpIHtcbiAgICAgICAgdGhpcy4jdGFnKHRhZywgTEVOR1RIX0RFTElNSVRFRCk7XG4gICAgICAgIHRoaXMuI3ZhcmludCh2YWx1ZS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy4jZW5zdXJlKHZhbHVlLmJ5dGVMZW5ndGgpO1xuICAgICAgICB0aGlzLiNhcnJheS5zZXQodmFsdWUsIHRoaXMuI3Bvcyk7XG4gICAgICAgIHRoaXMuI3BvcyArPSB2YWx1ZS5ieXRlTGVuZ3RoO1xuICAgIH1cbiAgICBzdHJpbmcodGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmJ5dGVzKHRhZywgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHZhbHVlKSk7XG4gICAgfVxuICAgIG1lc3NhZ2UodGFnLCB2YWx1ZSwgZnVuKSB7XG4gICAgICAgIGNvbnN0IHdyaXRlciA9IG5ldyBNZXNzYWdlV3JpdGVyKCk7XG4gICAgICAgIGZ1bih3cml0ZXIsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5ieXRlcyh0YWcsIHdyaXRlci5kYXRhKCkpO1xuICAgIH1cbiAgICBpbnQzMih0YWcsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuI3RhZyh0YWcsIFZBUklOVCk7XG4gICAgICAgIHRoaXMuI3ZhcmludCh2YWx1ZSk7XG4gICAgfVxuICAgIHVpbnQzMih0YWcsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW50MzIodGFnLCB2YWx1ZSk7XG4gICAgfVxuICAgIGJvb2wodGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmludDMyKHRhZywgdmFsdWUgPyAxIDogMCk7XG4gICAgfVxuICAgIHNpbnQ2NCh0YWcsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuI3RhZyh0YWcsIFZBUklOVCk7XG4gICAgICAgIHRoaXMuI3ZhcmludEJpZygodmFsdWUgPDwgMW4pIF4gKHZhbHVlID4+IDYzbikpO1xuICAgIH1cbiAgICBkb3VibGUodGFnLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLiN0YWcodGFnLCBGSVhFRF82NCk7XG4gICAgICAgIHRoaXMuI2Vuc3VyZSg4KTtcbiAgICAgICAgdGhpcy4jdmlldy5zZXRGbG9hdDY0KHRoaXMuI3BvcywgdmFsdWUsIHRydWUpO1xuICAgICAgICB0aGlzLiNwb3MgKz0gODtcbiAgICB9XG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHRoaXMuI2J1ZiwgMCwgdGhpcy4jcG9zKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gd3JpdGVQcm90b2J1Zk1lc3NhZ2UodmFsdWUsIGZ1bikge1xuICAgIGNvbnN0IHcgPSBuZXcgTWVzc2FnZVdyaXRlcigpO1xuICAgIGZ1bih3LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHcuZGF0YSgpO1xufVxuIiwgImltcG9ydCB7IEludGVybmFsRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbi8vIEFuIGFsbG9jYXRvciBvZiBub24tbmVnYXRpdmUgaW50ZWdlciBpZHMuXG4vL1xuLy8gVGhpcyBjbGV2ZXIgZGF0YSBzdHJ1Y3R1cmUgaGFzIHRoZXNlIFwiaWRlYWxcIiBwcm9wZXJ0aWVzOlxuLy8gLSBJdCBjb25zdW1lcyBtZW1vcnkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2YgdXNlZCBpZHMgKHdoaWNoIGlzIG9wdGltYWwpLlxuLy8gLSBBbGwgb3BlcmF0aW9ucyBhcmUgTygxKSB0aW1lLlxuLy8gLSBUaGUgYWxsb2NhdGVkIGlkcyBhcmUgc21hbGwgKHdpdGggYSBzbGlnaHQgbW9kaWZpY2F0aW9uLCB3ZSBjb3VsZCBhbHdheXMgcHJvdmlkZSB0aGUgc21hbGxlc3QgcG9zc2libGVcbi8vIGlkKS5cbmV4cG9ydCBjbGFzcyBJZEFsbG9jIHtcbiAgICAvLyBTZXQgb2YgYWxsIGFsbG9jYXRlZCBpZHNcbiAgICAjdXNlZElkcztcbiAgICAvLyBTZXQgb2YgYWxsIGZyZWUgaWRzIGxvd2VyIHRoYW4gYCN1c2VkSWRzLnNpemVgXG4gICAgI2ZyZWVJZHM7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI3VzZWRJZHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuI2ZyZWVJZHMgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaWQgdGhhdCB3YXMgZnJlZSwgYW5kIG1hcmtzIGl0IGFzIHVzZWQuXG4gICAgYWxsb2MoKSB7XG4gICAgICAgIC8vIHRoaXMgXCJsb29wXCIgaXMganVzdCBhIHdheSB0byBwaWNrIGFuIGFyYml0cmFyeSBlbGVtZW50IGZyb20gdGhlIGAjZnJlZUlkc2Agc2V0XG4gICAgICAgIGZvciAoY29uc3QgZnJlZUlkIG9mIHRoaXMuI2ZyZWVJZHMpIHtcbiAgICAgICAgICAgIHRoaXMuI2ZyZWVJZHMuZGVsZXRlKGZyZWVJZCk7XG4gICAgICAgICAgICB0aGlzLiN1c2VkSWRzLmFkZChmcmVlSWQpO1xuICAgICAgICAgICAgLy8gbWFpbnRhaW4gdGhlIGludmFyaWFudCBvZiBgI2ZyZWVJZHNgXG4gICAgICAgICAgICBpZiAoIXRoaXMuI3VzZWRJZHMuaGFzKHRoaXMuI3VzZWRJZHMuc2l6ZSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jZnJlZUlkcy5hZGQodGhpcy4jdXNlZElkcy5zaXplIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnJlZUlkO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZSBgI2ZyZWVJZHNgIHNldCBpcyBlbXB0eSwgc28gdGhlcmUgYXJlIG5vIGZyZWUgaWRzIGxvd2VyIHRoYW4gYCN1c2VkSWRzLnNpemVgXG4gICAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCBgI3VzZWRJZHNgIGlzIGEgc2V0IHRoYXQgY29udGFpbnMgYWxsIG51bWJlcnMgZnJvbSAwIHRvIGAjdXNlZElkcy5zaXplIC0gMWAsXG4gICAgICAgIC8vIHNvIGAjdXNlZElkcy5zaXplYCBpcyBmcmVlXG4gICAgICAgIGNvbnN0IGZyZWVJZCA9IHRoaXMuI3VzZWRJZHMuc2l6ZTtcbiAgICAgICAgdGhpcy4jdXNlZElkcy5hZGQoZnJlZUlkKTtcbiAgICAgICAgcmV0dXJuIGZyZWVJZDtcbiAgICB9XG4gICAgZnJlZShpZCkge1xuICAgICAgICBpZiAoIXRoaXMuI3VzZWRJZHMuZGVsZXRlKGlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXJyb3IoXCJGcmVlaW5nIGFuIGlkIHRoYXQgaXMgbm90IGFsbG9jYXRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYWludGFpbiB0aGUgaW52YXJpYW50IG9mIGAjZnJlZUlkc2BcbiAgICAgICAgdGhpcy4jZnJlZUlkcy5kZWxldGUodGhpcy4jdXNlZElkcy5zaXplKTtcbiAgICAgICAgaWYgKGlkIDwgdGhpcy4jdXNlZElkcy5zaXplKSB7XG4gICAgICAgICAgICB0aGlzLiNmcmVlSWRzLmFkZChpZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgSW50ZXJuYWxFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGltcG9zc2libGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgSW50ZXJuYWxFcnJvcihtZXNzYWdlKTtcbn1cbiIsICJpbXBvcnQgeyBQcm90b0Vycm9yLCBNaXN1c2VFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaW1wb3NzaWJsZSB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZVRvUHJvdG8odmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiT25seSBmaW5pdGUgbnVtYmVycyAobm90IEluZmluaXR5IG9yIE5hTikgY2FuIGJlIHBhc3NlZCBhcyBhcmd1bWVudHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgaWYgKHZhbHVlIDwgbWluSW50ZWdlciB8fCB2YWx1ZSA+IG1heEludGVnZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhpcyBiaWdpbnQgdmFsdWUgaXMgdG9vIGxhcmdlIHRvIGJlIHJlcHJlc2VudGVkIGFzIGEgNjQtYml0IGludGVnZXIgYW5kIHBhc3NlZCBhcyBhcmd1bWVudFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID8gMW4gOiAwbjtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuICt2YWx1ZS52YWx1ZU9mKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICByZXR1cm4gXCJcIiArIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgdHlwZSBvZiB2YWx1ZVwiKTtcbiAgICB9XG59XG5jb25zdCBtaW5JbnRlZ2VyID0gLTkyMjMzNzIwMzY4NTQ3NzU4MDhuO1xuY29uc3QgbWF4SW50ZWdlciA9IDkyMjMzNzIwMzY4NTQ3NzU4MDduO1xuZXhwb3J0IGZ1bmN0aW9uIHZhbHVlRnJvbVByb3RvKHZhbHVlLCBpbnRNb2RlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgaWYgKGludE1vZGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc1NhZmVJbnRlZ2VyKG51bSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlJlY2VpdmVkIGludGVnZXIgd2hpY2ggaXMgdG9vIGxhcmdlIHRvIGJlIHNhZmVseSByZXByZXNlbnRlZCBhcyBhIEphdmFTY3JpcHQgbnVtYmVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnRNb2RlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW50TW9kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXN1c2VFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIEludE1vZGVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE86IHdlIG5lZWQgdG8gY29weSBkYXRhIGZyb20gYFVpbnQ4QXJyYXlgIHRvIHJldHVybiBhbiBgQXJyYXlCdWZmZXJgLiBQZXJoYXBzIHdlIHNob3VsZCBhZGQgYVxuICAgICAgICAvLyBgYmxvYk1vZGVgIHBhcmFtZXRlciwgc2ltaWxhciB0byBgaW50TW9kZWAsIHdoaWNoIHdvdWxkIGFsbG93IHRoZSB1c2VyIHRvIGNob29zZSBiZXR3ZWVuIHJlY2VpdmluZ1xuICAgICAgICAvLyBgQXJyYXlCdWZmZXJgIChkZWZhdWx0LCBjb252ZW5pZW50KSBhbmQgYFVpbnQ4QXJyYXlgICh6ZXJvIGNvcHkpP1xuICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoKS5idWZmZXI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJSZWNlaXZlZCB1bnJlY29nbml6ZWQgdHlwZSBvZiBWYWx1ZVwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IGltcG9zc2libGUodmFsdWUsIFwiSW1wb3NzaWJsZSB0eXBlIG9mIFZhbHVlXCIpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyB2YWx1ZUZyb21Qcm90byB9IGZyb20gXCIuL3ZhbHVlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc3RtdFJlc3VsdEZyb21Qcm90byhyZXN1bHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZmZlY3RlZFJvd0NvdW50OiByZXN1bHQuYWZmZWN0ZWRSb3dDb3VudCxcbiAgICAgICAgbGFzdEluc2VydFJvd2lkOiByZXN1bHQubGFzdEluc2VydFJvd2lkLFxuICAgICAgICBjb2x1bW5OYW1lczogcmVzdWx0LmNvbHMubWFwKGNvbCA9PiBjb2wubmFtZSksXG4gICAgICAgIGNvbHVtbkRlY2x0eXBlczogcmVzdWx0LmNvbHMubWFwKGNvbCA9PiBjb2wuZGVjbHR5cGUpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcm93c1Jlc3VsdEZyb21Qcm90byhyZXN1bHQsIGludE1vZGUpIHtcbiAgICBjb25zdCBzdG10UmVzdWx0ID0gc3RtdFJlc3VsdEZyb21Qcm90byhyZXN1bHQpO1xuICAgIGNvbnN0IHJvd3MgPSByZXN1bHQucm93cy5tYXAocm93ID0+IHJvd0Zyb21Qcm90byhzdG10UmVzdWx0LmNvbHVtbk5hbWVzLCByb3csIGludE1vZGUpKTtcbiAgICByZXR1cm4geyAuLi5zdG10UmVzdWx0LCByb3dzIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcm93UmVzdWx0RnJvbVByb3RvKHJlc3VsdCwgaW50TW9kZSkge1xuICAgIGNvbnN0IHN0bXRSZXN1bHQgPSBzdG10UmVzdWx0RnJvbVByb3RvKHJlc3VsdCk7XG4gICAgbGV0IHJvdztcbiAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICByb3cgPSByb3dGcm9tUHJvdG8oc3RtdFJlc3VsdC5jb2x1bW5OYW1lcywgcmVzdWx0LnJvd3NbMF0sIGludE1vZGUpO1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5zdG10UmVzdWx0LCByb3cgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZVJlc3VsdEZyb21Qcm90byhyZXN1bHQsIGludE1vZGUpIHtcbiAgICBjb25zdCBzdG10UmVzdWx0ID0gc3RtdFJlc3VsdEZyb21Qcm90byhyZXN1bHQpO1xuICAgIGxldCB2YWx1ZTtcbiAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID4gMCAmJiBzdG10UmVzdWx0LmNvbHVtbk5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZUZyb21Qcm90byhyZXN1bHQucm93c1swXVswXSwgaW50TW9kZSk7XG4gICAgfVxuICAgIHJldHVybiB7IC4uLnN0bXRSZXN1bHQsIHZhbHVlIH07XG59XG5mdW5jdGlvbiByb3dGcm9tUHJvdG8oY29sTmFtZXMsIHZhbHVlcywgaW50TW9kZSkge1xuICAgIGNvbnN0IHJvdyA9IHt9O1xuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdywgXCJsZW5ndGhcIiwgeyB2YWx1ZTogdmFsdWVzLmxlbmd0aCB9KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlRnJvbVByb3RvKHZhbHVlc1tpXSwgaW50TW9kZSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3csIGksIHsgdmFsdWUgfSk7XG4gICAgICAgIGNvbnN0IGNvbE5hbWUgPSBjb2xOYW1lc1tpXTtcbiAgICAgICAgaWYgKGNvbE5hbWUgIT09IHVuZGVmaW5lZCAmJiAhT2JqZWN0Lmhhc093bihyb3csIGNvbE5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm93LCBjb2xOYW1lLCB7IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb3c7XG59XG5leHBvcnQgZnVuY3Rpb24gZXJyb3JGcm9tUHJvdG8oZXJyb3IpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlRXJyb3IoZXJyb3IubWVzc2FnZSwgZXJyb3IpO1xufVxuIiwgImltcG9ydCB7IENsaWVudEVycm9yLCBDbG9zZWRFcnJvciwgTWlzdXNlRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbi8qKiBUZXh0IG9mIGFuIFNRTCBzdGF0ZW1lbnQgY2FjaGVkIG9uIHRoZSBzZXJ2ZXIuICovXG5leHBvcnQgY2xhc3MgU3FsIHtcbiAgICAjb3duZXI7XG4gICAgI3NxbElkO1xuICAgICNjbG9zZWQ7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3Iob3duZXIsIHNxbElkKSB7XG4gICAgICAgIHRoaXMuI293bmVyID0gb3duZXI7XG4gICAgICAgIHRoaXMuI3NxbElkID0gc3FsSWQ7XG4gICAgICAgIHRoaXMuI2Nsb3NlZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2dldFNxbElkKG93bmVyKSB7XG4gICAgICAgIGlmICh0aGlzLiNvd25lciAhPT0gb3duZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXN1c2VFcnJvcihcIkF0dGVtcHRlZCB0byB1c2UgU1FMIHRleHQgb3BlbmVkIHdpdGggb3RoZXIgb2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ2xvc2VkRXJyb3IoXCJTUUwgdGV4dCBpcyBjbG9zZWRcIiwgdGhpcy4jY2xvc2VkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy4jc3FsSWQ7XG4gICAgfVxuICAgIC8qKiBSZW1vdmUgdGhlIFNRTCB0ZXh0IGZyb20gdGhlIHNlcnZlciwgcmVsZWFzaW5nIHJlc291Y2VzLiAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9zZXRDbG9zZWQobmV3IENsaWVudEVycm9yKFwiU1FMIHRleHQgd2FzIG1hbnVhbGx5IGNsb3NlZFwiKSk7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9zZXRDbG9zZWQoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Nsb3NlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLiNjbG9zZWQgPSBlcnJvcjtcbiAgICAgICAgICAgIHRoaXMuI293bmVyLl9jbG9zZVNxbCh0aGlzLiNzcWxJZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlIFNRTCB0ZXh0IGlzIGNsb3NlZCAocmVtb3ZlZCBmcm9tIHRoZSBzZXJ2ZXIpLiAqL1xuICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc3FsVG9Qcm90byhvd25lciwgc3FsKSB7XG4gICAgaWYgKHNxbCBpbnN0YW5jZW9mIFNxbCkge1xuICAgICAgICByZXR1cm4geyBzcWxJZDogc3FsLl9nZXRTcWxJZChvd25lcikgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHNxbDogXCJcIiArIHNxbCB9O1xuICAgIH1cbn1cbiIsICJleHBvcnQgY2xhc3MgUXVldWUge1xuICAgICNwdXNoU3RhY2s7XG4gICAgI3NoaWZ0U3RhY2s7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI3B1c2hTdGFjayA9IFtdO1xuICAgICAgICB0aGlzLiNzaGlmdFN0YWNrID0gW107XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwdXNoU3RhY2subGVuZ3RoICsgdGhpcy4jc2hpZnRTdGFjay5sZW5ndGg7XG4gICAgfVxuICAgIHB1c2goZWxlbSkge1xuICAgICAgICB0aGlzLiNwdXNoU3RhY2sucHVzaChlbGVtKTtcbiAgICB9XG4gICAgc2hpZnQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzaGlmdFN0YWNrLmxlbmd0aCA9PT0gMCAmJiB0aGlzLiNwdXNoU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy4jc2hpZnRTdGFjayA9IHRoaXMuI3B1c2hTdGFjay5yZXZlcnNlKCk7XG4gICAgICAgICAgICB0aGlzLiNwdXNoU3RhY2sgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy4jc2hpZnRTdGFjay5wb3AoKTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzaGlmdFN0YWNrLmxlbmd0aCAhPT0gMFxuICAgICAgICAgICAgPyB0aGlzLiNzaGlmdFN0YWNrW3RoaXMuI3NoaWZ0U3RhY2subGVuZ3RoIC0gMV1cbiAgICAgICAgICAgIDogdGhpcy4jcHVzaFN0YWNrWzBdO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBzcWxUb1Byb3RvIH0gZnJvbSBcIi4vc3FsLmpzXCI7XG5pbXBvcnQgeyB2YWx1ZVRvUHJvdG8gfSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuLyoqIEEgc3RhdGVtZW50IHRoYXQgY2FuIGJlIGV2YWx1YXRlZCBieSB0aGUgZGF0YWJhc2UuIEJlc2lkZXMgdGhlIFNRTCB0ZXh0LCBpdCBhbHNvIGNvbnRhaW5zIHRoZSBwb3NpdGlvbmFsXG4gKiBhbmQgbmFtZWQgYXJndW1lbnRzLiAqL1xuZXhwb3J0IGNsYXNzIFN0bXQge1xuICAgIC8qKiBUaGUgU1FMIHN0YXRlbWVudCB0ZXh0LiAqL1xuICAgIHNxbDtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfYXJncztcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfbmFtZWRBcmdzO1xuICAgIC8qKiBJbml0aWFsaXplIHRoZSBzdGF0ZW1lbnQgd2l0aCBnaXZlbiBTUUwgdGV4dC4gKi9cbiAgICBjb25zdHJ1Y3RvcihzcWwpIHtcbiAgICAgICAgdGhpcy5zcWwgPSBzcWw7XG4gICAgICAgIHRoaXMuX2FyZ3MgPSBbXTtcbiAgICAgICAgdGhpcy5fbmFtZWRBcmdzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKiogQmluZHMgcG9zaXRpb25hbCBwYXJhbWV0ZXJzIGZyb20gdGhlIGdpdmVuIGB2YWx1ZXNgLiBBbGwgcHJldmlvdXMgcG9zaXRpb25hbCBiaW5kaW5ncyBhcmUgY2xlYXJlZC4gKi9cbiAgICBiaW5kSW5kZXhlcyh2YWx1ZXMpIHtcbiAgICAgICAgdGhpcy5fYXJncy5sZW5ndGggPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgdGhpcy5fYXJncy5wdXNoKHZhbHVlVG9Qcm90byh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQmluZHMgYSBwYXJhbWV0ZXIgYnkgYSAxLWJhc2VkIGluZGV4LiAqL1xuICAgIGJpbmRJbmRleChpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAoaW5kZXggfCAwKSB8fCBpbmRleCA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG9mIGEgcG9zaXRpb25hbCBhcmd1bWVudCBtdXN0IGJlIHBvc2l0aXZlIGludGVnZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMuX2FyZ3MubGVuZ3RoIDwgaW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX2FyZ3MucHVzaChudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcmdzW2luZGV4IC0gMV0gPSB2YWx1ZVRvUHJvdG8odmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEJpbmRzIGEgcGFyYW1ldGVyIGJ5IG5hbWUuICovXG4gICAgYmluZE5hbWUobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZWRBcmdzLnNldChuYW1lLCB2YWx1ZVRvUHJvdG8odmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBDbGVhcnMgYWxsIGJpbmRpbmdzLiAqL1xuICAgIHVuYmluZEFsbCgpIHtcbiAgICAgICAgdGhpcy5fYXJncy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9uYW1lZEFyZ3MuY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHN0bXRUb1Byb3RvKHNxbE93bmVyLCBzdG10LCB3YW50Um93cykge1xuICAgIGxldCBpblNxbDtcbiAgICBsZXQgYXJncyA9IFtdO1xuICAgIGxldCBuYW1lZEFyZ3MgPSBbXTtcbiAgICBpZiAoc3RtdCBpbnN0YW5jZW9mIFN0bXQpIHtcbiAgICAgICAgaW5TcWwgPSBzdG10LnNxbDtcbiAgICAgICAgYXJncyA9IHN0bXQuX2FyZ3M7XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBzdG10Ll9uYW1lZEFyZ3MuZW50cmllcygpKSB7XG4gICAgICAgICAgICBuYW1lZEFyZ3MucHVzaCh7IG5hbWUsIHZhbHVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc3RtdCkpIHtcbiAgICAgICAgaW5TcWwgPSBzdG10WzBdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdG10WzFdKSkge1xuICAgICAgICAgICAgYXJncyA9IHN0bXRbMV0ubWFwKChhcmcpID0+IHZhbHVlVG9Qcm90byhhcmcpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5hbWVkQXJncyA9IE9iamVjdC5lbnRyaWVzKHN0bXRbMV0pLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIHZhbHVlOiB2YWx1ZVRvUHJvdG8odmFsdWUpIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW5TcWwgPSBzdG10O1xuICAgIH1cbiAgICBjb25zdCB7IHNxbCwgc3FsSWQgfSA9IHNxbFRvUHJvdG8oc3FsT3duZXIsIGluU3FsKTtcbiAgICByZXR1cm4geyBzcWwsIHNxbElkLCBhcmdzLCBuYW1lZEFyZ3MsIHdhbnRSb3dzIH07XG59XG4iLCAiaW1wb3J0IHsgUHJvdG9FcnJvciwgTWlzdXNlRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHN0bXRSZXN1bHRGcm9tUHJvdG8sIHJvd3NSZXN1bHRGcm9tUHJvdG8sIHJvd1Jlc3VsdEZyb21Qcm90bywgdmFsdWVSZXN1bHRGcm9tUHJvdG8sIGVycm9yRnJvbVByb3RvLCB9IGZyb20gXCIuL3Jlc3VsdC5qc1wiO1xuaW1wb3J0IHsgc3RtdFRvUHJvdG8gfSBmcm9tIFwiLi9zdG10LmpzXCI7XG5pbXBvcnQgeyBpbXBvc3NpYmxlIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuLyoqIEEgYnVpbGRlciBmb3IgY3JlYXRpbmcgYSBiYXRjaCBhbmQgZXhlY3V0aW5nIGl0IG9uIHRoZSBzZXJ2ZXIuICovXG5leHBvcnQgY2xhc3MgQmF0Y2gge1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9zdHJlYW07XG4gICAgI3VzZUN1cnNvcjtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfc3RlcHM7XG4gICAgI2V4ZWN1dGVkO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKHN0cmVhbSwgdXNlQ3Vyc29yKSB7XG4gICAgICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgdGhpcy4jdXNlQ3Vyc29yID0gdXNlQ3Vyc29yO1xuICAgICAgICB0aGlzLl9zdGVwcyA9IFtdO1xuICAgICAgICB0aGlzLiNleGVjdXRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKiogUmV0dXJuIGEgYnVpbGRlciBmb3IgYWRkaW5nIGEgc3RlcCB0byB0aGUgYmF0Y2guICovXG4gICAgc3RlcCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCYXRjaFN0ZXAodGhpcyk7XG4gICAgfVxuICAgIC8qKiBFeGVjdXRlIHRoZSBiYXRjaC4gKi9cbiAgICBleGVjdXRlKCkge1xuICAgICAgICBpZiAodGhpcy4jZXhlY3V0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXN1c2VFcnJvcihcIlRoaXMgYmF0Y2ggaGFzIGFscmVhZHkgYmVlbiBleGVjdXRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNleGVjdXRlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGJhdGNoID0ge1xuICAgICAgICAgICAgc3RlcHM6IHRoaXMuX3N0ZXBzLm1hcCgoc3RlcCkgPT4gc3RlcC5wcm90byksXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLiN1c2VDdXJzb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlQ3Vyc29yKHRoaXMuX3N0cmVhbSwgdGhpcy5fc3RlcHMsIGJhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVndWxhcih0aGlzLl9zdHJlYW0sIHRoaXMuX3N0ZXBzLCBiYXRjaCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBleGVjdXRlUmVndWxhcihzdHJlYW0sIHN0ZXBzLCBiYXRjaCkge1xuICAgIHJldHVybiBzdHJlYW0uX2JhdGNoKGJhdGNoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgZm9yIChsZXQgc3RlcCA9IDA7IHN0ZXAgPCBzdGVwcy5sZW5ndGg7ICsrc3RlcCkge1xuICAgICAgICAgICAgY29uc3Qgc3RlcFJlc3VsdCA9IHJlc3VsdC5zdGVwUmVzdWx0cy5nZXQoc3RlcCk7XG4gICAgICAgICAgICBjb25zdCBzdGVwRXJyb3IgPSByZXN1bHQuc3RlcEVycm9ycy5nZXQoc3RlcCk7XG4gICAgICAgICAgICBzdGVwc1tzdGVwXS5jYWxsYmFjayhzdGVwUmVzdWx0LCBzdGVwRXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBleGVjdXRlQ3Vyc29yKHN0cmVhbSwgc3RlcHMsIGJhdGNoKSB7XG4gICAgY29uc3QgY3Vyc29yID0gYXdhaXQgc3RyZWFtLl9vcGVuQ3Vyc29yKGJhdGNoKTtcbiAgICB0cnkge1xuICAgICAgICBsZXQgbmV4dFN0ZXAgPSAwO1xuICAgICAgICBsZXQgYmVnaW5FbnRyeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHJvd3MgPSBbXTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBhd2FpdCBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInN0ZXBfYmVnaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5zdGVwIDwgbmV4dFN0ZXAgfHwgZW50cnkuc3RlcCA+PSBzdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJTZXJ2ZXIgcHJvZHVjZWQgU3RlcEJlZ2luRW50cnkgZm9yIHVuZXhwZWN0ZWQgc3RlcFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmVnaW5FbnRyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKFwiU2VydmVyIHByb2R1Y2VkIFN0ZXBCZWdpbkVudHJ5IGJlZm9yZSB0ZXJtaW5hdGluZyBwcmV2aW91cyBzdGVwXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzdGVwID0gbmV4dFN0ZXA7IHN0ZXAgPCBlbnRyeS5zdGVwOyArK3N0ZXApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RlcHNbc3RlcF0uY2FsbGJhY2sodW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0U3RlcCA9IGVudHJ5LnN0ZXAgKyAxO1xuICAgICAgICAgICAgICAgIGJlZ2luRW50cnkgPSBlbnRyeTtcbiAgICAgICAgICAgICAgICByb3dzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInN0ZXBfZW5kXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmVnaW5FbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKFwiU2VydmVyIHByb2R1Y2VkIFN0ZXBFbmRFbnRyeSBidXQgbm8gc3RlcCBpcyBhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0bXRSZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHM6IGJlZ2luRW50cnkuY29scyxcbiAgICAgICAgICAgICAgICAgICAgcm93cyxcbiAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWRSb3dDb3VudDogZW50cnkuYWZmZWN0ZWRSb3dDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgbGFzdEluc2VydFJvd2lkOiBlbnRyeS5sYXN0SW5zZXJ0Um93aWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzdGVwc1tiZWdpbkVudHJ5LnN0ZXBdLmNhbGxiYWNrKHN0bXRSZXN1bHQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgYmVnaW5FbnRyeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICByb3dzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInN0ZXBfZXJyb3JcIikge1xuICAgICAgICAgICAgICAgIGlmIChiZWdpbkVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LnN0ZXAgPj0gc3RlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlNlcnZlciBwcm9kdWNlZCBTdGVwRXJyb3JFbnRyeSBmb3IgdW5leHBlY3RlZCBzdGVwXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHN0ZXAgPSBuZXh0U3RlcDsgc3RlcCA8IGVudHJ5LnN0ZXA7ICsrc3RlcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcHNbc3RlcF0uY2FsbGJhY2sodW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuc3RlcCAhPT0gYmVnaW5FbnRyeS5zdGVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlNlcnZlciBwcm9kdWNlZCBTdGVwRXJyb3JFbnRyeSBmb3IgdW5leHBlY3RlZCBzdGVwXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luRW50cnkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RlcHNbZW50cnkuc3RlcF0uY2FsbGJhY2sodW5kZWZpbmVkLCBlbnRyeS5lcnJvcik7XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXAgPSBlbnRyeS5zdGVwICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwicm93XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmVnaW5FbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKFwiU2VydmVyIHByb2R1Y2VkIFJvd0VudHJ5IGJ1dCBubyBzdGVwIGlzIGFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm93cy5wdXNoKGVudHJ5LnJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZyb21Qcm90byhlbnRyeS5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKFwiU2VydmVyIHByb2R1Y2VkIHVucmVjb2duaXplZCBDdXJzb3JFbnRyeVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGltcG9zc2libGUoZW50cnksIFwiSW1wb3NzaWJsZSBDdXJzb3JFbnRyeVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYmVnaW5FbnRyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlNlcnZlciBjbG9zZWQgQ3Vyc29yIGJlZm9yZSB0ZXJtaW5hdGluZyBhY3RpdmUgc3RlcFwiKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBzdGVwID0gbmV4dFN0ZXA7IHN0ZXAgPCBzdGVwcy5sZW5ndGg7ICsrc3RlcCkge1xuICAgICAgICAgICAgc3RlcHNbc3RlcF0uY2FsbGJhY2sodW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBjdXJzb3IuY2xvc2UoKTtcbiAgICB9XG59XG4vKiogQSBidWlsZGVyIGZvciBhZGRpbmcgYSBzdGVwIHRvIHRoZSBiYXRjaC4gKi9cbmV4cG9ydCBjbGFzcyBCYXRjaFN0ZXAge1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9iYXRjaDtcbiAgICAjY29uZHM7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2luZGV4O1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKGJhdGNoKSB7XG4gICAgICAgIHRoaXMuX2JhdGNoID0gYmF0Y2g7XG4gICAgICAgIHRoaXMuI2NvbmRzID0gW107XG4gICAgICAgIHRoaXMuX2luZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogQWRkIHRoZSBjb25kaXRpb24gdGhhdCBuZWVkcyB0byBiZSBzYXRpc2ZpZWQgdG8gZXhlY3V0ZSB0aGUgc3RhdGVtZW50LiBJZiB5b3UgdXNlIHRoaXMgbWV0aG9kIG11bHRpcGxlXG4gICAgICogdGltZXMsIHdlIGpvaW4gdGhlIGNvbmRpdGlvbnMgd2l0aCBhIGxvZ2ljYWwgQU5ELiAqL1xuICAgIGNvbmRpdGlvbihjb25kKSB7XG4gICAgICAgIHRoaXMuI2NvbmRzLnB1c2goY29uZC5fcHJvdG8pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEFkZCBhIHN0YXRlbWVudCB0aGF0IHJldHVybnMgcm93cy4gKi9cbiAgICBxdWVyeShzdG10KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNhZGQoc3RtdCwgdHJ1ZSwgcm93c1Jlc3VsdEZyb21Qcm90byk7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBzdGF0ZW1lbnQgdGhhdCByZXR1cm5zIGF0IG1vc3QgYSBzaW5nbGUgcm93LiAqL1xuICAgIHF1ZXJ5Um93KHN0bXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FkZChzdG10LCB0cnVlLCByb3dSZXN1bHRGcm9tUHJvdG8pO1xuICAgIH1cbiAgICAvKiogQWRkIGEgc3RhdGVtZW50IHRoYXQgcmV0dXJucyBhdCBtb3N0IGEgc2luZ2xlIHZhbHVlLiAqL1xuICAgIHF1ZXJ5VmFsdWUoc3RtdCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYWRkKHN0bXQsIHRydWUsIHZhbHVlUmVzdWx0RnJvbVByb3RvKTtcbiAgICB9XG4gICAgLyoqIEFkZCBhIHN0YXRlbWVudCB3aXRob3V0IHJldHVybmluZyByb3dzLiAqL1xuICAgIHJ1bihzdG10KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNhZGQoc3RtdCwgZmFsc2UsIHN0bXRSZXN1bHRGcm9tUHJvdG8pO1xuICAgIH1cbiAgICAjYWRkKGluU3RtdCwgd2FudFJvd3MsIGZyb21Qcm90bykge1xuICAgICAgICBpZiAodGhpcy5faW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3VzZUVycm9yKFwiVGhpcyBCYXRjaFN0ZXAgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCB0byB0aGUgYmF0Y2hcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RtdCA9IHN0bXRUb1Byb3RvKHRoaXMuX2JhdGNoLl9zdHJlYW0uX3NxbE93bmVyKCksIGluU3RtdCwgd2FudFJvd3MpO1xuICAgICAgICBsZXQgY29uZGl0aW9uO1xuICAgICAgICBpZiAodGhpcy4jY29uZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25kaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jY29uZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25kaXRpb24gPSB0aGlzLiNjb25kc1swXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IHsgdHlwZTogXCJhbmRcIiwgY29uZHM6IHRoaXMuI2NvbmRzLnNsaWNlKCkgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm90byA9IHsgc3RtdCwgY29uZGl0aW9uIH07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgob3V0cHV0Q2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKHN0ZXBSZXN1bHQsIHN0ZXBFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGVwUmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgc3RlcEVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayhuZXcgUHJvdG9FcnJvcihcIlNlcnZlciByZXR1cm5lZCBib3RoIHJlc3VsdCBhbmQgZXJyb3JcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGVwRXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKGVycm9yRnJvbVByb3RvKHN0ZXBFcnJvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGVwUmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Q2FsbGJhY2soZnJvbVByb3RvKHN0ZXBSZXN1bHQsIHRoaXMuX2JhdGNoLl9zdHJlYW0uaW50TW9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Q2FsbGJhY2sodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5faW5kZXggPSB0aGlzLl9iYXRjaC5fc3RlcHMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5fYmF0Y2guX3N0ZXBzLnB1c2goeyBwcm90bywgY2FsbGJhY2sgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXRjaENvbmQge1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9iYXRjaDtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfcHJvdG87XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoYmF0Y2gsIHByb3RvKSB7XG4gICAgICAgIHRoaXMuX2JhdGNoID0gYmF0Y2g7XG4gICAgICAgIHRoaXMuX3Byb3RvID0gcHJvdG87XG4gICAgfVxuICAgIC8qKiBDcmVhdGUgYSBjb25kaXRpb24gdGhhdCBldmFsdWF0ZXMgdG8gdHJ1ZSB3aGVuIHRoZSBnaXZlbiBzdGVwIGV4ZWN1dGVzIHN1Y2Nlc3NmdWxseS5cbiAgICAgKlxuICAgICAqIElmIHRoZSBnaXZlbiBzdGVwIGZhaWxzIGVycm9yIG9yIGlzIHNraXBwZWQgYmVjYXVzZSBpdHMgY29uZGl0aW9uIGV2YWx1YXRlZCB0byBmYWxzZSwgdGhpc1xuICAgICAqIGNvbmRpdGlvbiBldmFsdWF0ZXMgdG8gZmFsc2UuXG4gICAgICovXG4gICAgc3RhdGljIG9rKHN0ZXApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCYXRjaENvbmQoc3RlcC5fYmF0Y2gsIHsgdHlwZTogXCJva1wiLCBzdGVwOiBzdGVwSW5kZXgoc3RlcCkgfSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGUgYSBjb25kaXRpb24gdGhhdCBldmFsdWF0ZXMgdG8gdHJ1ZSB3aGVuIHRoZSBnaXZlbiBzdGVwIGZhaWxzLlxuICAgICAqXG4gICAgICogSWYgdGhlIGdpdmVuIHN0ZXAgc3VjY2VlZHMgb3IgaXMgc2tpcHBlZCBiZWNhdXNlIGl0cyBjb25kaXRpb24gZXZhbHVhdGVkIHRvIGZhbHNlLCB0aGlzIGNvbmRpdGlvblxuICAgICAqIGV2YWx1YXRlcyB0byBmYWxzZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZXJyb3Ioc3RlcCkge1xuICAgICAgICByZXR1cm4gbmV3IEJhdGNoQ29uZChzdGVwLl9iYXRjaCwgeyB0eXBlOiBcImVycm9yXCIsIHN0ZXA6IHN0ZXBJbmRleChzdGVwKSB9KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZSBhIGNvbmRpdGlvbiB0aGF0IGlzIGEgbG9naWNhbCBuZWdhdGlvbiBvZiBhbm90aGVyIGNvbmRpdGlvbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgbm90KGNvbmQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCYXRjaENvbmQoY29uZC5fYmF0Y2gsIHsgdHlwZTogXCJub3RcIiwgY29uZDogY29uZC5fcHJvdG8gfSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGUgYSBjb25kaXRpb24gdGhhdCBpcyBhIGxvZ2ljYWwgQU5EIG9mIG90aGVyIGNvbmRpdGlvbnMuXG4gICAgICovXG4gICAgc3RhdGljIGFuZChiYXRjaCwgY29uZHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb25kIG9mIGNvbmRzKSB7XG4gICAgICAgICAgICBjaGVja0NvbmRCYXRjaChiYXRjaCwgY29uZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCYXRjaENvbmQoYmF0Y2gsIHsgdHlwZTogXCJhbmRcIiwgY29uZHM6IGNvbmRzLm1hcChlID0+IGUuX3Byb3RvKSB9KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZSBhIGNvbmRpdGlvbiB0aGF0IGlzIGEgbG9naWNhbCBPUiBvZiBvdGhlciBjb25kaXRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBvcihiYXRjaCwgY29uZHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb25kIG9mIGNvbmRzKSB7XG4gICAgICAgICAgICBjaGVja0NvbmRCYXRjaChiYXRjaCwgY29uZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCYXRjaENvbmQoYmF0Y2gsIHsgdHlwZTogXCJvclwiLCBjb25kczogY29uZHMubWFwKGUgPT4gZS5fcHJvdG8pIH0pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGEgY29uZGl0aW9uIHRoYXQgZXZhbHVhdGVzIHRvIHRydWUgd2hlbiB0aGUgU1FMIGNvbm5lY3Rpb24gaXMgaW4gYXV0b2NvbW1pdCBtb2RlIChub3QgaW5zaWRlIGFuXG4gICAgICogZXhwbGljaXQgdHJhbnNhY3Rpb24pLiBUaGlzIHJlcXVpcmVzIHByb3RvY29sIHZlcnNpb24gMyBvciBoaWdoZXIuXG4gICAgICovXG4gICAgc3RhdGljIGlzQXV0b2NvbW1pdChiYXRjaCkge1xuICAgICAgICBiYXRjaC5fc3RyZWFtLmNsaWVudCgpLl9lbnN1cmVWZXJzaW9uKDMsIFwiQmF0Y2hDb25kLmlzQXV0b2NvbW1pdCgpXCIpO1xuICAgICAgICByZXR1cm4gbmV3IEJhdGNoQ29uZChiYXRjaCwgeyB0eXBlOiBcImlzX2F1dG9jb21taXRcIiB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBzdGVwSW5kZXgoc3RlcCkge1xuICAgIGlmIChzdGVwLl9pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBNaXN1c2VFcnJvcihcIkNhbm5vdCBhZGQgYSBjb25kaXRpb24gcmVmZXJlbmNpbmcgYSBzdGVwIHRoYXQgaGFzIG5vdCBiZWVuIGFkZGVkIHRvIHRoZSBiYXRjaFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0ZXAuX2luZGV4O1xufVxuZnVuY3Rpb24gY2hlY2tDb25kQmF0Y2goZXhwZWN0ZWRCYXRjaCwgY29uZCkge1xuICAgIGlmIChjb25kLl9iYXRjaCAhPT0gZXhwZWN0ZWRCYXRjaCkge1xuICAgICAgICB0aHJvdyBuZXcgTWlzdXNlRXJyb3IoXCJDYW5ub3QgbWl4IEJhdGNoQ29uZCBvYmplY3RzIGZvciBkaWZmZXJlbnQgQmF0Y2ggb2JqZWN0c1wiKTtcbiAgICB9XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGRlc2NyaWJlUmVzdWx0RnJvbVByb3RvKHJlc3VsdCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHBhcmFtTmFtZXM6IHJlc3VsdC5wYXJhbXMubWFwKChwKSA9PiBwLm5hbWUpLFxuICAgICAgICBjb2x1bW5zOiByZXN1bHQuY29scyxcbiAgICAgICAgaXNFeHBsYWluOiByZXN1bHQuaXNFeHBsYWluLFxuICAgICAgICBpc1JlYWRvbmx5OiByZXN1bHQuaXNSZWFkb25seSxcbiAgICB9O1xufVxuIiwgImltcG9ydCB7IEJhdGNoIH0gZnJvbSBcIi4vYmF0Y2guanNcIjtcbmltcG9ydCB7IGRlc2NyaWJlUmVzdWx0RnJvbVByb3RvIH0gZnJvbSBcIi4vZGVzY3JpYmUuanNcIjtcbmltcG9ydCB7IHN0bXRSZXN1bHRGcm9tUHJvdG8sIHJvd3NSZXN1bHRGcm9tUHJvdG8sIHJvd1Jlc3VsdEZyb21Qcm90bywgdmFsdWVSZXN1bHRGcm9tUHJvdG8sIH0gZnJvbSBcIi4vcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBzcWxUb1Byb3RvIH0gZnJvbSBcIi4vc3FsLmpzXCI7XG5pbXBvcnQgeyBzdG10VG9Qcm90byB9IGZyb20gXCIuL3N0bXQuanNcIjtcbi8qKiBBIHN0cmVhbSBmb3IgZXhlY3V0aW5nIFNRTCBzdGF0ZW1lbnRzIChhIFwiZGF0YWJhc2UgY29ubmVjdGlvblwiKS4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW0ge1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKGludE1vZGUpIHtcbiAgICAgICAgdGhpcy5pbnRNb2RlID0gaW50TW9kZTtcbiAgICB9XG4gICAgLyoqIEV4ZWN1dGUgYSBzdGF0ZW1lbnQgYW5kIHJldHVybiByb3dzLiAqL1xuICAgIHF1ZXJ5KHN0bXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4ZWN1dGUoc3RtdCwgdHJ1ZSwgcm93c1Jlc3VsdEZyb21Qcm90byk7XG4gICAgfVxuICAgIC8qKiBFeGVjdXRlIGEgc3RhdGVtZW50IGFuZCByZXR1cm4gYXQgbW9zdCBhIHNpbmdsZSByb3cuICovXG4gICAgcXVlcnlSb3coc3RtdCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXhlY3V0ZShzdG10LCB0cnVlLCByb3dSZXN1bHRGcm9tUHJvdG8pO1xuICAgIH1cbiAgICAvKiogRXhlY3V0ZSBhIHN0YXRlbWVudCBhbmQgcmV0dXJuIGF0IG1vc3QgYSBzaW5nbGUgdmFsdWUuICovXG4gICAgcXVlcnlWYWx1ZShzdG10KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNleGVjdXRlKHN0bXQsIHRydWUsIHZhbHVlUmVzdWx0RnJvbVByb3RvKTtcbiAgICB9XG4gICAgLyoqIEV4ZWN1dGUgYSBzdGF0ZW1lbnQgd2l0aG91dCByZXR1cm5pbmcgcm93cy4gKi9cbiAgICBydW4oc3RtdCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXhlY3V0ZShzdG10LCBmYWxzZSwgc3RtdFJlc3VsdEZyb21Qcm90byk7XG4gICAgfVxuICAgICNleGVjdXRlKGluU3RtdCwgd2FudFJvd3MsIGZyb21Qcm90bykge1xuICAgICAgICBjb25zdCBzdG10ID0gc3RtdFRvUHJvdG8odGhpcy5fc3FsT3duZXIoKSwgaW5TdG10LCB3YW50Um93cyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9leGVjdXRlKHN0bXQpLnRoZW4oKHIpID0+IGZyb21Qcm90byhyLCB0aGlzLmludE1vZGUpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybiBhIGJ1aWxkZXIgZm9yIGNyZWF0aW5nIGFuZCBleGVjdXRpbmcgYSBiYXRjaC5cbiAgICAgKlxuICAgICAqIElmIGB1c2VDdXJzb3JgIGlzIHRydWUsIHRoZSBiYXRjaCB3aWxsIGJlIGV4ZWN1dGVkIHVzaW5nIGEgSHJhbmEgY3Vyc29yLCB3aGljaCB3aWxsIHN0cmVhbSByZXN1bHRzIGZyb21cbiAgICAgKiB0aGUgc2VydmVyIHRvIHRoZSBjbGllbnQsIHdoaWNoIGNvbnN1bWVzIGxlc3MgbWVtb3J5IG9uIHRoZSBzZXJ2ZXIuIFRoaXMgcmVxdWlyZXMgcHJvdG9jb2wgdmVyc2lvbiAzIG9yXG4gICAgICogaGlnaGVyLlxuICAgICAqL1xuICAgIGJhdGNoKHVzZUN1cnNvciA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmF0Y2godGhpcywgdXNlQ3Vyc29yKTtcbiAgICB9XG4gICAgLyoqIFBhcnNlIGFuZCBhbmFseXplIGEgc3RhdGVtZW50LiBUaGlzIHJlcXVpcmVzIHByb3RvY29sIHZlcnNpb24gMiBvciBoaWdoZXIuICovXG4gICAgZGVzY3JpYmUoaW5TcWwpIHtcbiAgICAgICAgY29uc3QgcHJvdG9TcWwgPSBzcWxUb1Byb3RvKHRoaXMuX3NxbE93bmVyKCksIGluU3FsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaWJlKHByb3RvU3FsKS50aGVuKGRlc2NyaWJlUmVzdWx0RnJvbVByb3RvKTtcbiAgICB9XG4gICAgLyoqIEV4ZWN1dGUgYSBzZXF1ZW5jZSBvZiBzdGF0ZW1lbnRzIHNlcGFyYXRlZCBieSBzZW1pY29sb25zLiBUaGlzIHJlcXVpcmVzIHByb3RvY29sIHZlcnNpb24gMiBvciBoaWdoZXIuXG4gICAgICogKi9cbiAgICBzZXF1ZW5jZShpblNxbCkge1xuICAgICAgICBjb25zdCBwcm90b1NxbCA9IHNxbFRvUHJvdG8odGhpcy5fc3FsT3duZXIoKSwgaW5TcWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VxdWVuY2UocHJvdG9TcWwpO1xuICAgIH1cbiAgICAvKiogUmVwcmVzZW50YXRpb24gb2YgaW50ZWdlcnMgcmV0dXJuZWQgZnJvbSB0aGUgZGF0YWJhc2UuIFNlZSB7QGxpbmsgSW50TW9kZX0uXG4gICAgICpcbiAgICAgKiBUaGlzIHZhbHVlIGFmZmVjdHMgdGhlIHJlc3VsdHMgb2YgYWxsIG9wZXJhdGlvbnMgb24gdGhpcyBzdHJlYW0uXG4gICAgICovXG4gICAgaW50TW9kZTtcbn1cbiIsICJleHBvcnQgY2xhc3MgQ3Vyc29yIHtcbn1cbiIsICJpbXBvcnQgeyBDbGllbnRFcnJvciwgQ2xvc2VkRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tIFwiLi4vY3Vyc29yLmpzXCI7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gXCIuLi9xdWV1ZS5qc1wiO1xuY29uc3QgZmV0Y2hDaHVua1NpemUgPSAxMDAwO1xuY29uc3QgZmV0Y2hRdWV1ZVNpemUgPSAxMDtcbmV4cG9ydCBjbGFzcyBXc0N1cnNvciBleHRlbmRzIEN1cnNvciB7XG4gICAgI2NsaWVudDtcbiAgICAjc3RyZWFtO1xuICAgICNjdXJzb3JJZDtcbiAgICAjZW50cnlRdWV1ZTtcbiAgICAjZmV0Y2hRdWV1ZTtcbiAgICAjY2xvc2VkO1xuICAgICNkb25lO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCwgc3RyZWFtLCBjdXJzb3JJZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLiNjbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIHRoaXMuI3N0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgdGhpcy4jY3Vyc29ySWQgPSBjdXJzb3JJZDtcbiAgICAgICAgdGhpcy4jZW50cnlRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICB0aGlzLiNmZXRjaFF1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIHRoaXMuI2Nsb3NlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy4jZG9uZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKiogRmV0Y2ggdGhlIG5leHQgZW50cnkgZnJvbSB0aGUgY3Vyc29yLiAqL1xuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDbG9zZWRFcnJvcihcIkN1cnNvciBpcyBjbG9zZWRcIiwgdGhpcy4jY2xvc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICghdGhpcy4jZG9uZSAmJiB0aGlzLiNmZXRjaFF1ZXVlLmxlbmd0aCA8IGZldGNoUXVldWVTaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jZmV0Y2hRdWV1ZS5wdXNoKHRoaXMuI2ZldGNoKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLiNlbnRyeVF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy4jZG9uZSB8fCBlbnRyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgYXNzdW1lIHRoYXQgYEN1cnNvci5uZXh0KClgIGlzIG5ldmVyIGNhbGxlZCBjb25jdXJyZW50bHlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2ZldGNoUXVldWUuc2hpZnQoKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByZXNwb25zZS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2VudHJ5UXVldWUucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuI2RvbmUgfHw9IHJlc3BvbnNlLmRvbmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjZmV0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdHJlYW0uX3NlbmRDdXJzb3JSZXF1ZXN0KHRoaXMsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiZmV0Y2hfY3Vyc29yXCIsXG4gICAgICAgICAgICBjdXJzb3JJZDogdGhpcy4jY3Vyc29ySWQsXG4gICAgICAgICAgICBtYXhDb3VudDogZmV0Y2hDaHVua1NpemUsXG4gICAgICAgIH0pLnRoZW4oKHJlc3ApID0+IHJlc3AsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2V0Q2xvc2VkKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfc2V0Q2xvc2VkKGVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Nsb3NlZCA9IGVycm9yO1xuICAgICAgICB0aGlzLiNzdHJlYW0uX3NlbmRDdXJzb3JSZXF1ZXN0KHRoaXMsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiY2xvc2VfY3Vyc29yXCIsXG4gICAgICAgICAgICBjdXJzb3JJZDogdGhpcy4jY3Vyc29ySWQsXG4gICAgICAgIH0pLmNhdGNoKCgpID0+IHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuI3N0cmVhbS5fY3Vyc29yQ2xvc2VkKHRoaXMpO1xuICAgIH1cbiAgICAvKiogQ2xvc2UgdGhlIGN1cnNvci4gKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fc2V0Q2xvc2VkKG5ldyBDbGllbnRFcnJvcihcIkN1cnNvciB3YXMgbWFudWFsbHkgY2xvc2VkXCIpKTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlIGN1cnNvciBpcyBjbG9zZWQuICovXG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBDbGllbnRFcnJvciwgQ2xvc2VkRXJyb3IsIEludGVybmFsRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gXCIuLi9xdWV1ZS5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgV3NDdXJzb3IgfSBmcm9tIFwiLi9jdXJzb3IuanNcIjtcbmV4cG9ydCBjbGFzcyBXc1N0cmVhbSBleHRlbmRzIFN0cmVhbSB7XG4gICAgI2NsaWVudDtcbiAgICAjc3RyZWFtSWQ7XG4gICAgI3F1ZXVlO1xuICAgICNjdXJzb3I7XG4gICAgI2Nsb3Npbmc7XG4gICAgI2Nsb3NlZDtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBzdGF0aWMgb3BlbihjbGllbnQpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtSWQgPSBjbGllbnQuX3N0cmVhbUlkQWxsb2MuYWxsb2MoKTtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gbmV3IFdzU3RyZWFtKGNsaWVudCwgc3RyZWFtSWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZUNhbGxiYWNrID0gKCkgPT4gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBlcnJvckNhbGxiYWNrID0gKGUpID0+IHN0cmVhbS4jc2V0Q2xvc2VkKGUpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0geyB0eXBlOiBcIm9wZW5fc3RyZWFtXCIsIHN0cmVhbUlkIH07XG4gICAgICAgIGNsaWVudC5fc2VuZFJlcXVlc3QocmVxdWVzdCwgeyByZXNwb25zZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrIH0pO1xuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIHN0cmVhbUlkKSB7XG4gICAgICAgIHN1cGVyKGNsaWVudC5pbnRNb2RlKTtcbiAgICAgICAgdGhpcy4jY2xpZW50ID0gY2xpZW50O1xuICAgICAgICB0aGlzLiNzdHJlYW1JZCA9IHN0cmVhbUlkO1xuICAgICAgICB0aGlzLiNxdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICB0aGlzLiNjdXJzb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuI2Nsb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4jY2xvc2VkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogR2V0IHRoZSB7QGxpbmsgV3NDbGllbnR9IG9iamVjdCB0aGF0IHRoaXMgc3RyZWFtIGJlbG9uZ3MgdG8uICovXG4gICAgY2xpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY2xpZW50O1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfc3FsT3duZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjbGllbnQ7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9leGVjdXRlKHN0bXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmRTdHJlYW1SZXF1ZXN0KHtcbiAgICAgICAgICAgIHR5cGU6IFwiZXhlY3V0ZVwiLFxuICAgICAgICAgICAgc3RyZWFtSWQ6IHRoaXMuI3N0cmVhbUlkLFxuICAgICAgICAgICAgc3RtdCxcbiAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfYmF0Y2goYmF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmRTdHJlYW1SZXF1ZXN0KHtcbiAgICAgICAgICAgIHR5cGU6IFwiYmF0Y2hcIixcbiAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLiNzdHJlYW1JZCxcbiAgICAgICAgICAgIGJhdGNoLFxuICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9kZXNjcmliZShwcm90b1NxbCkge1xuICAgICAgICB0aGlzLiNjbGllbnQuX2Vuc3VyZVZlcnNpb24oMiwgXCJkZXNjcmliZSgpXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy4jc2VuZFN0cmVhbVJlcXVlc3Qoe1xuICAgICAgICAgICAgdHlwZTogXCJkZXNjcmliZVwiLFxuICAgICAgICAgICAgc3RyZWFtSWQ6IHRoaXMuI3N0cmVhbUlkLFxuICAgICAgICAgICAgc3FsOiBwcm90b1NxbC5zcWwsXG4gICAgICAgICAgICBzcWxJZDogcHJvdG9TcWwuc3FsSWQsXG4gICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3NlcXVlbmNlKHByb3RvU3FsKSB7XG4gICAgICAgIHRoaXMuI2NsaWVudC5fZW5zdXJlVmVyc2lvbigyLCBcInNlcXVlbmNlKClcIik7XG4gICAgICAgIHJldHVybiB0aGlzLiNzZW5kU3RyZWFtUmVxdWVzdCh7XG4gICAgICAgICAgICB0eXBlOiBcInNlcXVlbmNlXCIsXG4gICAgICAgICAgICBzdHJlYW1JZDogdGhpcy4jc3RyZWFtSWQsXG4gICAgICAgICAgICBzcWw6IHByb3RvU3FsLnNxbCxcbiAgICAgICAgICAgIHNxbElkOiBwcm90b1NxbC5zcWxJZCxcbiAgICAgICAgfSkudGhlbigoX3Jlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIENoZWNrIHdoZXRoZXIgdGhlIFNRTCBjb25uZWN0aW9uIHVuZGVybHlpbmcgdGhpcyBzdHJlYW0gaXMgaW4gYXV0b2NvbW1pdCBzdGF0ZSAoaS5lLiwgb3V0c2lkZSBvZiBhblxuICAgICAqIGV4cGxpY2l0IHRyYW5zYWN0aW9uKS4gVGhpcyByZXF1aXJlcyBwcm90b2NvbCB2ZXJzaW9uIDMgb3IgaGlnaGVyLlxuICAgICAqL1xuICAgIGdldEF1dG9jb21taXQoKSB7XG4gICAgICAgIHRoaXMuI2NsaWVudC5fZW5zdXJlVmVyc2lvbigzLCBcImdldEF1dG9jb21taXQoKVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmRTdHJlYW1SZXF1ZXN0KHtcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0X2F1dG9jb21taXRcIixcbiAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLiNzdHJlYW1JZCxcbiAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5pc0F1dG9jb21taXQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAjc2VuZFN0cmVhbVJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3B1c2hUb1F1ZXVlKHsgdHlwZTogXCJyZXF1ZXN0XCIsIHJlcXVlc3QsIHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfb3BlbkN1cnNvcihiYXRjaCkge1xuICAgICAgICB0aGlzLiNjbGllbnQuX2Vuc3VyZVZlcnNpb24oMywgXCJjdXJzb3JcIik7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoY3Vyc29yQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3B1c2hUb1F1ZXVlKHsgdHlwZTogXCJjdXJzb3JcIiwgYmF0Y2gsIGN1cnNvckNhbGxiYWNrLCBlcnJvckNhbGxiYWNrIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3NlbmRDdXJzb3JSZXF1ZXN0KGN1cnNvciwgcmVxdWVzdCkge1xuICAgICAgICBpZiAoY3Vyc29yICE9PSB0aGlzLiNjdXJzb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEVycm9yKFwiQ3Vyc29yIG5vdCBhc3NvY2lhdGVkIHdpdGggdGhlIHN0cmVhbSBhdHRlbXB0ZWQgdG8gZXhlY3V0ZSBhIHJlcXVlc3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNwb25zZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKG5ldyBDbG9zZWRFcnJvcihcIlN0cmVhbSBpcyBjbG9zZWRcIiwgdGhpcy4jY2xvc2VkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjbGllbnQuX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIHsgcmVzcG9uc2VDYWxsYmFjaywgZXJyb3JDYWxsYmFjayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9jdXJzb3JDbG9zZWQoY3Vyc29yKSB7XG4gICAgICAgIGlmIChjdXJzb3IgIT09IHRoaXMuI2N1cnNvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXJyb3IoXCJDdXJzb3Igd2FzIGNsb3NlZCwgYnV0IGl0IHdhcyBub3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdHJlYW1cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY3Vyc29yID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiNmbHVzaFF1ZXVlKCk7XG4gICAgfVxuICAgICNwdXNoVG9RdWV1ZShlbnRyeSkge1xuICAgICAgICBpZiAodGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVudHJ5LmVycm9yQ2FsbGJhY2sobmV3IENsb3NlZEVycm9yKFwiU3RyZWFtIGlzIGNsb3NlZFwiLCB0aGlzLiNjbG9zZWQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNjbG9zaW5nKSB7XG4gICAgICAgICAgICBlbnRyeS5lcnJvckNhbGxiYWNrKG5ldyBDbG9zZWRFcnJvcihcIlN0cmVhbSBpcyBjbG9zaW5nXCIsIHVuZGVmaW5lZCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4jcXVldWUucHVzaChlbnRyeSk7XG4gICAgICAgICAgICB0aGlzLiNmbHVzaFF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgI2ZsdXNoUXVldWUoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy4jcXVldWUuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkICYmIHRoaXMuI2N1cnNvciA9PT0gdW5kZWZpbmVkICYmIHRoaXMuI2Nsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXRDbG9zZWQobmV3IENsaWVudEVycm9yKFwiU3RyZWFtIHdhcyBncmFjZWZ1bGx5IGNsb3NlZFwiKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeT8udHlwZSA9PT0gXCJyZXF1ZXN0XCIgJiYgdGhpcy4jY3Vyc29yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHJlcXVlc3QsIHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sgfSA9IGVudHJ5O1xuICAgICAgICAgICAgICAgIHRoaXMuI3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY2xpZW50Ll9zZW5kUmVxdWVzdChyZXF1ZXN0LCB7IHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeT8udHlwZSA9PT0gXCJjdXJzb3JcIiAmJiB0aGlzLiNjdXJzb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYmF0Y2gsIGN1cnNvckNhbGxiYWNrIH0gPSBlbnRyeTtcbiAgICAgICAgICAgICAgICB0aGlzLiNxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvcklkID0gdGhpcy4jY2xpZW50Ll9jdXJzb3JJZEFsbG9jLmFsbG9jKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gbmV3IFdzQ3Vyc29yKHRoaXMuI2NsaWVudCwgdGhpcywgY3Vyc29ySWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3Blbl9jdXJzb3JcIixcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtSWQ6IHRoaXMuI3N0cmVhbUlkLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3JJZCxcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2gsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUNhbGxiYWNrID0gKCkgPT4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yQ2FsbGJhY2sgPSAoZSkgPT4gY3Vyc29yLl9zZXRDbG9zZWQoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY2xpZW50Ll9zZW5kUmVxdWVzdChyZXF1ZXN0LCB7IHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3Vyc29yID0gY3Vyc29yO1xuICAgICAgICAgICAgICAgIGN1cnNvckNhbGxiYWNrKGN1cnNvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAjc2V0Q2xvc2VkKGVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Nsb3NlZCA9IGVycm9yO1xuICAgICAgICBpZiAodGhpcy4jY3Vyc29yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuI2N1cnNvci5fc2V0Q2xvc2VkKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuI3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoZW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGVudHJ5LmVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsgdHlwZTogXCJjbG9zZV9zdHJlYW1cIiwgc3RyZWFtSWQ6IHRoaXMuI3N0cmVhbUlkIH07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQ2FsbGJhY2sgPSAoKSA9PiB0aGlzLiNjbGllbnQuX3N0cmVhbUlkQWxsb2MuZnJlZSh0aGlzLiNzdHJlYW1JZCk7XG4gICAgICAgIGNvbnN0IGVycm9yQ2FsbGJhY2sgPSAoKSA9PiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuI2NsaWVudC5fc2VuZFJlcXVlc3QocmVxdWVzdCwgeyByZXNwb25zZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrIH0pO1xuICAgIH1cbiAgICAvKiogSW1tZWRpYXRlbHkgY2xvc2UgdGhlIHN0cmVhbS4gKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc2V0Q2xvc2VkKG5ldyBDbGllbnRFcnJvcihcIlN0cmVhbSB3YXMgbWFudWFsbHkgY2xvc2VkXCIpKTtcbiAgICB9XG4gICAgLyoqIEdyYWNlZnVsbHkgY2xvc2UgdGhlIHN0cmVhbS4gKi9cbiAgICBjbG9zZUdyYWNlZnVsbHkoKSB7XG4gICAgICAgIHRoaXMuI2Nsb3NpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLiNmbHVzaFF1ZXVlKCk7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIG9yIGNsb3NpbmcuICovXG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkIHx8IHRoaXMuI2Nsb3Npbmc7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJhc2U2NCB9IGZyb20gXCJqcy1iYXNlNjRcIjtcbmltcG9ydCB7IGltcG9zc2libGUgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIFN0bXQodywgbXNnKSB7XG4gICAgaWYgKG1zZy5zcWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3LnN0cmluZyhcInNxbFwiLCBtc2cuc3FsKTtcbiAgICB9XG4gICAgaWYgKG1zZy5zcWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHcubnVtYmVyKFwic3FsX2lkXCIsIG1zZy5zcWxJZCk7XG4gICAgfVxuICAgIHcuYXJyYXlPYmplY3RzKFwiYXJnc1wiLCBtc2cuYXJncywgVmFsdWUpO1xuICAgIHcuYXJyYXlPYmplY3RzKFwibmFtZWRfYXJnc1wiLCBtc2cubmFtZWRBcmdzLCBOYW1lZEFyZyk7XG4gICAgdy5ib29sZWFuKFwid2FudF9yb3dzXCIsIG1zZy53YW50Um93cyk7XG59XG5mdW5jdGlvbiBOYW1lZEFyZyh3LCBtc2cpIHtcbiAgICB3LnN0cmluZyhcIm5hbWVcIiwgbXNnLm5hbWUpO1xuICAgIHcub2JqZWN0KFwidmFsdWVcIiwgbXNnLnZhbHVlLCBWYWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gQmF0Y2godywgbXNnKSB7XG4gICAgdy5hcnJheU9iamVjdHMoXCJzdGVwc1wiLCBtc2cuc3RlcHMsIEJhdGNoU3RlcCk7XG59XG5mdW5jdGlvbiBCYXRjaFN0ZXAodywgbXNnKSB7XG4gICAgaWYgKG1zZy5jb25kaXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3Lm9iamVjdChcImNvbmRpdGlvblwiLCBtc2cuY29uZGl0aW9uLCBCYXRjaENvbmQpO1xuICAgIH1cbiAgICB3Lm9iamVjdChcInN0bXRcIiwgbXNnLnN0bXQsIFN0bXQpO1xufVxuZnVuY3Rpb24gQmF0Y2hDb25kKHcsIG1zZykge1xuICAgIHcuc3RyaW5nUmF3KFwidHlwZVwiLCBtc2cudHlwZSk7XG4gICAgaWYgKG1zZy50eXBlID09PSBcIm9rXCIgfHwgbXNnLnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICB3Lm51bWJlcihcInN0ZXBcIiwgbXNnLnN0ZXApO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJub3RcIikge1xuICAgICAgICB3Lm9iamVjdChcImNvbmRcIiwgbXNnLmNvbmQsIEJhdGNoQ29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImFuZFwiIHx8IG1zZy50eXBlID09PSBcIm9yXCIpIHtcbiAgICAgICAgdy5hcnJheU9iamVjdHMoXCJjb25kc1wiLCBtc2cuY29uZHMsIEJhdGNoQ29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImlzX2F1dG9jb21taXRcIikge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKG1zZywgXCJJbXBvc3NpYmxlIHR5cGUgb2YgQmF0Y2hDb25kXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIFZhbHVlKHcsIG1zZykge1xuICAgIGlmIChtc2cgPT09IG51bGwpIHtcbiAgICAgICAgdy5zdHJpbmdSYXcoXCJ0eXBlXCIsIFwibnVsbFwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG1zZyA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICB3LnN0cmluZ1JhdyhcInR5cGVcIiwgXCJpbnRlZ2VyXCIpO1xuICAgICAgICB3LnN0cmluZ1JhdyhcInZhbHVlXCIsIFwiXCIgKyBtc2cpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbXNnID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHcuc3RyaW5nUmF3KFwidHlwZVwiLCBcImZsb2F0XCIpO1xuICAgICAgICB3Lm51bWJlcihcInZhbHVlXCIsIG1zZyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBtc2cgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdy5zdHJpbmdSYXcoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgdy5zdHJpbmcoXCJ2YWx1ZVwiLCBtc2cpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIHcuc3RyaW5nUmF3KFwidHlwZVwiLCBcImJsb2JcIik7XG4gICAgICAgIHcuc3RyaW5nUmF3KFwiYmFzZTY0XCIsIEJhc2U2NC5mcm9tVWludDhBcnJheShtc2cpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShtc2csIFwiSW1wb3NzaWJsZSB0eXBlIG9mIFZhbHVlXCIpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTdG10LCBCYXRjaCB9IGZyb20gXCIuLi9zaGFyZWQvanNvbl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IGltcG9zc2libGUgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIENsaWVudE1zZyh3LCBtc2cpIHtcbiAgICB3LnN0cmluZ1JhdyhcInR5cGVcIiwgbXNnLnR5cGUpO1xuICAgIGlmIChtc2cudHlwZSA9PT0gXCJoZWxsb1wiKSB7XG4gICAgICAgIGlmIChtc2cuand0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHcuc3RyaW5nKFwiand0XCIsIG1zZy5qd3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcInJlcXVlc3RcIikge1xuICAgICAgICB3Lm51bWJlcihcInJlcXVlc3RfaWRcIiwgbXNnLnJlcXVlc3RJZCk7XG4gICAgICAgIHcub2JqZWN0KFwicmVxdWVzdFwiLCBtc2cucmVxdWVzdCwgUmVxdWVzdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKG1zZywgXCJJbXBvc3NpYmxlIHR5cGUgb2YgQ2xpZW50TXNnXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIFJlcXVlc3QodywgbXNnKSB7XG4gICAgdy5zdHJpbmdSYXcoXCJ0eXBlXCIsIG1zZy50eXBlKTtcbiAgICBpZiAobXNnLnR5cGUgPT09IFwib3Blbl9zdHJlYW1cIikge1xuICAgICAgICB3Lm51bWJlcihcInN0cmVhbV9pZFwiLCBtc2cuc3RyZWFtSWQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJjbG9zZV9zdHJlYW1cIikge1xuICAgICAgICB3Lm51bWJlcihcInN0cmVhbV9pZFwiLCBtc2cuc3RyZWFtSWQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJleGVjdXRlXCIpIHtcbiAgICAgICAgdy5udW1iZXIoXCJzdHJlYW1faWRcIiwgbXNnLnN0cmVhbUlkKTtcbiAgICAgICAgdy5vYmplY3QoXCJzdG10XCIsIG1zZy5zdG10LCBTdG10KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiYmF0Y2hcIikge1xuICAgICAgICB3Lm51bWJlcihcInN0cmVhbV9pZFwiLCBtc2cuc3RyZWFtSWQpO1xuICAgICAgICB3Lm9iamVjdChcImJhdGNoXCIsIG1zZy5iYXRjaCwgQmF0Y2gpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJvcGVuX2N1cnNvclwiKSB7XG4gICAgICAgIHcubnVtYmVyKFwic3RyZWFtX2lkXCIsIG1zZy5zdHJlYW1JZCk7XG4gICAgICAgIHcubnVtYmVyKFwiY3Vyc29yX2lkXCIsIG1zZy5jdXJzb3JJZCk7XG4gICAgICAgIHcub2JqZWN0KFwiYmF0Y2hcIiwgbXNnLmJhdGNoLCBCYXRjaCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImNsb3NlX2N1cnNvclwiKSB7XG4gICAgICAgIHcubnVtYmVyKFwiY3Vyc29yX2lkXCIsIG1zZy5jdXJzb3JJZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImZldGNoX2N1cnNvclwiKSB7XG4gICAgICAgIHcubnVtYmVyKFwiY3Vyc29yX2lkXCIsIG1zZy5jdXJzb3JJZCk7XG4gICAgICAgIHcubnVtYmVyKFwibWF4X2NvdW50XCIsIG1zZy5tYXhDb3VudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcInNlcXVlbmNlXCIpIHtcbiAgICAgICAgdy5udW1iZXIoXCJzdHJlYW1faWRcIiwgbXNnLnN0cmVhbUlkKTtcbiAgICAgICAgaWYgKG1zZy5zcWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdy5zdHJpbmcoXCJzcWxcIiwgbXNnLnNxbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1zZy5zcWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3Lm51bWJlcihcInNxbF9pZFwiLCBtc2cuc3FsSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImRlc2NyaWJlXCIpIHtcbiAgICAgICAgdy5udW1iZXIoXCJzdHJlYW1faWRcIiwgbXNnLnN0cmVhbUlkKTtcbiAgICAgICAgaWYgKG1zZy5zcWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdy5zdHJpbmcoXCJzcWxcIiwgbXNnLnNxbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1zZy5zcWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3Lm51bWJlcihcInNxbF9pZFwiLCBtc2cuc3FsSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcInN0b3JlX3NxbFwiKSB7XG4gICAgICAgIHcubnVtYmVyKFwic3FsX2lkXCIsIG1zZy5zcWxJZCk7XG4gICAgICAgIHcuc3RyaW5nKFwic3FsXCIsIG1zZy5zcWwpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJjbG9zZV9zcWxcIikge1xuICAgICAgICB3Lm51bWJlcihcInNxbF9pZFwiLCBtc2cuc3FsSWQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJnZXRfYXV0b2NvbW1pdFwiKSB7XG4gICAgICAgIHcubnVtYmVyKFwic3RyZWFtX2lkXCIsIG1zZy5zdHJlYW1JZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKG1zZywgXCJJbXBvc3NpYmxlIHR5cGUgb2YgUmVxdWVzdFwiKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgaW1wb3NzaWJsZSB9IGZyb20gXCIuLi91dGlsLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gU3RtdCh3LCBtc2cpIHtcbiAgICBpZiAobXNnLnNxbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHcuc3RyaW5nKDEsIG1zZy5zcWwpO1xuICAgIH1cbiAgICBpZiAobXNnLnNxbElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdy5pbnQzMigyLCBtc2cuc3FsSWQpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFyZyBvZiBtc2cuYXJncykge1xuICAgICAgICB3Lm1lc3NhZ2UoMywgYXJnLCBWYWx1ZSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYXJnIG9mIG1zZy5uYW1lZEFyZ3MpIHtcbiAgICAgICAgdy5tZXNzYWdlKDQsIGFyZywgTmFtZWRBcmcpO1xuICAgIH1cbiAgICB3LmJvb2woNSwgbXNnLndhbnRSb3dzKTtcbn1cbmZ1bmN0aW9uIE5hbWVkQXJnKHcsIG1zZykge1xuICAgIHcuc3RyaW5nKDEsIG1zZy5uYW1lKTtcbiAgICB3Lm1lc3NhZ2UoMiwgbXNnLnZhbHVlLCBWYWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gQmF0Y2godywgbXNnKSB7XG4gICAgZm9yIChjb25zdCBzdGVwIG9mIG1zZy5zdGVwcykge1xuICAgICAgICB3Lm1lc3NhZ2UoMSwgc3RlcCwgQmF0Y2hTdGVwKTtcbiAgICB9XG59XG5mdW5jdGlvbiBCYXRjaFN0ZXAodywgbXNnKSB7XG4gICAgaWYgKG1zZy5jb25kaXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3Lm1lc3NhZ2UoMSwgbXNnLmNvbmRpdGlvbiwgQmF0Y2hDb25kKTtcbiAgICB9XG4gICAgdy5tZXNzYWdlKDIsIG1zZy5zdG10LCBTdG10KTtcbn1cbmZ1bmN0aW9uIEJhdGNoQ29uZCh3LCBtc2cpIHtcbiAgICBpZiAobXNnLnR5cGUgPT09IFwib2tcIikge1xuICAgICAgICB3LnVpbnQzMigxLCBtc2cuc3RlcCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgdy51aW50MzIoMiwgbXNnLnN0ZXApO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJub3RcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoMywgbXNnLmNvbmQsIEJhdGNoQ29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImFuZFwiKSB7XG4gICAgICAgIHcubWVzc2FnZSg0LCBtc2cuY29uZHMsIEJhdGNoQ29uZExpc3QpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJvclwiKSB7XG4gICAgICAgIHcubWVzc2FnZSg1LCBtc2cuY29uZHMsIEJhdGNoQ29uZExpc3QpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJpc19hdXRvY29tbWl0XCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDYsIHVuZGVmaW5lZCwgRW1wdHkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShtc2csIFwiSW1wb3NzaWJsZSB0eXBlIG9mIEJhdGNoQ29uZFwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBCYXRjaENvbmRMaXN0KHcsIG1zZykge1xuICAgIGZvciAoY29uc3QgY29uZCBvZiBtc2cpIHtcbiAgICAgICAgdy5tZXNzYWdlKDEsIGNvbmQsIEJhdGNoQ29uZCk7XG4gICAgfVxufVxuZnVuY3Rpb24gVmFsdWUodywgbXNnKSB7XG4gICAgaWYgKG1zZyA9PT0gbnVsbCkge1xuICAgICAgICB3Lm1lc3NhZ2UoMSwgdW5kZWZpbmVkLCBFbXB0eSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBtc2cgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgdy5zaW50NjQoMiwgbXNnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG1zZyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICB3LmRvdWJsZSgzLCBtc2cpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbXNnID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHcuc3RyaW5nKDQsIG1zZyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgdy5ieXRlcyg1LCBtc2cpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKG1zZywgXCJJbXBvc3NpYmxlIHR5cGUgb2YgVmFsdWVcIik7XG4gICAgfVxufVxuZnVuY3Rpb24gRW1wdHkoX3csIF9tc2cpIHtcbiAgICAvLyBkbyBub3RoaW5nXG59XG4iLCAiaW1wb3J0IHsgU3RtdCwgQmF0Y2ggfSBmcm9tIFwiLi4vc2hhcmVkL3Byb3RvYnVmX2VuY29kZS5qc1wiO1xuaW1wb3J0IHsgaW1wb3NzaWJsZSB9IGZyb20gXCIuLi91dGlsLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gQ2xpZW50TXNnKHcsIG1zZykge1xuICAgIGlmIChtc2cudHlwZSA9PT0gXCJoZWxsb1wiKSB7XG4gICAgICAgIHcubWVzc2FnZSgxLCBtc2csIEhlbGxvTXNnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwicmVxdWVzdFwiKSB7XG4gICAgICAgIHcubWVzc2FnZSgyLCBtc2csIFJlcXVlc3RNc2cpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShtc2csIFwiSW1wb3NzaWJsZSB0eXBlIG9mIENsaWVudE1zZ1wiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBIZWxsb01zZyh3LCBtc2cpIHtcbiAgICBpZiAobXNnLmp3dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHcuc3RyaW5nKDEsIG1zZy5qd3QpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIFJlcXVlc3RNc2codywgbXNnKSB7XG4gICAgdy5pbnQzMigxLCBtc2cucmVxdWVzdElkKTtcbiAgICBjb25zdCByZXF1ZXN0ID0gbXNnLnJlcXVlc3Q7XG4gICAgaWYgKHJlcXVlc3QudHlwZSA9PT0gXCJvcGVuX3N0cmVhbVwiKSB7XG4gICAgICAgIHcubWVzc2FnZSgyLCByZXF1ZXN0LCBPcGVuU3RyZWFtUmVxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVxdWVzdC50eXBlID09PSBcImNsb3NlX3N0cmVhbVwiKSB7XG4gICAgICAgIHcubWVzc2FnZSgzLCByZXF1ZXN0LCBDbG9zZVN0cmVhbVJlcSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlcXVlc3QudHlwZSA9PT0gXCJleGVjdXRlXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDQsIHJlcXVlc3QsIEV4ZWN1dGVSZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXF1ZXN0LnR5cGUgPT09IFwiYmF0Y2hcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoNSwgcmVxdWVzdCwgQmF0Y2hSZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXF1ZXN0LnR5cGUgPT09IFwib3Blbl9jdXJzb3JcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoNiwgcmVxdWVzdCwgT3BlbkN1cnNvclJlcSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlcXVlc3QudHlwZSA9PT0gXCJjbG9zZV9jdXJzb3JcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoNywgcmVxdWVzdCwgQ2xvc2VDdXJzb3JSZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXF1ZXN0LnR5cGUgPT09IFwiZmV0Y2hfY3Vyc29yXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDgsIHJlcXVlc3QsIEZldGNoQ3Vyc29yUmVxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVxdWVzdC50eXBlID09PSBcInNlcXVlbmNlXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDksIHJlcXVlc3QsIFNlcXVlbmNlUmVxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVxdWVzdC50eXBlID09PSBcImRlc2NyaWJlXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDEwLCByZXF1ZXN0LCBEZXNjcmliZVJlcSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlcXVlc3QudHlwZSA9PT0gXCJzdG9yZV9zcWxcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoMTEsIHJlcXVlc3QsIFN0b3JlU3FsUmVxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVxdWVzdC50eXBlID09PSBcImNsb3NlX3NxbFwiKSB7XG4gICAgICAgIHcubWVzc2FnZSgxMiwgcmVxdWVzdCwgQ2xvc2VTcWxSZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXF1ZXN0LnR5cGUgPT09IFwiZ2V0X2F1dG9jb21taXRcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoMTMsIHJlcXVlc3QsIEdldEF1dG9jb21taXRSZXEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShyZXF1ZXN0LCBcIkltcG9zc2libGUgdHlwZSBvZiBSZXF1ZXN0XCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIE9wZW5TdHJlYW1SZXEodywgbXNnKSB7XG4gICAgdy5pbnQzMigxLCBtc2cuc3RyZWFtSWQpO1xufVxuZnVuY3Rpb24gQ2xvc2VTdHJlYW1SZXEodywgbXNnKSB7XG4gICAgdy5pbnQzMigxLCBtc2cuc3RyZWFtSWQpO1xufVxuZnVuY3Rpb24gRXhlY3V0ZVJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zdHJlYW1JZCk7XG4gICAgdy5tZXNzYWdlKDIsIG1zZy5zdG10LCBTdG10KTtcbn1cbmZ1bmN0aW9uIEJhdGNoUmVxKHcsIG1zZykge1xuICAgIHcuaW50MzIoMSwgbXNnLnN0cmVhbUlkKTtcbiAgICB3Lm1lc3NhZ2UoMiwgbXNnLmJhdGNoLCBCYXRjaCk7XG59XG5mdW5jdGlvbiBPcGVuQ3Vyc29yUmVxKHcsIG1zZykge1xuICAgIHcuaW50MzIoMSwgbXNnLnN0cmVhbUlkKTtcbiAgICB3LmludDMyKDIsIG1zZy5jdXJzb3JJZCk7XG4gICAgdy5tZXNzYWdlKDMsIG1zZy5iYXRjaCwgQmF0Y2gpO1xufVxuZnVuY3Rpb24gQ2xvc2VDdXJzb3JSZXEodywgbXNnKSB7XG4gICAgdy5pbnQzMigxLCBtc2cuY3Vyc29ySWQpO1xufVxuZnVuY3Rpb24gRmV0Y2hDdXJzb3JSZXEodywgbXNnKSB7XG4gICAgdy5pbnQzMigxLCBtc2cuY3Vyc29ySWQpO1xuICAgIHcudWludDMyKDIsIG1zZy5tYXhDb3VudCk7XG59XG5mdW5jdGlvbiBTZXF1ZW5jZVJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zdHJlYW1JZCk7XG4gICAgaWYgKG1zZy5zcWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3LnN0cmluZygyLCBtc2cuc3FsKTtcbiAgICB9XG4gICAgaWYgKG1zZy5zcWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHcuaW50MzIoMywgbXNnLnNxbElkKTtcbiAgICB9XG59XG5mdW5jdGlvbiBEZXNjcmliZVJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zdHJlYW1JZCk7XG4gICAgaWYgKG1zZy5zcWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3LnN0cmluZygyLCBtc2cuc3FsKTtcbiAgICB9XG4gICAgaWYgKG1zZy5zcWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHcuaW50MzIoMywgbXNnLnNxbElkKTtcbiAgICB9XG59XG5mdW5jdGlvbiBTdG9yZVNxbFJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zcWxJZCk7XG4gICAgdy5zdHJpbmcoMiwgbXNnLnNxbCk7XG59XG5mdW5jdGlvbiBDbG9zZVNxbFJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zcWxJZCk7XG59XG5mdW5jdGlvbiBHZXRBdXRvY29tbWl0UmVxKHcsIG1zZykge1xuICAgIHcuaW50MzIoMSwgbXNnLnN0cmVhbUlkKTtcbn1cbiIsICJpbXBvcnQgeyBCYXNlNjQgfSBmcm9tIFwianMtYmFzZTY0XCI7XG5pbXBvcnQgeyBQcm90b0Vycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0ICogYXMgZCBmcm9tIFwiLi4vZW5jb2RpbmcvanNvbi9kZWNvZGUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBFcnJvcihvYmopIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZC5zdHJpbmcob2JqW1wibWVzc2FnZVwiXSk7XG4gICAgY29uc3QgY29kZSA9IGQuc3RyaW5nT3B0KG9ialtcImNvZGVcIl0pO1xuICAgIHJldHVybiB7IG1lc3NhZ2UsIGNvZGUgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBTdG10UmVzdWx0KG9iaikge1xuICAgIGNvbnN0IGNvbHMgPSBkLmFycmF5T2JqZWN0c01hcChvYmpbXCJjb2xzXCJdLCBDb2wpO1xuICAgIGNvbnN0IHJvd3MgPSBkLmFycmF5KG9ialtcInJvd3NcIl0pLm1hcCgocm93T2JqKSA9PiBkLmFycmF5T2JqZWN0c01hcChyb3dPYmosIFZhbHVlKSk7XG4gICAgY29uc3QgYWZmZWN0ZWRSb3dDb3VudCA9IGQubnVtYmVyKG9ialtcImFmZmVjdGVkX3Jvd19jb3VudFwiXSk7XG4gICAgY29uc3QgbGFzdEluc2VydFJvd2lkU3RyID0gZC5zdHJpbmdPcHQob2JqW1wibGFzdF9pbnNlcnRfcm93aWRcIl0pO1xuICAgIGNvbnN0IGxhc3RJbnNlcnRSb3dpZCA9IGxhc3RJbnNlcnRSb3dpZFN0ciAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gQmlnSW50KGxhc3RJbnNlcnRSb3dpZFN0cikgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHsgY29scywgcm93cywgYWZmZWN0ZWRSb3dDb3VudCwgbGFzdEluc2VydFJvd2lkIH07XG59XG5mdW5jdGlvbiBDb2wob2JqKSB7XG4gICAgY29uc3QgbmFtZSA9IGQuc3RyaW5nT3B0KG9ialtcIm5hbWVcIl0pO1xuICAgIGNvbnN0IGRlY2x0eXBlID0gZC5zdHJpbmdPcHQob2JqW1wiZGVjbHR5cGVcIl0pO1xuICAgIHJldHVybiB7IG5hbWUsIGRlY2x0eXBlIH07XG59XG5leHBvcnQgZnVuY3Rpb24gQmF0Y2hSZXN1bHQob2JqKSB7XG4gICAgY29uc3Qgc3RlcFJlc3VsdHMgPSBuZXcgTWFwKCk7XG4gICAgZC5hcnJheShvYmpbXCJzdGVwX3Jlc3VsdHNcIl0pLmZvckVhY2goKHZhbHVlLCBpKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc3RlcFJlc3VsdHMuc2V0KGksIFN0bXRSZXN1bHQoZC5vYmplY3QodmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBzdGVwRXJyb3JzID0gbmV3IE1hcCgpO1xuICAgIGQuYXJyYXkob2JqW1wic3RlcF9lcnJvcnNcIl0pLmZvckVhY2goKHZhbHVlLCBpKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc3RlcEVycm9ycy5zZXQoaSwgRXJyb3IoZC5vYmplY3QodmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4geyBzdGVwUmVzdWx0cywgc3RlcEVycm9ycyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIEN1cnNvckVudHJ5KG9iaikge1xuICAgIGNvbnN0IHR5cGUgPSBkLnN0cmluZyhvYmpbXCJ0eXBlXCJdKTtcbiAgICBpZiAodHlwZSA9PT0gXCJzdGVwX2JlZ2luXCIpIHtcbiAgICAgICAgY29uc3Qgc3RlcCA9IGQubnVtYmVyKG9ialtcInN0ZXBcIl0pO1xuICAgICAgICBjb25zdCBjb2xzID0gZC5hcnJheU9iamVjdHNNYXAob2JqW1wiY29sc1wiXSwgQ29sKTtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJzdGVwX2JlZ2luXCIsIHN0ZXAsIGNvbHMgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJzdGVwX2VuZFwiKSB7XG4gICAgICAgIGNvbnN0IGFmZmVjdGVkUm93Q291bnQgPSBkLm51bWJlcihvYmpbXCJhZmZlY3RlZF9yb3dfY291bnRcIl0pO1xuICAgICAgICBjb25zdCBsYXN0SW5zZXJ0Um93aWRTdHIgPSBkLnN0cmluZ09wdChvYmpbXCJsYXN0X2luc2VydF9yb3dpZFwiXSk7XG4gICAgICAgIGNvbnN0IGxhc3RJbnNlcnRSb3dpZCA9IGxhc3RJbnNlcnRSb3dpZFN0ciAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IEJpZ0ludChsYXN0SW5zZXJ0Um93aWRTdHIpIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcInN0ZXBfZW5kXCIsIGFmZmVjdGVkUm93Q291bnQsIGxhc3RJbnNlcnRSb3dpZCB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN0ZXBfZXJyb3JcIikge1xuICAgICAgICBjb25zdCBzdGVwID0gZC5udW1iZXIob2JqW1wic3RlcFwiXSk7XG4gICAgICAgIGNvbnN0IGVycm9yID0gRXJyb3IoZC5vYmplY3Qob2JqW1wiZXJyb3JcIl0pKTtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJzdGVwX2Vycm9yXCIsIHN0ZXAsIGVycm9yIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwicm93XCIpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gZC5hcnJheU9iamVjdHNNYXAob2JqW1wicm93XCJdLCBWYWx1ZSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwicm93XCIsIHJvdyB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBFcnJvcihkLm9iamVjdChvYmpbXCJlcnJvclwiXSkpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImVycm9yXCIsIGVycm9yIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBDdXJzb3JFbnRyeVwiKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gRGVzY3JpYmVSZXN1bHQob2JqKSB7XG4gICAgY29uc3QgcGFyYW1zID0gZC5hcnJheU9iamVjdHNNYXAob2JqW1wicGFyYW1zXCJdLCBEZXNjcmliZVBhcmFtKTtcbiAgICBjb25zdCBjb2xzID0gZC5hcnJheU9iamVjdHNNYXAob2JqW1wiY29sc1wiXSwgRGVzY3JpYmVDb2wpO1xuICAgIGNvbnN0IGlzRXhwbGFpbiA9IGQuYm9vbGVhbihvYmpbXCJpc19leHBsYWluXCJdKTtcbiAgICBjb25zdCBpc1JlYWRvbmx5ID0gZC5ib29sZWFuKG9ialtcImlzX3JlYWRvbmx5XCJdKTtcbiAgICByZXR1cm4geyBwYXJhbXMsIGNvbHMsIGlzRXhwbGFpbiwgaXNSZWFkb25seSB9O1xufVxuZnVuY3Rpb24gRGVzY3JpYmVQYXJhbShvYmopIHtcbiAgICBjb25zdCBuYW1lID0gZC5zdHJpbmdPcHQob2JqW1wibmFtZVwiXSk7XG4gICAgcmV0dXJuIHsgbmFtZSB9O1xufVxuZnVuY3Rpb24gRGVzY3JpYmVDb2wob2JqKSB7XG4gICAgY29uc3QgbmFtZSA9IGQuc3RyaW5nKG9ialtcIm5hbWVcIl0pO1xuICAgIGNvbnN0IGRlY2x0eXBlID0gZC5zdHJpbmdPcHQob2JqW1wiZGVjbHR5cGVcIl0pO1xuICAgIHJldHVybiB7IG5hbWUsIGRlY2x0eXBlIH07XG59XG5leHBvcnQgZnVuY3Rpb24gVmFsdWUob2JqKSB7XG4gICAgY29uc3QgdHlwZSA9IGQuc3RyaW5nKG9ialtcInR5cGVcIl0pO1xuICAgIGlmICh0eXBlID09PSBcIm51bGxcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJpbnRlZ2VyXCIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkLnN0cmluZyhvYmpbXCJ2YWx1ZVwiXSk7XG4gICAgICAgIHJldHVybiBCaWdJbnQodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImZsb2F0XCIpIHtcbiAgICAgICAgcmV0dXJuIGQubnVtYmVyKG9ialtcInZhbHVlXCJdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgcmV0dXJuIGQuc3RyaW5nKG9ialtcInZhbHVlXCJdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJibG9iXCIpIHtcbiAgICAgICAgcmV0dXJuIEJhc2U2NC50b1VpbnQ4QXJyYXkoZC5zdHJpbmcob2JqW1wiYmFzZTY0XCJdKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBWYWx1ZVwiKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUHJvdG9FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCAqIGFzIGQgZnJvbSBcIi4uL2VuY29kaW5nL2pzb24vZGVjb2RlLmpzXCI7XG5pbXBvcnQgeyBFcnJvciwgU3RtdFJlc3VsdCwgQmF0Y2hSZXN1bHQsIEN1cnNvckVudHJ5LCBEZXNjcmliZVJlc3VsdCB9IGZyb20gXCIuLi9zaGFyZWQvanNvbl9kZWNvZGUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBTZXJ2ZXJNc2cob2JqKSB7XG4gICAgY29uc3QgdHlwZSA9IGQuc3RyaW5nKG9ialtcInR5cGVcIl0pO1xuICAgIGlmICh0eXBlID09PSBcImhlbGxvX29rXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJoZWxsb19va1wiIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiaGVsbG9fZXJyb3JcIikge1xuICAgICAgICBjb25zdCBlcnJvciA9IEVycm9yKGQub2JqZWN0KG9ialtcImVycm9yXCJdKSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiaGVsbG9fZXJyb3JcIiwgZXJyb3IgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJyZXNwb25zZV9va1wiKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IGQubnVtYmVyKG9ialtcInJlcXVlc3RfaWRcIl0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IFJlc3BvbnNlKGQub2JqZWN0KG9ialtcInJlc3BvbnNlXCJdKSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwicmVzcG9uc2Vfb2tcIiwgcmVxdWVzdElkLCByZXNwb25zZSB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInJlc3BvbnNlX2Vycm9yXCIpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdElkID0gZC5udW1iZXIob2JqW1wicmVxdWVzdF9pZFwiXSk7XG4gICAgICAgIGNvbnN0IGVycm9yID0gRXJyb3IoZC5vYmplY3Qob2JqW1wiZXJyb3JcIl0pKTtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJyZXNwb25zZV9lcnJvclwiLCByZXF1ZXN0SWQsIGVycm9yIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBTZXJ2ZXJNc2dcIik7XG4gICAgfVxufVxuZnVuY3Rpb24gUmVzcG9uc2Uob2JqKSB7XG4gICAgY29uc3QgdHlwZSA9IGQuc3RyaW5nKG9ialtcInR5cGVcIl0pO1xuICAgIGlmICh0eXBlID09PSBcIm9wZW5fc3RyZWFtXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJvcGVuX3N0cmVhbVwiIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiY2xvc2Vfc3RyZWFtXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJjbG9zZV9zdHJlYW1cIiB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImV4ZWN1dGVcIikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBTdG10UmVzdWx0KGQub2JqZWN0KG9ialtcInJlc3VsdFwiXSkpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImV4ZWN1dGVcIiwgcmVzdWx0IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYmF0Y2hcIikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBCYXRjaFJlc3VsdChkLm9iamVjdChvYmpbXCJyZXN1bHRcIl0pKTtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJiYXRjaFwiLCByZXN1bHQgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJvcGVuX2N1cnNvclwiKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwib3Blbl9jdXJzb3JcIiB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImNsb3NlX2N1cnNvclwiKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiY2xvc2VfY3Vyc29yXCIgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJmZXRjaF9jdXJzb3JcIikge1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gZC5hcnJheU9iamVjdHNNYXAob2JqW1wiZW50cmllc1wiXSwgQ3Vyc29yRW50cnkpO1xuICAgICAgICBjb25zdCBkb25lID0gZC5ib29sZWFuKG9ialtcImRvbmVcIl0pO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImZldGNoX2N1cnNvclwiLCBlbnRyaWVzLCBkb25lIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic2VxdWVuY2VcIikge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcInNlcXVlbmNlXCIgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJkZXNjcmliZVwiKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IERlc2NyaWJlUmVzdWx0KGQub2JqZWN0KG9ialtcInJlc3VsdFwiXSkpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImRlc2NyaWJlXCIsIHJlc3VsdCB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN0b3JlX3NxbFwiKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwic3RvcmVfc3FsXCIgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjbG9zZV9zcWxcIikge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImNsb3NlX3NxbFwiIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiZ2V0X2F1dG9jb21taXRcIikge1xuICAgICAgICBjb25zdCBpc0F1dG9jb21taXQgPSBkLmJvb2xlYW4ob2JqW1wiaXNfYXV0b2NvbW1pdFwiXSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZ2V0X2F1dG9jb21taXRcIiwgaXNBdXRvY29tbWl0IH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBSZXNwb25zZVwiKTtcbiAgICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IEVycm9yID0ge1xuICAgIGRlZmF1bHQoKSB7IHJldHVybiB7IG1lc3NhZ2U6IFwiXCIsIGNvZGU6IHVuZGVmaW5lZCB9OyB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5tZXNzYWdlID0gci5zdHJpbmcoKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2cuY29kZSA9IHIuc3RyaW5nKCk7IH0sXG59O1xuZXhwb3J0IGNvbnN0IFN0bXRSZXN1bHQgPSB7XG4gICAgZGVmYXVsdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbHM6IFtdLFxuICAgICAgICAgICAgcm93czogW10sXG4gICAgICAgICAgICBhZmZlY3RlZFJvd0NvdW50OiAwLFxuICAgICAgICAgICAgbGFzdEluc2VydFJvd2lkOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICAxKHIsIG1zZykgeyBtc2cuY29scy5wdXNoKHIubWVzc2FnZShDb2wpKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2cucm93cy5wdXNoKHIubWVzc2FnZShSb3cpKTsgfSxcbiAgICAzKHIsIG1zZykgeyBtc2cuYWZmZWN0ZWRSb3dDb3VudCA9IE51bWJlcihyLnVpbnQ2NCgpKTsgfSxcbiAgICA0KHIsIG1zZykgeyBtc2cubGFzdEluc2VydFJvd2lkID0gci5zaW50NjQoKTsgfSxcbn07XG5jb25zdCBDb2wgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgbmFtZTogdW5kZWZpbmVkLCBkZWNsdHlwZTogdW5kZWZpbmVkIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLm5hbWUgPSByLnN0cmluZygpOyB9LFxuICAgIDIociwgbXNnKSB7IG1zZy5kZWNsdHlwZSA9IHIuc3RyaW5nKCk7IH0sXG59O1xuY29uc3QgUm93ID0ge1xuICAgIGRlZmF1bHQoKSB7IHJldHVybiBbXTsgfSxcbiAgICAxKHIsIG1zZykgeyBtc2cucHVzaChyLm1lc3NhZ2UoVmFsdWUpKTsgfSxcbn07XG5leHBvcnQgY29uc3QgQmF0Y2hSZXN1bHQgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgc3RlcFJlc3VsdHM6IG5ldyBNYXAoKSwgc3RlcEVycm9yczogbmV3IE1hcCgpIH07IH0sXG4gICAgMShyLCBtc2cpIHtcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gci5tZXNzYWdlKEJhdGNoUmVzdWx0U3RlcFJlc3VsdCk7XG4gICAgICAgIG1zZy5zdGVwUmVzdWx0cy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfSxcbiAgICAyKHIsIG1zZykge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSByLm1lc3NhZ2UoQmF0Y2hSZXN1bHRTdGVwRXJyb3IpO1xuICAgICAgICBtc2cuc3RlcEVycm9ycy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfSxcbn07XG5jb25zdCBCYXRjaFJlc3VsdFN0ZXBSZXN1bHQgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIFswLCBTdG10UmVzdWx0LmRlZmF1bHQoKV07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnWzBdID0gci51aW50MzIoKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2dbMV0gPSByLm1lc3NhZ2UoU3RtdFJlc3VsdCk7IH0sXG59O1xuY29uc3QgQmF0Y2hSZXN1bHRTdGVwRXJyb3IgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIFswLCBFcnJvci5kZWZhdWx0KCldOyB9LFxuICAgIDEociwgbXNnKSB7IG1zZ1swXSA9IHIudWludDMyKCk7IH0sXG4gICAgMihyLCBtc2cpIHsgbXNnWzFdID0gci5tZXNzYWdlKEVycm9yKTsgfSxcbn07XG5leHBvcnQgY29uc3QgQ3Vyc29yRW50cnkgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJub25lXCIgfTsgfSxcbiAgICAxKHIpIHsgcmV0dXJuIHIubWVzc2FnZShTdGVwQmVnaW5FbnRyeSk7IH0sXG4gICAgMihyKSB7IHJldHVybiByLm1lc3NhZ2UoU3RlcEVuZEVudHJ5KTsgfSxcbiAgICAzKHIpIHsgcmV0dXJuIHIubWVzc2FnZShTdGVwRXJyb3JFbnRyeSk7IH0sXG4gICAgNChyKSB7IHJldHVybiB7IHR5cGU6IFwicm93XCIsIHJvdzogci5tZXNzYWdlKFJvdykgfTsgfSxcbiAgICA1KHIpIHsgcmV0dXJuIHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogci5tZXNzYWdlKEVycm9yKSB9OyB9LFxufTtcbmNvbnN0IFN0ZXBCZWdpbkVudHJ5ID0ge1xuICAgIGRlZmF1bHQoKSB7IHJldHVybiB7IHR5cGU6IFwic3RlcF9iZWdpblwiLCBzdGVwOiAwLCBjb2xzOiBbXSB9OyB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5zdGVwID0gci51aW50MzIoKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2cuY29scy5wdXNoKHIubWVzc2FnZShDb2wpKTsgfSxcbn07XG5jb25zdCBTdGVwRW5kRW50cnkgPSB7XG4gICAgZGVmYXVsdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwic3RlcF9lbmRcIixcbiAgICAgICAgICAgIGFmZmVjdGVkUm93Q291bnQ6IDAsXG4gICAgICAgICAgICBsYXN0SW5zZXJ0Um93aWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5hZmZlY3RlZFJvd0NvdW50ID0gci51aW50MzIoKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2cubGFzdEluc2VydFJvd2lkID0gci51aW50NjQoKTsgfSxcbn07XG5jb25zdCBTdGVwRXJyb3JFbnRyeSA9IHtcbiAgICBkZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJzdGVwX2Vycm9yXCIsXG4gICAgICAgICAgICBzdGVwOiAwLFxuICAgICAgICAgICAgZXJyb3I6IEVycm9yLmRlZmF1bHQoKSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5zdGVwID0gci51aW50MzIoKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2cuZXJyb3IgPSByLm1lc3NhZ2UoRXJyb3IpOyB9LFxufTtcbmV4cG9ydCBjb25zdCBEZXNjcmliZVJlc3VsdCA9IHtcbiAgICBkZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFyYW1zOiBbXSxcbiAgICAgICAgICAgIGNvbHM6IFtdLFxuICAgICAgICAgICAgaXNFeHBsYWluOiBmYWxzZSxcbiAgICAgICAgICAgIGlzUmVhZG9ubHk6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLnBhcmFtcy5wdXNoKHIubWVzc2FnZShEZXNjcmliZVBhcmFtKSk7IH0sXG4gICAgMihyLCBtc2cpIHsgbXNnLmNvbHMucHVzaChyLm1lc3NhZ2UoRGVzY3JpYmVDb2wpKTsgfSxcbiAgICAzKHIsIG1zZykgeyBtc2cuaXNFeHBsYWluID0gci5ib29sKCk7IH0sXG4gICAgNChyLCBtc2cpIHsgbXNnLmlzUmVhZG9ubHkgPSByLmJvb2woKTsgfSxcbn07XG5jb25zdCBEZXNjcmliZVBhcmFtID0ge1xuICAgIGRlZmF1bHQoKSB7IHJldHVybiB7IG5hbWU6IHVuZGVmaW5lZCB9OyB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5uYW1lID0gci5zdHJpbmcoKTsgfSxcbn07XG5jb25zdCBEZXNjcmliZUNvbCA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyBuYW1lOiBcIlwiLCBkZWNsdHlwZTogdW5kZWZpbmVkIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLm5hbWUgPSByLnN0cmluZygpOyB9LFxuICAgIDIociwgbXNnKSB7IG1zZy5kZWNsdHlwZSA9IHIuc3RyaW5nKCk7IH0sXG59O1xuY29uc3QgVmFsdWUgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcbiAgICAxKHIpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgMihyKSB7IHJldHVybiByLnNpbnQ2NCgpOyB9LFxuICAgIDMocikgeyByZXR1cm4gci5kb3VibGUoKTsgfSxcbiAgICA0KHIpIHsgcmV0dXJuIHIuc3RyaW5nKCk7IH0sXG4gICAgNShyKSB7IHJldHVybiByLmJ5dGVzKCk7IH0sXG59O1xuIiwgImltcG9ydCB7IEVycm9yLCBTdG10UmVzdWx0LCBCYXRjaFJlc3VsdCwgQ3Vyc29yRW50cnksIERlc2NyaWJlUmVzdWx0IH0gZnJvbSBcIi4uL3NoYXJlZC9wcm90b2J1Zl9kZWNvZGUuanNcIjtcbmV4cG9ydCBjb25zdCBTZXJ2ZXJNc2cgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJub25lXCIgfTsgfSxcbiAgICAxKHIpIHsgcmV0dXJuIHsgdHlwZTogXCJoZWxsb19va1wiIH07IH0sXG4gICAgMihyKSB7IHJldHVybiByLm1lc3NhZ2UoSGVsbG9FcnJvck1zZyk7IH0sXG4gICAgMyhyKSB7IHJldHVybiByLm1lc3NhZ2UoUmVzcG9uc2VPa01zZyk7IH0sXG4gICAgNChyKSB7IHJldHVybiByLm1lc3NhZ2UoUmVzcG9uc2VFcnJvck1zZyk7IH0sXG59O1xuY29uc3QgSGVsbG9FcnJvck1zZyA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyB0eXBlOiBcImhlbGxvX2Vycm9yXCIsIGVycm9yOiBFcnJvci5kZWZhdWx0KCkgfTsgfSxcbiAgICAxKHIsIG1zZykgeyBtc2cuZXJyb3IgPSByLm1lc3NhZ2UoRXJyb3IpOyB9LFxufTtcbmNvbnN0IFJlc3BvbnNlRXJyb3JNc2cgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJyZXNwb25zZV9lcnJvclwiLCByZXF1ZXN0SWQ6IDAsIGVycm9yOiBFcnJvci5kZWZhdWx0KCkgfTsgfSxcbiAgICAxKHIsIG1zZykgeyBtc2cucmVxdWVzdElkID0gci5pbnQzMigpOyB9LFxuICAgIDIociwgbXNnKSB7IG1zZy5lcnJvciA9IHIubWVzc2FnZShFcnJvcik7IH0sXG59O1xuY29uc3QgUmVzcG9uc2VPa01zZyA9IHtcbiAgICBkZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZV9va1wiLFxuICAgICAgICAgICAgcmVxdWVzdElkOiAwLFxuICAgICAgICAgICAgcmVzcG9uc2U6IHsgdHlwZTogXCJub25lXCIgfSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5yZXF1ZXN0SWQgPSByLmludDMyKCk7IH0sXG4gICAgMihyLCBtc2cpIHsgbXNnLnJlc3BvbnNlID0geyB0eXBlOiBcIm9wZW5fc3RyZWFtXCIgfTsgfSxcbiAgICAzKHIsIG1zZykgeyBtc2cucmVzcG9uc2UgPSB7IHR5cGU6IFwiY2xvc2Vfc3RyZWFtXCIgfTsgfSxcbiAgICA0KHIsIG1zZykgeyBtc2cucmVzcG9uc2UgPSByLm1lc3NhZ2UoRXhlY3V0ZVJlc3ApOyB9LFxuICAgIDUociwgbXNnKSB7IG1zZy5yZXNwb25zZSA9IHIubWVzc2FnZShCYXRjaFJlc3ApOyB9LFxuICAgIDYociwgbXNnKSB7IG1zZy5yZXNwb25zZSA9IHsgdHlwZTogXCJvcGVuX2N1cnNvclwiIH07IH0sXG4gICAgNyhyLCBtc2cpIHsgbXNnLnJlc3BvbnNlID0geyB0eXBlOiBcImNsb3NlX2N1cnNvclwiIH07IH0sXG4gICAgOChyLCBtc2cpIHsgbXNnLnJlc3BvbnNlID0gci5tZXNzYWdlKEZldGNoQ3Vyc29yUmVzcCk7IH0sXG4gICAgOShyLCBtc2cpIHsgbXNnLnJlc3BvbnNlID0geyB0eXBlOiBcInNlcXVlbmNlXCIgfTsgfSxcbiAgICAxMChyLCBtc2cpIHsgbXNnLnJlc3BvbnNlID0gci5tZXNzYWdlKERlc2NyaWJlUmVzcCk7IH0sXG4gICAgMTEociwgbXNnKSB7IG1zZy5yZXNwb25zZSA9IHsgdHlwZTogXCJzdG9yZV9zcWxcIiB9OyB9LFxuICAgIDEyKHIsIG1zZykgeyBtc2cucmVzcG9uc2UgPSB7IHR5cGU6IFwiY2xvc2Vfc3FsXCIgfTsgfSxcbiAgICAxMyhyLCBtc2cpIHsgbXNnLnJlc3BvbnNlID0gci5tZXNzYWdlKEdldEF1dG9jb21taXRSZXNwKTsgfSxcbn07XG5jb25zdCBFeGVjdXRlUmVzcCA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyB0eXBlOiBcImV4ZWN1dGVcIiwgcmVzdWx0OiBTdG10UmVzdWx0LmRlZmF1bHQoKSB9OyB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5yZXN1bHQgPSByLm1lc3NhZ2UoU3RtdFJlc3VsdCk7IH0sXG59O1xuY29uc3QgQmF0Y2hSZXNwID0ge1xuICAgIGRlZmF1bHQoKSB7IHJldHVybiB7IHR5cGU6IFwiYmF0Y2hcIiwgcmVzdWx0OiBCYXRjaFJlc3VsdC5kZWZhdWx0KCkgfTsgfSxcbiAgICAxKHIsIG1zZykgeyBtc2cucmVzdWx0ID0gci5tZXNzYWdlKEJhdGNoUmVzdWx0KTsgfSxcbn07XG5jb25zdCBGZXRjaEN1cnNvclJlc3AgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJmZXRjaF9jdXJzb3JcIiwgZW50cmllczogW10sIGRvbmU6IGZhbHNlIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLmVudHJpZXMucHVzaChyLm1lc3NhZ2UoQ3Vyc29yRW50cnkpKTsgfSxcbiAgICAyKHIsIG1zZykgeyBtc2cuZG9uZSA9IHIuYm9vbCgpOyB9LFxufTtcbmNvbnN0IERlc2NyaWJlUmVzcCA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyB0eXBlOiBcImRlc2NyaWJlXCIsIHJlc3VsdDogRGVzY3JpYmVSZXN1bHQuZGVmYXVsdCgpIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLnJlc3VsdCA9IHIubWVzc2FnZShEZXNjcmliZVJlc3VsdCk7IH0sXG59O1xuY29uc3QgR2V0QXV0b2NvbW1pdFJlc3AgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJnZXRfYXV0b2NvbW1pdFwiLCBpc0F1dG9jb21taXQ6IGZhbHNlIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLmlzQXV0b2NvbW1pdCA9IHIuYm9vbCgpOyB9LFxufTtcbiIsICJpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwiLi4vY2xpZW50LmpzXCI7XG5pbXBvcnQgeyByZWFkSnNvbk9iamVjdCwgd3JpdGVKc29uT2JqZWN0LCByZWFkUHJvdG9idWZNZXNzYWdlLCB3cml0ZVByb3RvYnVmTWVzc2FnZSwgfSBmcm9tIFwiLi4vZW5jb2RpbmcvaW5kZXguanNcIjtcbmltcG9ydCB7IENsaWVudEVycm9yLCBQcm90b0Vycm9yLCBDbG9zZWRFcnJvciwgV2ViU29ja2V0RXJyb3IsIFByb3RvY29sVmVyc2lvbkVycm9yLCBJbnRlcm5hbEVycm9yLCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IElkQWxsb2MgfSBmcm9tIFwiLi4vaWRfYWxsb2MuanNcIjtcbmltcG9ydCB7IGVycm9yRnJvbVByb3RvIH0gZnJvbSBcIi4uL3Jlc3VsdC5qc1wiO1xuaW1wb3J0IHsgU3FsIH0gZnJvbSBcIi4uL3NxbC5qc1wiO1xuaW1wb3J0IHsgaW1wb3NzaWJsZSB9IGZyb20gXCIuLi91dGlsLmpzXCI7XG5pbXBvcnQgeyBXc1N0cmVhbSB9IGZyb20gXCIuL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50TXNnIGFzIGpzb25fQ2xpZW50TXNnIH0gZnJvbSBcIi4vanNvbl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IENsaWVudE1zZyBhcyBwcm90b2J1Zl9DbGllbnRNc2cgfSBmcm9tIFwiLi9wcm90b2J1Zl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IFNlcnZlck1zZyBhcyBqc29uX1NlcnZlck1zZyB9IGZyb20gXCIuL2pzb25fZGVjb2RlLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJNc2cgYXMgcHJvdG9idWZfU2VydmVyTXNnIH0gZnJvbSBcIi4vcHJvdG9idWZfZGVjb2RlLmpzXCI7XG5leHBvcnQgY29uc3Qgc3VicHJvdG9jb2xzVjIgPSBuZXcgTWFwKFtcbiAgICBbXCJocmFuYTJcIiwgeyB2ZXJzaW9uOiAyLCBlbmNvZGluZzogXCJqc29uXCIgfV0sXG4gICAgW1wiaHJhbmExXCIsIHsgdmVyc2lvbjogMSwgZW5jb2Rpbmc6IFwianNvblwiIH1dLFxuXSk7XG5leHBvcnQgY29uc3Qgc3VicHJvdG9jb2xzVjMgPSBuZXcgTWFwKFtcbiAgICBbXCJocmFuYTMtcHJvdG9idWZcIiwgeyB2ZXJzaW9uOiAzLCBlbmNvZGluZzogXCJwcm90b2J1ZlwiIH1dLFxuICAgIFtcImhyYW5hM1wiLCB7IHZlcnNpb246IDMsIGVuY29kaW5nOiBcImpzb25cIiB9XSxcbiAgICBbXCJocmFuYTJcIiwgeyB2ZXJzaW9uOiAyLCBlbmNvZGluZzogXCJqc29uXCIgfV0sXG4gICAgW1wiaHJhbmExXCIsIHsgdmVyc2lvbjogMSwgZW5jb2Rpbmc6IFwianNvblwiIH1dLFxuXSk7XG4vKiogQSBjbGllbnQgZm9yIHRoZSBIcmFuYSBwcm90b2NvbCBvdmVyIGEgV2ViU29ja2V0LiAqL1xuZXhwb3J0IGNsYXNzIFdzQ2xpZW50IGV4dGVuZHMgQ2xpZW50IHtcbiAgICAjc29ja2V0O1xuICAgIC8vIExpc3Qgb2YgY2FsbGJhY2tzIHRoYXQgd2UgcXVldWUgdW50aWwgdGhlIHNvY2tldCB0cmFuc2l0aW9ucyBmcm9tIHRoZSBDT05ORUNUSU5HIHRvIHRoZSBPUEVOIHN0YXRlLlxuICAgICNvcGVuQ2FsbGJhY2tzO1xuICAgIC8vIEhhdmUgd2UgYWxyZWFkeSB0cmFuc2l0aW9uZWQgZnJvbSBDT05ORUNUSU5HIHRvIE9QRU4gYW5kIGZpcmVkIHRoZSBjYWxsYmFja3MgaW4gI29wZW5DYWxsYmFja3M/XG4gICAgI29wZW5lZDtcbiAgICAvLyBTdG9yZXMgdGhlIGVycm9yIHRoYXQgY2F1c2VkIHVzIHRvIGNsb3NlIHRoZSBjbGllbnQgKGFuZCB0aGUgc29ja2V0KS4gSWYgd2UgYXJlIG5vdCBjbG9zZWQsIHRoaXMgaXNcbiAgICAvLyBgdW5kZWZpbmVkYC5cbiAgICAjY2xvc2VkO1xuICAgIC8vIEhhdmUgd2UgcmVjZWl2ZWQgYSByZXNwb25zZSB0byBvdXIgXCJoZWxsb1wiIGZyb20gdGhlIHNlcnZlcj9cbiAgICAjcmVjdmRIZWxsbztcbiAgICAvLyBTdWJwcm90b2NvbCBuZWdvdGlhdGVkIHdpdGggdGhlIHNlcnZlci4gSXQgaXMgb25seSBhdmFpbGFibGUgYWZ0ZXIgdGhlIHNvY2tldCB0cmFuc2l0aW9ucyB0byB0aGUgT1BFTlxuICAgIC8vIHN0YXRlLlxuICAgICNzdWJwcm90b2NvbDtcbiAgICAvLyBIYXMgdGhlIGBnZXRWZXJzaW9uKClgIGZ1bmN0aW9uIGJlZW4gY2FsbGVkPyBUaGlzIGlzIG9ubHkgdXNlZCB0byB2YWxpZGF0ZSB0aGF0IHRoZSBBUEkgaXMgdXNlZFxuICAgIC8vIGNvcnJlY3RseS5cbiAgICAjZ2V0VmVyc2lvbkNhbGxlZDtcbiAgICAvLyBBIG1hcCBmcm9tIHJlcXVlc3QgaWQgdG8gdGhlIHJlc3BvbnNlcyB0aGF0IHdlIGV4cGVjdCB0byByZWNlaXZlIGZyb20gdGhlIHNlcnZlci5cbiAgICAjcmVzcG9uc2VNYXA7XG4gICAgLy8gQW4gYWxsb2NhdG9yIG9mIHJlcXVlc3QgaWRzLlxuICAgICNyZXF1ZXN0SWRBbGxvYztcbiAgICAvLyBBbiBhbGxvY2F0b3Igb2Ygc3RyZWFtIGlkcy5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfc3RyZWFtSWRBbGxvYztcbiAgICAvLyBBbiBhbGxvY2F0b3Igb2YgY3Vyc29yIGlkcy5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfY3Vyc29ySWRBbGxvYztcbiAgICAvLyBBbiBhbGxvY2F0b3Igb2YgU1FMIHRleHQgaWRzLlxuICAgICNzcWxJZEFsbG9jO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKHNvY2tldCwgand0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI3NvY2tldCA9IHNvY2tldDtcbiAgICAgICAgdGhpcy4jb3BlbkNhbGxiYWNrcyA9IFtdO1xuICAgICAgICB0aGlzLiNvcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4jY2xvc2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiNyZWN2ZEhlbGxvID0gZmFsc2U7XG4gICAgICAgIHRoaXMuI3N1YnByb3RvY29sID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiNnZXRWZXJzaW9uQ2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuI3Jlc3BvbnNlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLiNyZXF1ZXN0SWRBbGxvYyA9IG5ldyBJZEFsbG9jKCk7XG4gICAgICAgIHRoaXMuX3N0cmVhbUlkQWxsb2MgPSBuZXcgSWRBbGxvYygpO1xuICAgICAgICB0aGlzLl9jdXJzb3JJZEFsbG9jID0gbmV3IElkQWxsb2MoKTtcbiAgICAgICAgdGhpcy4jc3FsSWRBbGxvYyA9IG5ldyBJZEFsbG9jKCk7XG4gICAgICAgIHRoaXMuI3NvY2tldC5iaW5hcnlUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuICAgICAgICB0aGlzLiNzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwgKCkgPT4gdGhpcy4jb25Tb2NrZXRPcGVuKCkpO1xuICAgICAgICB0aGlzLiNzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIChldmVudCkgPT4gdGhpcy4jb25Tb2NrZXRDbG9zZShldmVudCkpO1xuICAgICAgICB0aGlzLiNzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChldmVudCkgPT4gdGhpcy4jb25Tb2NrZXRFcnJvcihldmVudCkpO1xuICAgICAgICB0aGlzLiNzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB0aGlzLiNvblNvY2tldE1lc3NhZ2UoZXZlbnQpKTtcbiAgICAgICAgdGhpcy4jc2VuZCh7IHR5cGU6IFwiaGVsbG9cIiwgand0IH0pO1xuICAgIH1cbiAgICAvLyBTZW5kIChvciBlbnF1ZXVlIHRvIHNlbmQpIGEgbWVzc2FnZSB0byB0aGUgc2VydmVyLlxuICAgICNzZW5kKG1zZykge1xuICAgICAgICBpZiAodGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEVycm9yKFwiVHJ5aW5nIHRvIHNlbmQgYSBtZXNzYWdlIG9uIGEgY2xvc2VkIGNsaWVudFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jb3BlbmVkKSB7XG4gICAgICAgICAgICB0aGlzLiNzZW5kVG9Tb2NrZXQobXNnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG9wZW5DYWxsYmFjayA9ICgpID0+IHRoaXMuI3NlbmRUb1NvY2tldChtc2cpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JDYWxsYmFjayA9ICgpID0+IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI29wZW5DYWxsYmFja3MucHVzaCh7IG9wZW5DYWxsYmFjaywgZXJyb3JDYWxsYmFjayB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUaGUgc29ja2V0IHRyYW5zaXRpb25lZCBmcm9tIENPTk5FQ1RJTkcgdG8gT1BFTlxuICAgICNvblNvY2tldE9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHByb3RvY29sID0gdGhpcy4jc29ja2V0LnByb3RvY29sO1xuICAgICAgICBpZiAocHJvdG9jb2wgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy4jc2V0Q2xvc2VkKG5ldyBDbGllbnRFcnJvcihcIlRoZSBgV2ViU29ja2V0LnByb3RvY29sYCBwcm9wZXJ0eSBpcyB1bmRlZmluZWQuIFRoaXMgbW9zdCBsaWtlbHkgbWVhbnMgdGhhdCB0aGUgV2ViU29ja2V0IFwiICtcbiAgICAgICAgICAgICAgICBcImltcGxlbWVudGF0aW9uIHByb3ZpZGVkIGJ5IHRoZSBlbnZpcm9ubWVudCBpcyBicm9rZW4uIElmIHlvdSBhcmUgdXNpbmcgTWluaWZsYXJlIDIsIFwiICtcbiAgICAgICAgICAgICAgICBcInBsZWFzZSB1cGRhdGUgdG8gTWluaWZsYXJlIDMsIHdoaWNoIGZpeGVzIHRoaXMgcHJvYmxlbS5cIikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByb3RvY29sID09PSBcIlwiKSB7XG4gICAgICAgICAgICB0aGlzLiNzdWJwcm90b2NvbCA9IHsgdmVyc2lvbjogMSwgZW5jb2Rpbmc6IFwianNvblwiIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiNzdWJwcm90b2NvbCA9IHN1YnByb3RvY29sc1YzLmdldChwcm90b2NvbCk7XG4gICAgICAgICAgICBpZiAodGhpcy4jc3VicHJvdG9jb2wgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI3NldENsb3NlZChuZXcgUHJvdG9FcnJvcihgVW5yZWNvZ25pemVkIFdlYlNvY2tldCBzdWJwcm90b2NvbDogJHtKU09OLnN0cmluZ2lmeShwcm90b2NvbCl9YCkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrcyBvZiB0aGlzLiNvcGVuQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICBjYWxsYmFja3Mub3BlbkNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jb3BlbkNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLiNvcGVuZWQgPSB0cnVlO1xuICAgIH1cbiAgICAjc2VuZFRvU29ja2V0KG1zZykge1xuICAgICAgICBjb25zdCBlbmNvZGluZyA9IHRoaXMuI3N1YnByb3RvY29sLmVuY29kaW5nO1xuICAgICAgICBpZiAoZW5jb2RpbmcgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICBjb25zdCBqc29uTXNnID0gd3JpdGVKc29uT2JqZWN0KG1zZywganNvbl9DbGllbnRNc2cpO1xuICAgICAgICAgICAgdGhpcy4jc29ja2V0LnNlbmQoanNvbk1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW5jb2RpbmcgPT09IFwicHJvdG9idWZcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvdG9idWZNc2cgPSB3cml0ZVByb3RvYnVmTWVzc2FnZShtc2csIHByb3RvYnVmX0NsaWVudE1zZyk7XG4gICAgICAgICAgICB0aGlzLiNzb2NrZXQuc2VuZChwcm90b2J1Zk1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKGVuY29kaW5nLCBcIkltcG9zc2libGUgZW5jb2RpbmdcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEdldCB0aGUgcHJvdG9jb2wgdmVyc2lvbiBuZWdvdGlhdGVkIHdpdGggdGhlIHNlcnZlciwgcG9zc2libHkgd2FpdGluZyB1bnRpbCB0aGUgc29ja2V0IGlzIG9wZW4uICovXG4gICAgZ2V0VmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCh2ZXJzaW9uQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2dldFZlcnNpb25DYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayh0aGlzLiNjbG9zZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuI29wZW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wZW5DYWxsYmFjayA9ICgpID0+IHZlcnNpb25DYWxsYmFjayh0aGlzLiNzdWJwcm90b2NvbC52ZXJzaW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNvcGVuQ2FsbGJhY2tzLnB1c2goeyBvcGVuQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uQ2FsbGJhY2sodGhpcy4jc3VicHJvdG9jb2wudmVyc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbmVnb3RpYXRlZCB2ZXJzaW9uIGlzIGF0IGxlYXN0IGBtaW5WZXJzaW9uYC5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZW5zdXJlVmVyc2lvbihtaW5WZXJzaW9uLCBmZWF0dXJlKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdWJwcm90b2NvbCA9PT0gdW5kZWZpbmVkIHx8ICF0aGlzLiNnZXRWZXJzaW9uQ2FsbGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9jb2xWZXJzaW9uRXJyb3IoYCR7ZmVhdHVyZX0gaXMgc3VwcG9ydGVkIG9ubHkgb24gcHJvdG9jb2wgdmVyc2lvbiAke21pblZlcnNpb259IGFuZCBoaWdoZXIsIGAgK1xuICAgICAgICAgICAgICAgIFwiYnV0IHRoZSB2ZXJzaW9uIHN1cHBvcnRlZCBieSB0aGUgV2ViU29ja2V0IHNlcnZlciBpcyBub3QgeWV0IGtub3duLiBcIiArXG4gICAgICAgICAgICAgICAgXCJVc2UgQ2xpZW50LmdldFZlcnNpb24oKSB0byB3YWl0IHVudGlsIHRoZSB2ZXJzaW9uIGlzIGF2YWlsYWJsZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jc3VicHJvdG9jb2wudmVyc2lvbiA8IG1pblZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQcm90b2NvbFZlcnNpb25FcnJvcihgJHtmZWF0dXJlfSBpcyBzdXBwb3J0ZWQgb24gcHJvdG9jb2wgdmVyc2lvbiAke21pblZlcnNpb259IGFuZCBoaWdoZXIsIGAgK1xuICAgICAgICAgICAgICAgIGBidXQgdGhlIFdlYlNvY2tldCBzZXJ2ZXIgb25seSBzdXBwb3J0cyB2ZXJzaW9uICR7dGhpcy4jc3VicHJvdG9jb2wudmVyc2lvbn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTZW5kIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIGFuZCBpbnZva2UgYSBjYWxsYmFjayB3aGVuIHdlIGdldCB0aGUgcmVzcG9uc2UuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIGNhbGxiYWNrcykge1xuICAgICAgICBpZiAodGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvckNhbGxiYWNrKG5ldyBDbG9zZWRFcnJvcihcIkNsaWVudCBpcyBjbG9zZWRcIiwgdGhpcy4jY2xvc2VkKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdElkID0gdGhpcy4jcmVxdWVzdElkQWxsb2MuYWxsb2MoKTtcbiAgICAgICAgdGhpcy4jcmVzcG9uc2VNYXAuc2V0KHJlcXVlc3RJZCwgeyAuLi5jYWxsYmFja3MsIHR5cGU6IHJlcXVlc3QudHlwZSB9KTtcbiAgICAgICAgdGhpcy4jc2VuZCh7IHR5cGU6IFwicmVxdWVzdFwiLCByZXF1ZXN0SWQsIHJlcXVlc3QgfSk7XG4gICAgfVxuICAgIC8vIFRoZSBzb2NrZXQgZW5jb3VudGVyZWQgYW4gZXJyb3IuXG4gICAgI29uU29ja2V0RXJyb3IoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZXZlbnRNZXNzYWdlID0gZXZlbnQubWVzc2FnZTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGV2ZW50TWVzc2FnZSA/PyBcIldlYlNvY2tldCB3YXMgY2xvc2VkIGR1ZSB0byBhbiBlcnJvclwiO1xuICAgICAgICB0aGlzLiNzZXRDbG9zZWQobmV3IFdlYlNvY2tldEVycm9yKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgLy8gVGhlIHNvY2tldCB3YXMgY2xvc2VkLlxuICAgICNvblNvY2tldENsb3NlKGV2ZW50KSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gYFdlYlNvY2tldCB3YXMgY2xvc2VkIHdpdGggY29kZSAke2V2ZW50LmNvZGV9YDtcbiAgICAgICAgaWYgKGV2ZW50LnJlYXNvbikge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgOiAke2V2ZW50LnJlYXNvbn1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3NldENsb3NlZChuZXcgV2ViU29ja2V0RXJyb3IobWVzc2FnZSkpO1xuICAgIH1cbiAgICAvLyBDbG9zZSB0aGUgY2xpZW50IHdpdGggdGhlIGdpdmVuIGVycm9yLlxuICAgICNzZXRDbG9zZWQoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY2xvc2VkID0gZXJyb3I7XG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2tzIG9mIHRoaXMuI29wZW5DYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvckNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNvcGVuQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgW3JlcXVlc3RJZCwgcmVzcG9uc2VTdGF0ZV0gb2YgdGhpcy4jcmVzcG9uc2VNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICByZXNwb25zZVN0YXRlLmVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy4jcmVxdWVzdElkQWxsb2MuZnJlZShyZXF1ZXN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Jlc3BvbnNlTWFwLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuI3NvY2tldC5jbG9zZSgpO1xuICAgIH1cbiAgICAvLyBXZSByZWNlaXZlZCBhIG1lc3NhZ2UgZnJvbSB0aGUgc29ja2V0LlxuICAgICNvblNvY2tldE1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBtc2c7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGluZyA9IHRoaXMuI3N1YnByb3RvY29sLmVuY29kaW5nO1xuICAgICAgICAgICAgaWYgKGVuY29kaW5nID09PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzb2NrZXQuY2xvc2UoMzAwMywgXCJPbmx5IHRleHQgbWVzc2FnZXMgYXJlIGFjY2VwdGVkIHdpdGggSlNPTiBlbmNvZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0Q2xvc2VkKG5ldyBQcm90b0Vycm9yKFwiUmVjZWl2ZWQgbm9uLXRleHQgbWVzc2FnZSBmcm9tIHNlcnZlciB3aXRoIEpTT04gZW5jb2RpbmdcIikpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1zZyA9IHJlYWRKc29uT2JqZWN0KEpTT04ucGFyc2UoZXZlbnQuZGF0YSksIGpzb25fU2VydmVyTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVuY29kaW5nID09PSBcInByb3RvYnVmXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShldmVudC5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3NvY2tldC5jbG9zZSgzMDAzLCBcIk9ubHkgYmluYXJ5IG1lc3NhZ2VzIGFyZSBhY2NlcHRlZCB3aXRoIFByb3RvYnVmIGVuY29kaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRDbG9zZWQobmV3IFByb3RvRXJyb3IoXCJSZWNlaXZlZCBub24tYmluYXJ5IG1lc3NhZ2UgZnJvbSBzZXJ2ZXIgd2l0aCBQcm90b2J1ZiBlbmNvZGluZ1wiKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbXNnID0gcmVhZFByb3RvYnVmTWVzc2FnZShuZXcgVWludDhBcnJheShldmVudC5kYXRhKSwgcHJvdG9idWZfU2VydmVyTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGltcG9zc2libGUoZW5jb2RpbmcsIFwiSW1wb3NzaWJsZSBlbmNvZGluZ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2hhbmRsZU1zZyhtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLiNzb2NrZXQuY2xvc2UoMzAwNywgXCJDb3VsZCBub3QgaGFuZGxlIG1lc3NhZ2VcIik7XG4gICAgICAgICAgICB0aGlzLiNzZXRDbG9zZWQoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSGFuZGxlIGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgI2hhbmRsZU1zZyhtc2cpIHtcbiAgICAgICAgaWYgKG1zZy50eXBlID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJSZWNlaXZlZCBhbiB1bnJlY29nbml6ZWQgU2VydmVyTXNnXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImhlbGxvX29rXCIgfHwgbXNnLnR5cGUgPT09IFwiaGVsbG9fZXJyb3JcIikge1xuICAgICAgICAgICAgaWYgKHRoaXMuI3JlY3ZkSGVsbG8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlJlY2VpdmVkIGEgZHVwbGljYXRlZCBoZWxsbyByZXNwb25zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI3JlY3ZkSGVsbG8gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG1zZy50eXBlID09PSBcImhlbGxvX2Vycm9yXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZyb21Qcm90byhtc2cuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLiNyZWN2ZEhlbGxvKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlJlY2VpdmVkIGEgbm9uLWhlbGxvIG1lc3NhZ2UgYmVmb3JlIGEgaGVsbG8gcmVzcG9uc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1zZy50eXBlID09PSBcInJlc3BvbnNlX29rXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IG1zZy5yZXF1ZXN0SWQ7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVN0YXRlID0gdGhpcy4jcmVzcG9uc2VNYXAuZ2V0KHJlcXVlc3RJZCk7XG4gICAgICAgICAgICB0aGlzLiNyZXNwb25zZU1hcC5kZWxldGUocmVxdWVzdElkKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlJlY2VpdmVkIHVuZXhwZWN0ZWQgT0sgcmVzcG9uc2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0SWRBbGxvYy5mcmVlKHJlcXVlc3RJZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZVN0YXRlLnR5cGUgIT09IG1zZy5yZXNwb25zZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGlyKHsgcmVzcG9uc2VTdGF0ZSwgbXNnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlJlY2VpdmVkIHVuZXhwZWN0ZWQgdHlwZSBvZiByZXNwb25zZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VTdGF0ZS5yZXNwb25zZUNhbGxiYWNrKG1zZy5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RhdGUuZXJyb3JDYWxsYmFjayhlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcInJlc3BvbnNlX2Vycm9yXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IG1zZy5yZXF1ZXN0SWQ7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVN0YXRlID0gdGhpcy4jcmVzcG9uc2VNYXAuZ2V0KHJlcXVlc3RJZCk7XG4gICAgICAgICAgICB0aGlzLiNyZXNwb25zZU1hcC5kZWxldGUocmVxdWVzdElkKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlJlY2VpdmVkIHVuZXhwZWN0ZWQgZXJyb3IgcmVzcG9uc2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0SWRBbGxvYy5mcmVlKHJlcXVlc3RJZCk7XG4gICAgICAgICAgICByZXNwb25zZVN0YXRlLmVycm9yQ2FsbGJhY2soZXJyb3JGcm9tUHJvdG8obXNnLmVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKG1zZywgXCJJbXBvc3NpYmxlIFNlcnZlck1zZyB0eXBlXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBPcGVuIGEge0BsaW5rIFdzU3RyZWFtfSwgYSBzdHJlYW0gZm9yIGV4ZWN1dGluZyBTUUwgc3RhdGVtZW50cy4gKi9cbiAgICBvcGVuU3RyZWFtKCkge1xuICAgICAgICByZXR1cm4gV3NTdHJlYW0ub3Blbih0aGlzKTtcbiAgICB9XG4gICAgLyoqIENhY2hlIGEgU1FMIHRleHQgb24gdGhlIHNlcnZlci4gVGhpcyByZXF1aXJlcyBwcm90b2NvbCB2ZXJzaW9uIDIgb3IgaGlnaGVyLiAqL1xuICAgIHN0b3JlU3FsKHNxbCkge1xuICAgICAgICB0aGlzLl9lbnN1cmVWZXJzaW9uKDIsIFwic3RvcmVTcWwoKVwiKTtcbiAgICAgICAgY29uc3Qgc3FsSWQgPSB0aGlzLiNzcWxJZEFsbG9jLmFsbG9jKCk7XG4gICAgICAgIGNvbnN0IHNxbE9iaiA9IG5ldyBTcWwodGhpcywgc3FsSWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZUNhbGxiYWNrID0gKCkgPT4gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBlcnJvckNhbGxiYWNrID0gKGUpID0+IHNxbE9iai5fc2V0Q2xvc2VkKGUpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0geyB0eXBlOiBcInN0b3JlX3NxbFwiLCBzcWxJZCwgc3FsIH07XG4gICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIHsgcmVzcG9uc2VDYWxsYmFjaywgZXJyb3JDYWxsYmFjayB9KTtcbiAgICAgICAgcmV0dXJuIHNxbE9iajtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2Nsb3NlU3FsKHNxbElkKSB7XG4gICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQ2FsbGJhY2sgPSAoKSA9PiB0aGlzLiNzcWxJZEFsbG9jLmZyZWUoc3FsSWQpO1xuICAgICAgICBjb25zdCBlcnJvckNhbGxiYWNrID0gKGUpID0+IHRoaXMuI3NldENsb3NlZChlKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsgdHlwZTogXCJjbG9zZV9zcWxcIiwgc3FsSWQgfTtcbiAgICAgICAgdGhpcy5fc2VuZFJlcXVlc3QocmVxdWVzdCwgeyByZXNwb25zZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrIH0pO1xuICAgIH1cbiAgICAvKiogQ2xvc2UgdGhlIGNsaWVudCBhbmQgdGhlIFdlYlNvY2tldC4gKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc2V0Q2xvc2VkKG5ldyBDbGllbnRFcnJvcihcIkNsaWVudCB3YXMgbWFudWFsbHkgY2xvc2VkXCIpKTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlIGNsaWVudCBpcyBjbG9zZWQuICovXG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiIsICJjb25zdCBfZmV0Y2ggPSBmZXRjaDtcbmNvbnN0IF9SZXF1ZXN0ID0gUmVxdWVzdDtcbmNvbnN0IF9IZWFkZXJzID0gSGVhZGVycztcbmV4cG9ydCB7XG4gICAgX2ZldGNoIGFzIGZldGNoLFxuICAgIF9SZXF1ZXN0IGFzIFJlcXVlc3QsXG4gICAgX0hlYWRlcnMgYXMgSGVhZGVycyxcbn07XG4iLCAiLy8gcXVldWVNaWNyb3Rhc2soKSBwb255ZmlsbFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2xpYnNxbC9saWJzcWwtY2xpZW50LXRzL2lzc3Vlcy80N1xubGV0IF9xdWV1ZU1pY3JvdGFzaztcbmlmICh0eXBlb2YgcXVldWVNaWNyb3Rhc2sgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBfcXVldWVNaWNyb3Rhc2sgPSBxdWV1ZU1pY3JvdGFzaztcbn1cbmVsc2Uge1xuICAgIGNvbnN0IHJlc29sdmVkID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgX3F1ZXVlTWljcm90YXNrID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJlc29sdmVkLnRoZW4oY2FsbGJhY2spO1xuICAgIH07XG59XG5leHBvcnQgeyBfcXVldWVNaWNyb3Rhc2sgYXMgcXVldWVNaWNyb3Rhc2sgfTtcbiIsICJleHBvcnQgY2xhc3MgQnl0ZVF1ZXVlIHtcbiAgICAjYXJyYXk7XG4gICAgI3NoaWZ0UG9zO1xuICAgICNwdXNoUG9zO1xuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxDYXApIHtcbiAgICAgICAgdGhpcy4jYXJyYXkgPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIoaW5pdGlhbENhcCkpO1xuICAgICAgICB0aGlzLiNzaGlmdFBvcyA9IDA7XG4gICAgICAgIHRoaXMuI3B1c2hQb3MgPSAwO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcHVzaFBvcyAtIHRoaXMuI3NoaWZ0UG9zO1xuICAgIH1cbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYXJyYXkuc2xpY2UodGhpcy4jc2hpZnRQb3MsIHRoaXMuI3B1c2hQb3MpO1xuICAgIH1cbiAgICBwdXNoKGNodW5rKSB7XG4gICAgICAgIHRoaXMuI2Vuc3VyZVB1c2goY2h1bmsuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRoaXMuI2FycmF5LnNldChjaHVuaywgdGhpcy4jcHVzaFBvcyk7XG4gICAgICAgIHRoaXMuI3B1c2hQb3MgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgI2Vuc3VyZVB1c2gocHVzaExlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy4jcHVzaFBvcyArIHB1c2hMZW5ndGggPD0gdGhpcy4jYXJyYXkuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGxlZExlbmd0aCA9IHRoaXMuI3B1c2hQb3MgLSB0aGlzLiNzaGlmdFBvcztcbiAgICAgICAgaWYgKGZpbGxlZExlbmd0aCArIHB1c2hMZW5ndGggPD0gdGhpcy4jYXJyYXkuYnl0ZUxlbmd0aCAmJlxuICAgICAgICAgICAgMiAqIHRoaXMuI3B1c2hQb3MgPj0gdGhpcy4jYXJyYXkuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy4jYXJyYXkuY29weVdpdGhpbigwLCB0aGlzLiNzaGlmdFBvcywgdGhpcy4jcHVzaFBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmV3Q2FwID0gdGhpcy4jYXJyYXkuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBuZXdDYXAgKj0gMjtcbiAgICAgICAgICAgIH0gd2hpbGUgKGZpbGxlZExlbmd0aCArIHB1c2hMZW5ndGggPiBuZXdDYXApO1xuICAgICAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIobmV3Q2FwKSk7XG4gICAgICAgICAgICBuZXdBcnJheS5zZXQodGhpcy4jYXJyYXkuc2xpY2UodGhpcy4jc2hpZnRQb3MsIHRoaXMuI3B1c2hQb3MpLCAwKTtcbiAgICAgICAgICAgIHRoaXMuI2FycmF5ID0gbmV3QXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHVzaFBvcyA9IGZpbGxlZExlbmd0aDtcbiAgICAgICAgdGhpcy4jc2hpZnRQb3MgPSAwO1xuICAgIH1cbiAgICBzaGlmdChsZW5ndGgpIHtcbiAgICAgICAgdGhpcy4jc2hpZnRQb3MgKz0gbGVuZ3RoO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQcm90b0Vycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0ICogYXMgZCBmcm9tIFwiLi4vZW5jb2RpbmcvanNvbi9kZWNvZGUuanNcIjtcbmltcG9ydCB7IEVycm9yLCBTdG10UmVzdWx0LCBCYXRjaFJlc3VsdCwgRGVzY3JpYmVSZXN1bHQgfSBmcm9tIFwiLi4vc2hhcmVkL2pzb25fZGVjb2RlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gUGlwZWxpbmVSZXNwQm9keShvYmopIHtcbiAgICBjb25zdCBiYXRvbiA9IGQuc3RyaW5nT3B0KG9ialtcImJhdG9uXCJdKTtcbiAgICBjb25zdCBiYXNlVXJsID0gZC5zdHJpbmdPcHQob2JqW1wiYmFzZV91cmxcIl0pO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBkLmFycmF5T2JqZWN0c01hcChvYmpbXCJyZXN1bHRzXCJdLCBTdHJlYW1SZXN1bHQpO1xuICAgIHJldHVybiB7IGJhdG9uLCBiYXNlVXJsLCByZXN1bHRzIH07XG59XG5mdW5jdGlvbiBTdHJlYW1SZXN1bHQob2JqKSB7XG4gICAgY29uc3QgdHlwZSA9IGQuc3RyaW5nKG9ialtcInR5cGVcIl0pO1xuICAgIGlmICh0eXBlID09PSBcIm9rXCIpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBTdHJlYW1SZXNwb25zZShkLm9iamVjdChvYmpbXCJyZXNwb25zZVwiXSkpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcIm9rXCIsIHJlc3BvbnNlIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICBjb25zdCBlcnJvciA9IEVycm9yKGQub2JqZWN0KG9ialtcImVycm9yXCJdKSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3IgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKFwiVW5leHBlY3RlZCB0eXBlIG9mIFN0cmVhbVJlc3VsdFwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBTdHJlYW1SZXNwb25zZShvYmopIHtcbiAgICBjb25zdCB0eXBlID0gZC5zdHJpbmcob2JqW1widHlwZVwiXSk7XG4gICAgaWYgKHR5cGUgPT09IFwiY2xvc2VcIikge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImNsb3NlXCIgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJleGVjdXRlXCIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gU3RtdFJlc3VsdChkLm9iamVjdChvYmpbXCJyZXN1bHRcIl0pKTtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJleGVjdXRlXCIsIHJlc3VsdCB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImJhdGNoXCIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gQmF0Y2hSZXN1bHQoZC5vYmplY3Qob2JqW1wicmVzdWx0XCJdKSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiYmF0Y2hcIiwgcmVzdWx0IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic2VxdWVuY2VcIikge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcInNlcXVlbmNlXCIgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJkZXNjcmliZVwiKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IERlc2NyaWJlUmVzdWx0KGQub2JqZWN0KG9ialtcInJlc3VsdFwiXSkpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImRlc2NyaWJlXCIsIHJlc3VsdCB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN0b3JlX3NxbFwiKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwic3RvcmVfc3FsXCIgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjbG9zZV9zcWxcIikge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImNsb3NlX3NxbFwiIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiZ2V0X2F1dG9jb21taXRcIikge1xuICAgICAgICBjb25zdCBpc0F1dG9jb21taXQgPSBkLmJvb2xlYW4ob2JqW1wiaXNfYXV0b2NvbW1pdFwiXSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZ2V0X2F1dG9jb21taXRcIiwgaXNBdXRvY29tbWl0IH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlVuZXhwZWN0ZWQgdHlwZSBvZiBTdHJlYW1SZXNwb25zZVwiKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gQ3Vyc29yUmVzcEJvZHkob2JqKSB7XG4gICAgY29uc3QgYmF0b24gPSBkLnN0cmluZ09wdChvYmpbXCJiYXRvblwiXSk7XG4gICAgY29uc3QgYmFzZVVybCA9IGQuc3RyaW5nT3B0KG9ialtcImJhc2VfdXJsXCJdKTtcbiAgICByZXR1cm4geyBiYXRvbiwgYmFzZVVybCB9O1xufVxuIiwgImltcG9ydCB7IEVycm9yLCBTdG10UmVzdWx0LCBCYXRjaFJlc3VsdCwgRGVzY3JpYmVSZXN1bHQgfSBmcm9tIFwiLi4vc2hhcmVkL3Byb3RvYnVmX2RlY29kZS5qc1wiO1xuZXhwb3J0IGNvbnN0IFBpcGVsaW5lUmVzcEJvZHkgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgYmF0b246IHVuZGVmaW5lZCwgYmFzZVVybDogdW5kZWZpbmVkLCByZXN1bHRzOiBbXSB9OyB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5iYXRvbiA9IHIuc3RyaW5nKCk7IH0sXG4gICAgMihyLCBtc2cpIHsgbXNnLmJhc2VVcmwgPSByLnN0cmluZygpOyB9LFxuICAgIDMociwgbXNnKSB7IG1zZy5yZXN1bHRzLnB1c2goci5tZXNzYWdlKFN0cmVhbVJlc3VsdCkpOyB9LFxufTtcbmNvbnN0IFN0cmVhbVJlc3VsdCA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyB0eXBlOiBcIm5vbmVcIiB9OyB9LFxuICAgIDEocikgeyByZXR1cm4geyB0eXBlOiBcIm9rXCIsIHJlc3BvbnNlOiByLm1lc3NhZ2UoU3RyZWFtUmVzcG9uc2UpIH07IH0sXG4gICAgMihyKSB7IHJldHVybiB7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IHIubWVzc2FnZShFcnJvcikgfTsgfSxcbn07XG5jb25zdCBTdHJlYW1SZXNwb25zZSA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyB0eXBlOiBcIm5vbmVcIiB9OyB9LFxuICAgIDEocikgeyByZXR1cm4geyB0eXBlOiBcImNsb3NlXCIgfTsgfSxcbiAgICAyKHIpIHsgcmV0dXJuIHIubWVzc2FnZShFeGVjdXRlU3RyZWFtUmVzcCk7IH0sXG4gICAgMyhyKSB7IHJldHVybiByLm1lc3NhZ2UoQmF0Y2hTdHJlYW1SZXNwKTsgfSxcbiAgICA0KHIpIHsgcmV0dXJuIHsgdHlwZTogXCJzZXF1ZW5jZVwiIH07IH0sXG4gICAgNShyKSB7IHJldHVybiByLm1lc3NhZ2UoRGVzY3JpYmVTdHJlYW1SZXNwKTsgfSxcbiAgICA2KHIpIHsgcmV0dXJuIHsgdHlwZTogXCJzdG9yZV9zcWxcIiB9OyB9LFxuICAgIDcocikgeyByZXR1cm4geyB0eXBlOiBcImNsb3NlX3NxbFwiIH07IH0sXG4gICAgOChyKSB7IHJldHVybiByLm1lc3NhZ2UoR2V0QXV0b2NvbW1pdFN0cmVhbVJlc3ApOyB9LFxufTtcbmNvbnN0IEV4ZWN1dGVTdHJlYW1SZXNwID0ge1xuICAgIGRlZmF1bHQoKSB7IHJldHVybiB7IHR5cGU6IFwiZXhlY3V0ZVwiLCByZXN1bHQ6IFN0bXRSZXN1bHQuZGVmYXVsdCgpIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLnJlc3VsdCA9IHIubWVzc2FnZShTdG10UmVzdWx0KTsgfSxcbn07XG5jb25zdCBCYXRjaFN0cmVhbVJlc3AgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJiYXRjaFwiLCByZXN1bHQ6IEJhdGNoUmVzdWx0LmRlZmF1bHQoKSB9OyB9LFxuICAgIDEociwgbXNnKSB7IG1zZy5yZXN1bHQgPSByLm1lc3NhZ2UoQmF0Y2hSZXN1bHQpOyB9LFxufTtcbmNvbnN0IERlc2NyaWJlU3RyZWFtUmVzcCA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyB0eXBlOiBcImRlc2NyaWJlXCIsIHJlc3VsdDogRGVzY3JpYmVSZXN1bHQuZGVmYXVsdCgpIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLnJlc3VsdCA9IHIubWVzc2FnZShEZXNjcmliZVJlc3VsdCk7IH0sXG59O1xuY29uc3QgR2V0QXV0b2NvbW1pdFN0cmVhbVJlc3AgPSB7XG4gICAgZGVmYXVsdCgpIHsgcmV0dXJuIHsgdHlwZTogXCJnZXRfYXV0b2NvbW1pdFwiLCBpc0F1dG9jb21taXQ6IGZhbHNlIH07IH0sXG4gICAgMShyLCBtc2cpIHsgbXNnLmlzQXV0b2NvbW1pdCA9IHIuYm9vbCgpOyB9LFxufTtcbmV4cG9ydCBjb25zdCBDdXJzb3JSZXNwQm9keSA9IHtcbiAgICBkZWZhdWx0KCkgeyByZXR1cm4geyBiYXRvbjogdW5kZWZpbmVkLCBiYXNlVXJsOiB1bmRlZmluZWQgfTsgfSxcbiAgICAxKHIsIG1zZykgeyBtc2cuYmF0b24gPSByLnN0cmluZygpOyB9LFxuICAgIDIociwgbXNnKSB7IG1zZy5iYXNlVXJsID0gci5zdHJpbmcoKTsgfSxcbn07XG4iLCAiaW1wb3J0IHsgQnl0ZVF1ZXVlIH0gZnJvbSBcIi4uL2J5dGVfcXVldWUuanNcIjtcbmltcG9ydCB7IEN1cnNvciB9IGZyb20gXCIuLi9jdXJzb3IuanNcIjtcbmltcG9ydCAqIGFzIGpzb25kIGZyb20gXCIuLi9lbmNvZGluZy9qc29uL2RlY29kZS5qc1wiO1xuaW1wb3J0ICogYXMgcHJvdG9idWZkIGZyb20gXCIuLi9lbmNvZGluZy9wcm90b2J1Zi9kZWNvZGUuanNcIjtcbmltcG9ydCB7IENsaWVudEVycm9yLCBDbG9zZWRFcnJvciwgUHJvdG9FcnJvciwgSW50ZXJuYWxFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGltcG9zc2libGUgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuaW1wb3J0IHsgQ3Vyc29yUmVzcEJvZHkgYXMganNvbl9DdXJzb3JSZXNwQm9keSB9IGZyb20gXCIuL2pzb25fZGVjb2RlLmpzXCI7XG5pbXBvcnQgeyBDdXJzb3JSZXNwQm9keSBhcyBwcm90b2J1Zl9DdXJzb3JSZXNwQm9keSB9IGZyb20gXCIuL3Byb3RvYnVmX2RlY29kZS5qc1wiO1xuaW1wb3J0IHsgQ3Vyc29yRW50cnkgYXMganNvbl9DdXJzb3JFbnRyeSB9IGZyb20gXCIuLi9zaGFyZWQvanNvbl9kZWNvZGUuanNcIjtcbmltcG9ydCB7IEN1cnNvckVudHJ5IGFzIHByb3RvYnVmX0N1cnNvckVudHJ5IH0gZnJvbSBcIi4uL3NoYXJlZC9wcm90b2J1Zl9kZWNvZGUuanNcIjtcbmV4cG9ydCBjbGFzcyBIdHRwQ3Vyc29yIGV4dGVuZHMgQ3Vyc29yIHtcbiAgICAjc3RyZWFtO1xuICAgICNlbmNvZGluZztcbiAgICAjcmVhZGVyO1xuICAgICNxdWV1ZTtcbiAgICAjY2xvc2VkO1xuICAgICNkb25lO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKHN0cmVhbSwgZW5jb2RpbmcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICB0aGlzLiNlbmNvZGluZyA9IGVuY29kaW5nO1xuICAgICAgICB0aGlzLiNyZWFkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuI3F1ZXVlID0gbmV3IEJ5dGVRdWV1ZSgxNiAqIDEwMjQpO1xuICAgICAgICB0aGlzLiNjbG9zZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuI2RvbmUgPSBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgb3BlbihyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuYm9keSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJObyByZXNwb25zZSBib2R5IGZvciBjdXJzb3IgcmVxdWVzdFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICBjb25zdCByZXNwQm9keSA9IGF3YWl0IHRoaXMuI25leHRJdGVtKGpzb25fQ3Vyc29yUmVzcEJvZHksIHByb3RvYnVmX0N1cnNvclJlc3BCb2R5KTtcbiAgICAgICAgaWYgKHJlc3BCb2R5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQcm90b0Vycm9yKFwiRW1wdHkgcmVzcG9uc2UgdG8gY3Vyc29yIHJlcXVlc3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BCb2R5O1xuICAgIH1cbiAgICAvKiogRmV0Y2ggdGhlIG5leHQgZW50cnkgZnJvbSB0aGUgY3Vyc29yLiAqL1xuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNuZXh0SXRlbShqc29uX0N1cnNvckVudHJ5LCBwcm90b2J1Zl9DdXJzb3JFbnRyeSk7XG4gICAgfVxuICAgIC8qKiBDbG9zZSB0aGUgY3Vyc29yLiAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9zZXRDbG9zZWQobmV3IENsaWVudEVycm9yKFwiQ3Vyc29yIHdhcyBtYW51YWxseSBjbG9zZWRcIikpO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfc2V0Q2xvc2VkKGVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Nsb3NlZCA9IGVycm9yO1xuICAgICAgICB0aGlzLiNzdHJlYW0uX2N1cnNvckNsb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuI3JlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlIGN1cnNvciBpcyBjbG9zZWQuICovXG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyAjbmV4dEl0ZW0oanNvbkZ1biwgcHJvdG9idWZEZWYpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHRoaXMuI2RvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2xvc2VkRXJyb3IoXCJDdXJzb3IgaXMgY2xvc2VkXCIsIHRoaXMuI2Nsb3NlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4jZW5jb2RpbmcgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSB0aGlzLiNwYXJzZUl0ZW1Kc29uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGpzb25EYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblRleHQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoanNvbkRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uVmFsdWUgPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpzb25kLnJlYWRKc29uT2JqZWN0KGpzb25WYWx1ZSwganNvbkZ1bik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy4jZW5jb2RpbmcgPT09IFwicHJvdG9idWZcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3RvYnVmRGF0YSA9IHRoaXMuI3BhcnNlSXRlbVByb3RvYnVmKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvYnVmRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm90b2J1ZmQucmVhZFByb3RvYnVmTWVzc2FnZShwcm90b2J1ZkRhdGEsIHByb3RvYnVmRGVmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKHRoaXMuI2VuY29kaW5nLCBcIkltcG9zc2libGUgZW5jb2RpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4jcmVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFcnJvcihcIkF0dGVtcHRlZCB0byByZWFkIGZyb20gSFRUUCBjdXJzb3IgYmVmb3JlIGl0IHdhcyBvcGVuZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCB0aGlzLiNyZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgaWYgKGRvbmUgJiYgdGhpcy4jcXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jZG9uZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJVbmV4cGVjdGVkIGVuZCBvZiBjdXJzb3Igc3RyZWFtXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcXVldWUucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3BhcnNlSXRlbUpzb24oKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLiNxdWV1ZS5kYXRhKCk7XG4gICAgICAgIGNvbnN0IG5ld2xpbmVCeXRlID0gMTA7XG4gICAgICAgIGNvbnN0IG5ld2xpbmVQb3MgPSBkYXRhLmluZGV4T2YobmV3bGluZUJ5dGUpO1xuICAgICAgICBpZiAobmV3bGluZVBvcyA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QganNvbkRhdGEgPSBkYXRhLnNsaWNlKDAsIG5ld2xpbmVQb3MpO1xuICAgICAgICB0aGlzLiNxdWV1ZS5zaGlmdChuZXdsaW5lUG9zICsgMSk7XG4gICAgICAgIHJldHVybiBqc29uRGF0YTtcbiAgICB9XG4gICAgI3BhcnNlSXRlbVByb3RvYnVmKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy4jcXVldWUuZGF0YSgpO1xuICAgICAgICBsZXQgdmFyaW50VmFsdWUgPSAwO1xuICAgICAgICBsZXQgdmFyaW50TGVuZ3RoID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHZhcmludExlbmd0aCA+PSBkYXRhLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYnl0ZSA9IGRhdGFbdmFyaW50TGVuZ3RoXTtcbiAgICAgICAgICAgIHZhcmludFZhbHVlIHw9IChieXRlICYgMHg3ZikgPDwgKDcgKiB2YXJpbnRMZW5ndGgpO1xuICAgICAgICAgICAgdmFyaW50TGVuZ3RoICs9IDE7XG4gICAgICAgICAgICBpZiAoIShieXRlICYgMHg4MCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5ieXRlTGVuZ3RoIDwgdmFyaW50TGVuZ3RoICsgdmFyaW50VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvdG9idWZEYXRhID0gZGF0YS5zbGljZSh2YXJpbnRMZW5ndGgsIHZhcmludExlbmd0aCArIHZhcmludFZhbHVlKTtcbiAgICAgICAgdGhpcy4jcXVldWUuc2hpZnQodmFyaW50TGVuZ3RoICsgdmFyaW50VmFsdWUpO1xuICAgICAgICByZXR1cm4gcHJvdG9idWZEYXRhO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTdG10LCBCYXRjaCB9IGZyb20gXCIuLi9zaGFyZWQvanNvbl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IGltcG9zc2libGUgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIFBpcGVsaW5lUmVxQm9keSh3LCBtc2cpIHtcbiAgICBpZiAobXNnLmJhdG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdy5zdHJpbmcoXCJiYXRvblwiLCBtc2cuYmF0b24pO1xuICAgIH1cbiAgICB3LmFycmF5T2JqZWN0cyhcInJlcXVlc3RzXCIsIG1zZy5yZXF1ZXN0cywgU3RyZWFtUmVxdWVzdCk7XG59XG5mdW5jdGlvbiBTdHJlYW1SZXF1ZXN0KHcsIG1zZykge1xuICAgIHcuc3RyaW5nUmF3KFwidHlwZVwiLCBtc2cudHlwZSk7XG4gICAgaWYgKG1zZy50eXBlID09PSBcImNsb3NlXCIpIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJleGVjdXRlXCIpIHtcbiAgICAgICAgdy5vYmplY3QoXCJzdG10XCIsIG1zZy5zdG10LCBTdG10KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiYmF0Y2hcIikge1xuICAgICAgICB3Lm9iamVjdChcImJhdGNoXCIsIG1zZy5iYXRjaCwgQmF0Y2gpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJzZXF1ZW5jZVwiKSB7XG4gICAgICAgIGlmIChtc2cuc3FsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHcuc3RyaW5nKFwic3FsXCIsIG1zZy5zcWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtc2cuc3FsSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdy5udW1iZXIoXCJzcWxfaWRcIiwgbXNnLnNxbElkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJkZXNjcmliZVwiKSB7XG4gICAgICAgIGlmIChtc2cuc3FsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHcuc3RyaW5nKFwic3FsXCIsIG1zZy5zcWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtc2cuc3FsSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdy5udW1iZXIoXCJzcWxfaWRcIiwgbXNnLnNxbElkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJzdG9yZV9zcWxcIikge1xuICAgICAgICB3Lm51bWJlcihcInNxbF9pZFwiLCBtc2cuc3FsSWQpO1xuICAgICAgICB3LnN0cmluZyhcInNxbFwiLCBtc2cuc3FsKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiY2xvc2Vfc3FsXCIpIHtcbiAgICAgICAgdy5udW1iZXIoXCJzcWxfaWRcIiwgbXNnLnNxbElkKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiZ2V0X2F1dG9jb21taXRcIikge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKG1zZywgXCJJbXBvc3NpYmxlIHR5cGUgb2YgU3RyZWFtUmVxdWVzdFwiKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gQ3Vyc29yUmVxQm9keSh3LCBtc2cpIHtcbiAgICBpZiAobXNnLmJhdG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdy5zdHJpbmcoXCJiYXRvblwiLCBtc2cuYmF0b24pO1xuICAgIH1cbiAgICB3Lm9iamVjdChcImJhdGNoXCIsIG1zZy5iYXRjaCwgQmF0Y2gpO1xufVxuIiwgImltcG9ydCB7IFN0bXQsIEJhdGNoIH0gZnJvbSBcIi4uL3NoYXJlZC9wcm90b2J1Zl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IGltcG9zc2libGUgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIFBpcGVsaW5lUmVxQm9keSh3LCBtc2cpIHtcbiAgICBpZiAobXNnLmJhdG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdy5zdHJpbmcoMSwgbXNnLmJhdG9uKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByZXEgb2YgbXNnLnJlcXVlc3RzKSB7XG4gICAgICAgIHcubWVzc2FnZSgyLCByZXEsIFN0cmVhbVJlcXVlc3QpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIFN0cmVhbVJlcXVlc3QodywgbXNnKSB7XG4gICAgaWYgKG1zZy50eXBlID09PSBcImNsb3NlXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDEsIG1zZywgQ2xvc2VTdHJlYW1SZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJleGVjdXRlXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDIsIG1zZywgRXhlY3V0ZVN0cmVhbVJlcSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcImJhdGNoXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDMsIG1zZywgQmF0Y2hTdHJlYW1SZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJzZXF1ZW5jZVwiKSB7XG4gICAgICAgIHcubWVzc2FnZSg0LCBtc2csIFNlcXVlbmNlU3RyZWFtUmVxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiZGVzY3JpYmVcIikge1xuICAgICAgICB3Lm1lc3NhZ2UoNSwgbXNnLCBEZXNjcmliZVN0cmVhbVJlcSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcInN0b3JlX3NxbFwiKSB7XG4gICAgICAgIHcubWVzc2FnZSg2LCBtc2csIFN0b3JlU3FsU3RyZWFtUmVxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiY2xvc2Vfc3FsXCIpIHtcbiAgICAgICAgdy5tZXNzYWdlKDcsIG1zZywgQ2xvc2VTcWxTdHJlYW1SZXEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJnZXRfYXV0b2NvbW1pdFwiKSB7XG4gICAgICAgIHcubWVzc2FnZSg4LCBtc2csIEdldEF1dG9jb21taXRTdHJlYW1SZXEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShtc2csIFwiSW1wb3NzaWJsZSB0eXBlIG9mIFN0cmVhbVJlcXVlc3RcIik7XG4gICAgfVxufVxuZnVuY3Rpb24gQ2xvc2VTdHJlYW1SZXEoX3csIF9tc2cpIHtcbn1cbmZ1bmN0aW9uIEV4ZWN1dGVTdHJlYW1SZXEodywgbXNnKSB7XG4gICAgdy5tZXNzYWdlKDEsIG1zZy5zdG10LCBTdG10KTtcbn1cbmZ1bmN0aW9uIEJhdGNoU3RyZWFtUmVxKHcsIG1zZykge1xuICAgIHcubWVzc2FnZSgxLCBtc2cuYmF0Y2gsIEJhdGNoKTtcbn1cbmZ1bmN0aW9uIFNlcXVlbmNlU3RyZWFtUmVxKHcsIG1zZykge1xuICAgIGlmIChtc2cuc3FsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdy5zdHJpbmcoMSwgbXNnLnNxbCk7XG4gICAgfVxuICAgIGlmIChtc2cuc3FsSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3LmludDMyKDIsIG1zZy5zcWxJZCk7XG4gICAgfVxufVxuZnVuY3Rpb24gRGVzY3JpYmVTdHJlYW1SZXEodywgbXNnKSB7XG4gICAgaWYgKG1zZy5zcWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3LnN0cmluZygxLCBtc2cuc3FsKTtcbiAgICB9XG4gICAgaWYgKG1zZy5zcWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHcuaW50MzIoMiwgbXNnLnNxbElkKTtcbiAgICB9XG59XG5mdW5jdGlvbiBTdG9yZVNxbFN0cmVhbVJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zcWxJZCk7XG4gICAgdy5zdHJpbmcoMiwgbXNnLnNxbCk7XG59XG5mdW5jdGlvbiBDbG9zZVNxbFN0cmVhbVJlcSh3LCBtc2cpIHtcbiAgICB3LmludDMyKDEsIG1zZy5zcWxJZCk7XG59XG5mdW5jdGlvbiBHZXRBdXRvY29tbWl0U3RyZWFtUmVxKF93LCBfbXNnKSB7XG59XG5leHBvcnQgZnVuY3Rpb24gQ3Vyc29yUmVxQm9keSh3LCBtc2cpIHtcbiAgICBpZiAobXNnLmJhdG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdy5zdHJpbmcoMSwgbXNnLmJhdG9uKTtcbiAgICB9XG4gICAgdy5tZXNzYWdlKDIsIG1zZy5iYXRjaCwgQmF0Y2gpO1xufVxuIiwgImltcG9ydCB7IFJlcXVlc3QsIEhlYWRlcnMgfSBmcm9tIFwiQGxpYnNxbC9pc29tb3JwaGljLWZldGNoXCI7XG5pbXBvcnQgeyBDbGllbnRFcnJvciwgSHR0cFNlcnZlckVycm9yLCBQcm90b2NvbFZlcnNpb25FcnJvciwgUHJvdG9FcnJvciwgQ2xvc2VkRXJyb3IsIEludGVybmFsRXJyb3IsIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgcmVhZEpzb25PYmplY3QsIHdyaXRlSnNvbk9iamVjdCwgcmVhZFByb3RvYnVmTWVzc2FnZSwgd3JpdGVQcm90b2J1Zk1lc3NhZ2UsIH0gZnJvbSBcIi4uL2VuY29kaW5nL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBJZEFsbG9jIH0gZnJvbSBcIi4uL2lkX2FsbG9jLmpzXCI7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gXCIuLi9xdWV1ZS5qc1wiO1xuaW1wb3J0IHsgcXVldWVNaWNyb3Rhc2sgfSBmcm9tIFwiLi4vcXVldWVfbWljcm90YXNrLmpzXCI7XG5pbXBvcnQgeyBlcnJvckZyb21Qcm90byB9IGZyb20gXCIuLi9yZXN1bHQuanNcIjtcbmltcG9ydCB7IFNxbCB9IGZyb20gXCIuLi9zcWwuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi9zdHJlYW0uanNcIjtcbmltcG9ydCB7IGltcG9zc2libGUgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuaW1wb3J0IHsgSHR0cEN1cnNvciB9IGZyb20gXCIuL2N1cnNvci5qc1wiO1xuaW1wb3J0IHsgUGlwZWxpbmVSZXFCb2R5IGFzIGpzb25fUGlwZWxpbmVSZXFCb2R5IH0gZnJvbSBcIi4vanNvbl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IFBpcGVsaW5lUmVxQm9keSBhcyBwcm90b2J1Zl9QaXBlbGluZVJlcUJvZHkgfSBmcm9tIFwiLi9wcm90b2J1Zl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IEN1cnNvclJlcUJvZHkgYXMganNvbl9DdXJzb3JSZXFCb2R5IH0gZnJvbSBcIi4vanNvbl9lbmNvZGUuanNcIjtcbmltcG9ydCB7IEN1cnNvclJlcUJvZHkgYXMgcHJvdG9idWZfQ3Vyc29yUmVxQm9keSB9IGZyb20gXCIuL3Byb3RvYnVmX2VuY29kZS5qc1wiO1xuaW1wb3J0IHsgUGlwZWxpbmVSZXNwQm9keSBhcyBqc29uX1BpcGVsaW5lUmVzcEJvZHkgfSBmcm9tIFwiLi9qc29uX2RlY29kZS5qc1wiO1xuaW1wb3J0IHsgUGlwZWxpbmVSZXNwQm9keSBhcyBwcm90b2J1Zl9QaXBlbGluZVJlc3BCb2R5IH0gZnJvbSBcIi4vcHJvdG9idWZfZGVjb2RlLmpzXCI7XG5leHBvcnQgY2xhc3MgSHR0cFN0cmVhbSBleHRlbmRzIFN0cmVhbSB7XG4gICAgI2NsaWVudDtcbiAgICAjYmFzZVVybDtcbiAgICAjand0O1xuICAgICNmZXRjaDtcbiAgICAjYmF0b247XG4gICAgI3F1ZXVlO1xuICAgICNmbHVzaGluZztcbiAgICAjY3Vyc29yO1xuICAgICNjbG9zaW5nO1xuICAgICNjbG9zZVF1ZXVlZDtcbiAgICAjY2xvc2VkO1xuICAgICNzcWxJZEFsbG9jO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCwgYmFzZVVybCwgand0LCBjdXN0b21GZXRjaCkge1xuICAgICAgICBzdXBlcihjbGllbnQuaW50TW9kZSk7XG4gICAgICAgIHRoaXMuI2NsaWVudCA9IGNsaWVudDtcbiAgICAgICAgdGhpcy4jYmFzZVVybCA9IGJhc2VVcmwudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy4jand0ID0gand0O1xuICAgICAgICB0aGlzLiNmZXRjaCA9IGN1c3RvbUZldGNoO1xuICAgICAgICB0aGlzLiNiYXRvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy4jcXVldWUgPSBuZXcgUXVldWUoKTtcbiAgICAgICAgdGhpcy4jZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4jY2xvc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLiNjbG9zZVF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiNjbG9zZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuI3NxbElkQWxsb2MgPSBuZXcgSWRBbGxvYygpO1xuICAgIH1cbiAgICAvKiogR2V0IHRoZSB7QGxpbmsgSHR0cENsaWVudH0gb2JqZWN0IHRoYXQgdGhpcyBzdHJlYW0gYmVsb25ncyB0by4gKi9cbiAgICBjbGllbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjbGllbnQ7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9zcWxPd25lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBDYWNoZSBhIFNRTCB0ZXh0IG9uIHRoZSBzZXJ2ZXIuICovXG4gICAgc3RvcmVTcWwoc3FsKSB7XG4gICAgICAgIGNvbnN0IHNxbElkID0gdGhpcy4jc3FsSWRBbGxvYy5hbGxvYygpO1xuICAgICAgICB0aGlzLiNzZW5kU3RyZWFtUmVxdWVzdCh7IHR5cGU6IFwic3RvcmVfc3FsXCIsIHNxbElkLCBzcWwgfSkudGhlbigoKSA9PiB1bmRlZmluZWQsIChlcnJvcikgPT4gdGhpcy5fc2V0Q2xvc2VkKGVycm9yKSk7XG4gICAgICAgIHJldHVybiBuZXcgU3FsKHRoaXMsIHNxbElkKTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2Nsb3NlU3FsKHNxbElkKSB7XG4gICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3NlbmRTdHJlYW1SZXF1ZXN0KHsgdHlwZTogXCJjbG9zZV9zcWxcIiwgc3FsSWQgfSkudGhlbigoKSA9PiB0aGlzLiNzcWxJZEFsbG9jLmZyZWUoc3FsSWQpLCAoZXJyb3IpID0+IHRoaXMuX3NldENsb3NlZChlcnJvcikpO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZXhlY3V0ZShzdG10KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzZW5kU3RyZWFtUmVxdWVzdCh7IHR5cGU6IFwiZXhlY3V0ZVwiLCBzdG10IH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2JhdGNoKGJhdGNoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzZW5kU3RyZWFtUmVxdWVzdCh7IHR5cGU6IFwiYmF0Y2hcIiwgYmF0Y2ggfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZGVzY3JpYmUocHJvdG9TcWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmRTdHJlYW1SZXF1ZXN0KHtcbiAgICAgICAgICAgIHR5cGU6IFwiZGVzY3JpYmVcIixcbiAgICAgICAgICAgIHNxbDogcHJvdG9TcWwuc3FsLFxuICAgICAgICAgICAgc3FsSWQ6IHByb3RvU3FsLnNxbElkXG4gICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3NlcXVlbmNlKHByb3RvU3FsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzZW5kU3RyZWFtUmVxdWVzdCh7XG4gICAgICAgICAgICB0eXBlOiBcInNlcXVlbmNlXCIsXG4gICAgICAgICAgICBzcWw6IHByb3RvU3FsLnNxbCxcbiAgICAgICAgICAgIHNxbElkOiBwcm90b1NxbC5zcWxJZCxcbiAgICAgICAgfSkudGhlbigoX3Jlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIENoZWNrIHdoZXRoZXIgdGhlIFNRTCBjb25uZWN0aW9uIHVuZGVybHlpbmcgdGhpcyBzdHJlYW0gaXMgaW4gYXV0b2NvbW1pdCBzdGF0ZSAoaS5lLiwgb3V0c2lkZSBvZiBhblxuICAgICAqIGV4cGxpY2l0IHRyYW5zYWN0aW9uKS4gVGhpcyByZXF1aXJlcyBwcm90b2NvbCB2ZXJzaW9uIDMgb3IgaGlnaGVyLlxuICAgICAqL1xuICAgIGdldEF1dG9jb21taXQoKSB7XG4gICAgICAgIHRoaXMuI2NsaWVudC5fZW5zdXJlVmVyc2lvbigzLCBcImdldEF1dG9jb21taXQoKVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmRTdHJlYW1SZXF1ZXN0KHtcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0X2F1dG9jb21taXRcIixcbiAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5pc0F1dG9jb21taXQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAjc2VuZFN0cmVhbVJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3B1c2hUb1F1ZXVlKHsgdHlwZTogXCJwaXBlbGluZVwiLCByZXF1ZXN0LCByZXNwb25zZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX29wZW5DdXJzb3IoYmF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChjdXJzb3JDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy4jcHVzaFRvUXVldWUoeyB0eXBlOiBcImN1cnNvclwiLCBiYXRjaCwgY3Vyc29yQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfY3Vyc29yQ2xvc2VkKGN1cnNvcikge1xuICAgICAgICBpZiAoY3Vyc29yICE9PSB0aGlzLiNjdXJzb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEVycm9yKFwiQ3Vyc29yIHdhcyBjbG9zZWQsIGJ1dCBpdCB3YXMgbm90IGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RyZWFtXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnNvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4gdGhpcy4jZmx1c2hRdWV1ZSgpKTtcbiAgICB9XG4gICAgLyoqIEltbWVkaWF0ZWx5IGNsb3NlIHRoZSBzdHJlYW0uICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3NldENsb3NlZChuZXcgQ2xpZW50RXJyb3IoXCJTdHJlYW0gd2FzIG1hbnVhbGx5IGNsb3NlZFwiKSk7XG4gICAgfVxuICAgIC8qKiBHcmFjZWZ1bGx5IGNsb3NlIHRoZSBzdHJlYW0uICovXG4gICAgY2xvc2VHcmFjZWZ1bGx5KCkge1xuICAgICAgICB0aGlzLiNjbG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4gdGhpcy4jZmx1c2hRdWV1ZSgpKTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQuICovXG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkIHx8IHRoaXMuI2Nsb3Npbmc7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9zZXRDbG9zZWQoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY2xvc2VkID0gZXJyb3I7XG4gICAgICAgIGlmICh0aGlzLiNjdXJzb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy4jY3Vyc29yLl9zZXRDbG9zZWQoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2NsaWVudC5fc3RyZWFtQ2xvc2VkKHRoaXMpO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuI3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoZW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGVudHJ5LmVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0aGlzLiNiYXRvbiAhPT0gdW5kZWZpbmVkIHx8IHRoaXMuI2ZsdXNoaW5nKSAmJiAhdGhpcy4jY2xvc2VRdWV1ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuI3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicGlwZWxpbmVcIixcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiB7IHR5cGU6IFwiY2xvc2VcIiB9LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlQ2FsbGJhY2s6ICgpID0+IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrOiAoKSA9PiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI2Nsb3NlUXVldWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHRoaXMuI2ZsdXNoUXVldWUoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3B1c2hUb1F1ZXVlKGVudHJ5KSB7XG4gICAgICAgIGlmICh0aGlzLiNjbG9zZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IENsb3NlZEVycm9yKFwiU3RyZWFtIGlzIGNsb3NlZFwiLCB0aGlzLiNjbG9zZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2Nsb3NpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDbG9zZWRFcnJvcihcIlN0cmVhbSBpcyBjbG9zaW5nXCIsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiNxdWV1ZS5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHRoaXMuI2ZsdXNoUXVldWUoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgI2ZsdXNoUXVldWUoKSB7XG4gICAgICAgIGlmICh0aGlzLiNmbHVzaGluZyB8fCB0aGlzLiNjdXJzb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNjbG9zaW5nICYmIHRoaXMuI3F1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fc2V0Q2xvc2VkKG5ldyBDbGllbnRFcnJvcihcIlN0cmVhbSB3YXMgZ3JhY2VmdWxseSBjbG9zZWRcIikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy4jY2xpZW50Ll9lbmRwb2ludDtcbiAgICAgICAgaWYgKGVuZHBvaW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuI2NsaWVudC5fZW5kcG9pbnRQcm9taXNlLnRoZW4oKCkgPT4gdGhpcy4jZmx1c2hRdWV1ZSgpLCAoZXJyb3IpID0+IHRoaXMuX3NldENsb3NlZChlcnJvcikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpcnN0RW50cnkgPSB0aGlzLiNxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAoZmlyc3RFbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmlyc3RFbnRyeS50eXBlID09PSBcInBpcGVsaW5lXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBpcGVsaW5lID0gW2ZpcnN0RW50cnldO1xuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy4jcXVldWUuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkgIT09IHVuZGVmaW5lZCAmJiBlbnRyeS50eXBlID09PSBcInBpcGVsaW5lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQgJiYgdGhpcy4jY2xvc2luZyAmJiAhdGhpcy4jY2xvc2VRdWV1ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBpcGVsaW5lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiB7IHR5cGU6IFwiY2xvc2VcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDYWxsYmFjazogKCkgPT4gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjazogKCkgPT4gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jY2xvc2VRdWV1ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2ZsdXNoUGlwZWxpbmUoZW5kcG9pbnQsIHBpcGVsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaXJzdEVudHJ5LnR5cGUgPT09IFwiY3Vyc29yXCIpIHtcbiAgICAgICAgICAgIHRoaXMuI2ZsdXNoQ3Vyc29yKGVuZHBvaW50LCBmaXJzdEVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGltcG9zc2libGUoZmlyc3RFbnRyeSwgXCJJbXBvc3NpYmxlIHR5cGUgb2YgUXVldWVFbnRyeVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjZmx1c2hQaXBlbGluZShlbmRwb2ludCwgcGlwZWxpbmUpIHtcbiAgICAgICAgdGhpcy4jZmx1c2goKCkgPT4gdGhpcy4jY3JlYXRlUGlwZWxpbmVSZXF1ZXN0KHBpcGVsaW5lLCBlbmRwb2ludCksIChyZXNwKSA9PiBkZWNvZGVQaXBlbGluZVJlc3BvbnNlKHJlc3AsIGVuZHBvaW50LmVuY29kaW5nKSwgKHJlc3BCb2R5KSA9PiByZXNwQm9keS5iYXRvbiwgKHJlc3BCb2R5KSA9PiByZXNwQm9keS5iYXNlVXJsLCAocmVzcEJvZHkpID0+IGhhbmRsZVBpcGVsaW5lUmVzcG9uc2UocGlwZWxpbmUsIHJlc3BCb2R5KSwgKGVycm9yKSA9PiBwaXBlbGluZS5mb3JFYWNoKChlbnRyeSkgPT4gZW50cnkuZXJyb3JDYWxsYmFjayhlcnJvcikpKTtcbiAgICB9XG4gICAgI2ZsdXNoQ3Vyc29yKGVuZHBvaW50LCBlbnRyeSkge1xuICAgICAgICBjb25zdCBjdXJzb3IgPSBuZXcgSHR0cEN1cnNvcih0aGlzLCBlbmRwb2ludC5lbmNvZGluZyk7XG4gICAgICAgIHRoaXMuI2N1cnNvciA9IGN1cnNvcjtcbiAgICAgICAgdGhpcy4jZmx1c2goKCkgPT4gdGhpcy4jY3JlYXRlQ3Vyc29yUmVxdWVzdChlbnRyeSwgZW5kcG9pbnQpLCAocmVzcCkgPT4gY3Vyc29yLm9wZW4ocmVzcCksIChyZXNwQm9keSkgPT4gcmVzcEJvZHkuYmF0b24sIChyZXNwQm9keSkgPT4gcmVzcEJvZHkuYmFzZVVybCwgKF9yZXNwQm9keSkgPT4gZW50cnkuY3Vyc29yQ2FsbGJhY2soY3Vyc29yKSwgKGVycm9yKSA9PiBlbnRyeS5lcnJvckNhbGxiYWNrKGVycm9yKSk7XG4gICAgfVxuICAgICNmbHVzaChjcmVhdGVSZXF1ZXN0LCBkZWNvZGVSZXNwb25zZSwgZ2V0QmF0b24sIGdldEJhc2VVcmwsIGhhbmRsZVJlc3BvbnNlLCBoYW5kbGVFcnJvcikge1xuICAgICAgICBsZXQgcHJvbWlzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0KCk7XG4gICAgICAgICAgICBjb25zdCBmZXRjaCA9IHRoaXMuI2ZldGNoO1xuICAgICAgICAgICAgcHJvbWlzZSA9IGZldGNoKHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNmbHVzaGluZyA9IHRydWU7XG4gICAgICAgIHByb21pc2UudGhlbigocmVzcCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yRnJvbVJlc3BvbnNlKHJlc3ApLnRoZW4oKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlY29kZVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICB9KS50aGVuKChyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNiYXRvbiA9IGdldEJhdG9uKHIpO1xuICAgICAgICAgICAgdGhpcy4jYmFzZVVybCA9IGdldEJhc2VVcmwocikgPz8gdGhpcy4jYmFzZVVybDtcbiAgICAgICAgICAgIGhhbmRsZVJlc3BvbnNlKHIpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3NldENsb3NlZChlcnJvcik7XG4gICAgICAgICAgICBoYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuI2ZsdXNoUXVldWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICNjcmVhdGVQaXBlbGluZVJlcXVlc3QocGlwZWxpbmUsIGVuZHBvaW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjcmVhdGVSZXF1ZXN0KG5ldyBVUkwoZW5kcG9pbnQucGlwZWxpbmVQYXRoLCB0aGlzLiNiYXNlVXJsKSwge1xuICAgICAgICAgICAgYmF0b246IHRoaXMuI2JhdG9uLFxuICAgICAgICAgICAgcmVxdWVzdHM6IHBpcGVsaW5lLm1hcCgoZW50cnkpID0+IGVudHJ5LnJlcXVlc3QpLFxuICAgICAgICB9LCBlbmRwb2ludC5lbmNvZGluZywganNvbl9QaXBlbGluZVJlcUJvZHksIHByb3RvYnVmX1BpcGVsaW5lUmVxQm9keSk7XG4gICAgfVxuICAgICNjcmVhdGVDdXJzb3JSZXF1ZXN0KGVudHJ5LCBlbmRwb2ludCkge1xuICAgICAgICBpZiAoZW5kcG9pbnQuY3Vyc29yUGF0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9jb2xWZXJzaW9uRXJyb3IoXCJDdXJzb3JzIGFyZSBzdXBwb3J0ZWQgb25seSBvbiBwcm90b2NvbCB2ZXJzaW9uIDMgYW5kIGhpZ2hlciwgXCIgK1xuICAgICAgICAgICAgICAgIGBidXQgdGhlIEhUVFAgc2VydmVyIG9ubHkgc3VwcG9ydHMgdmVyc2lvbiAke2VuZHBvaW50LnZlcnNpb259LmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLiNjcmVhdGVSZXF1ZXN0KG5ldyBVUkwoZW5kcG9pbnQuY3Vyc29yUGF0aCwgdGhpcy4jYmFzZVVybCksIHtcbiAgICAgICAgICAgIGJhdG9uOiB0aGlzLiNiYXRvbixcbiAgICAgICAgICAgIGJhdGNoOiBlbnRyeS5iYXRjaCxcbiAgICAgICAgfSwgZW5kcG9pbnQuZW5jb2RpbmcsIGpzb25fQ3Vyc29yUmVxQm9keSwgcHJvdG9idWZfQ3Vyc29yUmVxQm9keSk7XG4gICAgfVxuICAgICNjcmVhdGVSZXF1ZXN0KHVybCwgcmVxQm9keSwgZW5jb2RpbmcsIGpzb25GdW4sIHByb3RvYnVmRnVuKSB7XG4gICAgICAgIGxldCBib2R5RGF0YTtcbiAgICAgICAgbGV0IGNvbnRlbnRUeXBlO1xuICAgICAgICBpZiAoZW5jb2RpbmcgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICBib2R5RGF0YSA9IHdyaXRlSnNvbk9iamVjdChyZXFCb2R5LCBqc29uRnVuKTtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW5jb2RpbmcgPT09IFwicHJvdG9idWZcIikge1xuICAgICAgICAgICAgYm9keURhdGEgPSB3cml0ZVByb3RvYnVmTWVzc2FnZShyZXFCb2R5LCBwcm90b2J1ZkZ1bik7XG4gICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiYXBwbGljYXRpb24veC1wcm90b2J1ZlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShlbmNvZGluZywgXCJJbXBvc3NpYmxlIGVuY29kaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLnNldChcImNvbnRlbnQtdHlwZVwiLCBjb250ZW50VHlwZSk7XG4gICAgICAgIGlmICh0aGlzLiNqd3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJhdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0aGlzLiNqd3R9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybC50b1N0cmluZygpLCB7IG1ldGhvZDogXCJQT1NUXCIsIGhlYWRlcnMsIGJvZHk6IGJvZHlEYXRhIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVBpcGVsaW5lUmVzcG9uc2UocGlwZWxpbmUsIHJlc3BCb2R5KSB7XG4gICAgaWYgKHJlc3BCb2R5LnJlc3VsdHMubGVuZ3RoICE9PSBwaXBlbGluZS5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJTZXJ2ZXIgcmV0dXJuZWQgdW5leHBlY3RlZCBudW1iZXIgb2YgcGlwZWxpbmUgcmVzdWx0c1wiKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwaXBlbGluZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSByZXNwQm9keS5yZXN1bHRzW2ldO1xuICAgICAgICBjb25zdCBlbnRyeSA9IHBpcGVsaW5lW2ldO1xuICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09IFwib2tcIikge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXNwb25zZS50eXBlICE9PSBlbnRyeS5yZXF1ZXN0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdG9FcnJvcihcIlJlY2VpdmVkIHVuZXhwZWN0ZWQgdHlwZSBvZiByZXNwb25zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVudHJ5LnJlc3BvbnNlQ2FsbGJhY2socmVzdWx0LnJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXN1bHQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICBlbnRyeS5lcnJvckNhbGxiYWNrKGVycm9yRnJvbVByb3RvKHJlc3VsdC5lcnJvcikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdC50eXBlID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvRXJyb3IoXCJSZWNlaXZlZCB1bnJlY29nbml6ZWQgdHlwZSBvZiBTdHJlYW1SZXN1bHRcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBpbXBvc3NpYmxlKHJlc3VsdCwgXCJSZWNlaXZlZCBpbXBvc3NpYmxlIHR5cGUgb2YgU3RyZWFtUmVzdWx0XCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZGVjb2RlUGlwZWxpbmVSZXNwb25zZShyZXNwLCBlbmNvZGluZykge1xuICAgIGlmIChlbmNvZGluZyA9PT0gXCJqc29uXCIpIHtcbiAgICAgICAgY29uc3QgcmVzcEpzb24gPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlYWRKc29uT2JqZWN0KHJlc3BKc29uLCBqc29uX1BpcGVsaW5lUmVzcEJvZHkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlbmNvZGluZyA9PT0gXCJwcm90b2J1ZlwiKSB7XG4gICAgICAgIGNvbnN0IHJlc3BEYXRhID0gYXdhaXQgcmVzcC5hcnJheUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gcmVhZFByb3RvYnVmTWVzc2FnZShuZXcgVWludDhBcnJheShyZXNwRGF0YSksIHByb3RvYnVmX1BpcGVsaW5lUmVzcEJvZHkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgaW1wb3NzaWJsZShlbmNvZGluZywgXCJJbXBvc3NpYmxlIGVuY29kaW5nXCIpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGVycm9yRnJvbVJlc3BvbnNlKHJlc3ApIHtcbiAgICBjb25zdCByZXNwVHlwZSA9IHJlc3AuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgPz8gXCJ0ZXh0L3BsYWluXCI7XG4gICAgaWYgKHJlc3BUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIikge1xuICAgICAgICBjb25zdCByZXNwQm9keSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgICBpZiAoXCJtZXNzYWdlXCIgaW4gcmVzcEJvZHkpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvckZyb21Qcm90byhyZXNwQm9keSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IG1lc3NhZ2UgPSBgU2VydmVyIHJldHVybmVkIEhUVFAgc3RhdHVzICR7cmVzcC5zdGF0dXN9YDtcbiAgICBpZiAocmVzcFR5cGUgPT09IFwidGV4dC9wbGFpblwiKSB7XG4gICAgICAgIGNvbnN0IHJlc3BCb2R5ID0gKGF3YWl0IHJlc3AudGV4dCgpKS50cmltKCk7XG4gICAgICAgIGlmIChyZXNwQm9keSAhPT0gXCJcIikge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgOiAke3Jlc3BCb2R5fWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBIdHRwU2VydmVyRXJyb3IobWVzc2FnZSwgcmVzcC5zdGF0dXMpO1xufVxuIiwgImltcG9ydCB7IGZldGNoLCBSZXF1ZXN0IH0gZnJvbSBcIkBsaWJzcWwvaXNvbW9ycGhpYy1mZXRjaFwiO1xuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIi4uL2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50RXJyb3IsIENsb3NlZEVycm9yLCBQcm90b2NvbFZlcnNpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IEh0dHBTdHJlYW0gfSBmcm9tIFwiLi9zdHJlYW0uanNcIjtcbmV4cG9ydCBjb25zdCBjaGVja0VuZHBvaW50cyA9IFtcbiAgICB7XG4gICAgICAgIHZlcnNpb25QYXRoOiBcInYzLXByb3RvYnVmXCIsXG4gICAgICAgIHBpcGVsaW5lUGF0aDogXCJ2My1wcm90b2J1Zi9waXBlbGluZVwiLFxuICAgICAgICBjdXJzb3JQYXRoOiBcInYzLXByb3RvYnVmL2N1cnNvclwiLFxuICAgICAgICB2ZXJzaW9uOiAzLFxuICAgICAgICBlbmNvZGluZzogXCJwcm90b2J1ZlwiLFxuICAgIH0sXG4gICAgLypcbiAgICB7XG4gICAgICAgIHZlcnNpb25QYXRoOiBcInYzXCIsXG4gICAgICAgIHBpcGVsaW5lUGF0aDogXCJ2My9waXBlbGluZVwiLFxuICAgICAgICBjdXJzb3JQYXRoOiBcInYzL2N1cnNvclwiLFxuICAgICAgICB2ZXJzaW9uOiAzLFxuICAgICAgICBlbmNvZGluZzogXCJqc29uXCIsXG4gICAgfSxcbiAgICAqL1xuXTtcbmNvbnN0IGZhbGxiYWNrRW5kcG9pbnQgPSB7XG4gICAgdmVyc2lvblBhdGg6IFwidjJcIixcbiAgICBwaXBlbGluZVBhdGg6IFwidjIvcGlwZWxpbmVcIixcbiAgICBjdXJzb3JQYXRoOiB1bmRlZmluZWQsXG4gICAgdmVyc2lvbjogMixcbiAgICBlbmNvZGluZzogXCJqc29uXCIsXG59O1xuLyoqIEEgY2xpZW50IGZvciB0aGUgSHJhbmEgcHJvdG9jb2wgb3ZlciBIVFRQLiAqL1xuZXhwb3J0IGNsYXNzIEh0dHBDbGllbnQgZXh0ZW5kcyBDbGllbnQge1xuICAgICN1cmw7XG4gICAgI2p3dDtcbiAgICAjZmV0Y2g7XG4gICAgI2Nsb3NlZDtcbiAgICAjc3RyZWFtcztcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZW5kcG9pbnRQcm9taXNlO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9lbmRwb2ludDtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3Rvcih1cmwsIGp3dCwgY3VzdG9tRmV0Y2gsIHByb3RvY29sVmVyc2lvbiA9IDIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jdXJsID0gdXJsO1xuICAgICAgICB0aGlzLiNqd3QgPSBqd3Q7XG4gICAgICAgIHRoaXMuI2ZldGNoID0gY3VzdG9tRmV0Y2ggPz8gZmV0Y2g7XG4gICAgICAgIHRoaXMuI2Nsb3NlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy4jc3RyZWFtcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgaWYgKHByb3RvY29sVmVyc2lvbiA9PSAzKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmRwb2ludFByb21pc2UgPSBmaW5kRW5kcG9pbnQodGhpcy4jZmV0Y2gsIHRoaXMuI3VybCk7XG4gICAgICAgICAgICB0aGlzLl9lbmRwb2ludFByb21pc2UudGhlbigoZW5kcG9pbnQpID0+IHRoaXMuX2VuZHBvaW50ID0gZW5kcG9pbnQsIChlcnJvcikgPT4gdGhpcy4jc2V0Q2xvc2VkKGVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbmRwb2ludFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoZmFsbGJhY2tFbmRwb2ludCk7XG4gICAgICAgICAgICB0aGlzLl9lbmRwb2ludFByb21pc2UudGhlbigoZW5kcG9pbnQpID0+IHRoaXMuX2VuZHBvaW50ID0gZW5kcG9pbnQsIChlcnJvcikgPT4gdGhpcy4jc2V0Q2xvc2VkKGVycm9yKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEdldCB0aGUgcHJvdG9jb2wgdmVyc2lvbiBzdXBwb3J0ZWQgYnkgdGhlIHNlcnZlci4gKi9cbiAgICBhc3luYyBnZXRWZXJzaW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fZW5kcG9pbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZHBvaW50LnZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLl9lbmRwb2ludFByb21pc2UpLnZlcnNpb247XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBuZWdvdGlhdGVkIHZlcnNpb24gaXMgYXQgbGVhc3QgYG1pblZlcnNpb25gLlxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9lbnN1cmVWZXJzaW9uKG1pblZlcnNpb24sIGZlYXR1cmUpIHtcbiAgICAgICAgaWYgKG1pblZlcnNpb24gPD0gZmFsbGJhY2tFbmRwb2ludC52ZXJzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fZW5kcG9pbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sVmVyc2lvbkVycm9yKGAke2ZlYXR1cmV9IGlzIHN1cHBvcnRlZCBvbmx5IG9uIHByb3RvY29sIHZlcnNpb24gJHttaW5WZXJzaW9ufSBhbmQgaGlnaGVyLCBgICtcbiAgICAgICAgICAgICAgICBcImJ1dCB0aGUgdmVyc2lvbiBzdXBwb3J0ZWQgYnkgdGhlIEhUVFAgc2VydmVyIGlzIG5vdCB5ZXQga25vd24uIFwiICtcbiAgICAgICAgICAgICAgICBcIlVzZSBDbGllbnQuZ2V0VmVyc2lvbigpIHRvIHdhaXQgdW50aWwgdGhlIHZlcnNpb24gaXMgYXZhaWxhYmxlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9lbmRwb2ludC52ZXJzaW9uIDwgbWluVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3RvY29sVmVyc2lvbkVycm9yKGAke2ZlYXR1cmV9IGlzIHN1cHBvcnRlZCBvbmx5IG9uIHByb3RvY29sIHZlcnNpb24gJHttaW5WZXJzaW9ufSBhbmQgaGlnaGVyLCBgICtcbiAgICAgICAgICAgICAgICBgYnV0IHRoZSBIVFRQIHNlcnZlciBvbmx5IHN1cHBvcnRzIHZlcnNpb24gJHt0aGlzLl9lbmRwb2ludC52ZXJzaW9ufS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogT3BlbiBhIHtAbGluayBIdHRwU3RyZWFtfSwgYSBzdHJlYW0gZm9yIGV4ZWN1dGluZyBTUUwgc3RhdGVtZW50cy4gKi9cbiAgICBvcGVuU3RyZWFtKCkge1xuICAgICAgICBpZiAodGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDbG9zZWRFcnJvcihcIkNsaWVudCBpcyBjbG9zZWRcIiwgdGhpcy4jY2xvc2VkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgSHR0cFN0cmVhbSh0aGlzLCB0aGlzLiN1cmwsIHRoaXMuI2p3dCwgdGhpcy4jZmV0Y2gpO1xuICAgICAgICB0aGlzLiNzdHJlYW1zLmFkZChzdHJlYW0pO1xuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfc3RyZWFtQ2xvc2VkKHN0cmVhbSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1zLmRlbGV0ZShzdHJlYW0pO1xuICAgIH1cbiAgICAvKiogQ2xvc2UgdGhlIGNsaWVudCBhbmQgYWxsIGl0cyBzdHJlYW1zLiAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNzZXRDbG9zZWQobmV3IENsaWVudEVycm9yKFwiQ2xpZW50IHdhcyBtYW51YWxseSBjbG9zZWRcIikpO1xuICAgIH1cbiAgICAvKiogVHJ1ZSBpZiB0aGUgY2xpZW50IGlzIGNsb3NlZC4gKi9cbiAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY2xvc2VkICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgICNzZXRDbG9zZWQoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Nsb3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY2xvc2VkID0gZXJyb3I7XG4gICAgICAgIGZvciAoY29uc3Qgc3RyZWFtIG9mIEFycmF5LmZyb20odGhpcy4jc3RyZWFtcykpIHtcbiAgICAgICAgICAgIHN0cmVhbS5fc2V0Q2xvc2VkKG5ldyBDbG9zZWRFcnJvcihcIkNsaWVudCB3YXMgY2xvc2VkXCIsIGVycm9yKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBmaW5kRW5kcG9pbnQoY3VzdG9tRmV0Y2gsIGNsaWVudFVybCkge1xuICAgIGNvbnN0IGZldGNoID0gY3VzdG9tRmV0Y2g7XG4gICAgZm9yIChjb25zdCBlbmRwb2ludCBvZiBjaGVja0VuZHBvaW50cykge1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGVuZHBvaW50LnZlcnNpb25QYXRoLCBjbGllbnRVcmwpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodXJsLnRvU3RyaW5nKCksIHsgbWV0aG9kOiBcIkdFVFwiIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QpO1xuICAgICAgICBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHJldHVybiBlbmRwb2ludDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsbGJhY2tFbmRwb2ludDtcbn1cbiIsICJpbXBvcnQgeyBXZWJTb2NrZXQgfSBmcm9tIFwiQGxpYnNxbC9pc29tb3JwaGljLXdzXCI7XG5pbXBvcnQgeyBzdWJwcm90b2NvbHNWMiwgc3VicHJvdG9jb2xzVjMgfSBmcm9tIFwiLi93cy9jbGllbnQuanNcIjtcbmltcG9ydCB7IFdlYlNvY2tldFVuc3VwcG9ydGVkRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tIFwiLi9odHRwL2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgV3NDbGllbnQgfSBmcm9tIFwiLi93cy9jbGllbnQuanNcIjtcbmV4cG9ydCB7IFdlYlNvY2tldCB9IGZyb20gXCJAbGlic3FsL2lzb21vcnBoaWMtd3NcIjtcbmV4cG9ydCB7IGZldGNoLCBSZXF1ZXN0LCBIZWFkZXJzIH0gZnJvbSBcIkBsaWJzcWwvaXNvbW9ycGhpYy1mZXRjaFwiO1xuZXhwb3J0IHsgQ2xpZW50IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmV4cG9ydCB7IEJhdGNoLCBCYXRjaFN0ZXAsIEJhdGNoQ29uZCB9IGZyb20gXCIuL2JhdGNoLmpzXCI7XG5leHBvcnQgeyBwYXJzZUxpYnNxbFVybCB9IGZyb20gXCIuL2xpYnNxbF91cmwuanNcIjtcbmV4cG9ydCB7IFNxbCB9IGZyb20gXCIuL3NxbC5qc1wiO1xuZXhwb3J0IHsgU3RtdCB9IGZyb20gXCIuL3N0bXQuanNcIjtcbmV4cG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuL3N0cmVhbS5qc1wiO1xuZXhwb3J0IHsgSHR0cENsaWVudCB9IGZyb20gXCIuL2h0dHAvY2xpZW50LmpzXCI7XG5leHBvcnQgeyBIdHRwU3RyZWFtIH0gZnJvbSBcIi4vaHR0cC9zdHJlYW0uanNcIjtcbmV4cG9ydCB7IFdzQ2xpZW50IH0gZnJvbSBcIi4vd3MvY2xpZW50LmpzXCI7XG5leHBvcnQgeyBXc1N0cmVhbSB9IGZyb20gXCIuL3dzL3N0cmVhbS5qc1wiO1xuLyoqIE9wZW4gYSBIcmFuYSBjbGllbnQgb3ZlciBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIHRoZSBnaXZlbiBgdXJsYC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuV3ModXJsLCBqd3QsIHByb3RvY29sVmVyc2lvbiA9IDIpIHtcbiAgICBpZiAodHlwZW9mIFdlYlNvY2tldCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0aHJvdyBuZXcgV2ViU29ja2V0VW5zdXBwb3J0ZWRFcnJvcihcIldlYlNvY2tldHMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudFwiKTtcbiAgICB9XG4gICAgdmFyIHN1YnByb3RvY29scyA9IHVuZGVmaW5lZDtcbiAgICBpZiAocHJvdG9jb2xWZXJzaW9uID09IDMpIHtcbiAgICAgICAgc3VicHJvdG9jb2xzID0gQXJyYXkuZnJvbShzdWJwcm90b2NvbHNWMy5rZXlzKCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3VicHJvdG9jb2xzID0gQXJyYXkuZnJvbShzdWJwcm90b2NvbHNWMi5rZXlzKCkpO1xuICAgIH1cbiAgICBjb25zdCBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHVybCwgc3VicHJvdG9jb2xzKTtcbiAgICByZXR1cm4gbmV3IFdzQ2xpZW50KHNvY2tldCwgand0KTtcbn1cbi8qKiBPcGVuIGEgSHJhbmEgY2xpZW50IG92ZXIgSFRUUCBjb25uZWN0ZWQgdG8gdGhlIGdpdmVuIGB1cmxgLlxuICpcbiAqIElmIHRoZSBgY3VzdG9tRmV0Y2hgIGFyZ3VtZW50IGlzIHBhc3NlZCBhbmQgbm90IGB1bmRlZmluZWRgLCBpdCBpcyB1c2VkIGluIHBsYWNlIG9mIHRoZSBgZmV0Y2hgIGZ1bmN0aW9uXG4gKiBmcm9tIGBAbGlic3FsL2lzb21vcnBoaWMtZmV0Y2hgLiBUaGlzIGZ1bmN0aW9uIGlzIGFsd2F5cyBjYWxsZWQgd2l0aCBhIGBSZXF1ZXN0YCBvYmplY3QgZnJvbVxuICogYEBsaWJzcWwvaXNvbW9ycGhpYy1mZXRjaGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuSHR0cCh1cmwsIGp3dCwgY3VzdG9tRmV0Y2gsIHByb3RvY29sVmVyc2lvbiA9IDIpIHtcbiAgICByZXR1cm4gbmV3IEh0dHBDbGllbnQodXJsIGluc3RhbmNlb2YgVVJMID8gdXJsIDogbmV3IFVSTCh1cmwpLCBqd3QsIGN1c3RvbUZldGNoLCBwcm90b2NvbFZlcnNpb24pO1xufVxuIiwgImltcG9ydCAqIGFzIGhyYW5hIGZyb20gXCJAbGlic3FsL2hyYW5hLWNsaWVudFwiO1xuaW1wb3J0IHsgTGlic3FsRXJyb3IgfSBmcm9tIFwiQGxpYnNxbC9jb3JlL2FwaVwiO1xuaW1wb3J0IHsgdHJhbnNhY3Rpb25Nb2RlVG9CZWdpbiwgUmVzdWx0U2V0SW1wbCB9IGZyb20gXCJAbGlic3FsL2NvcmUvdXRpbFwiO1xuZXhwb3J0IGNsYXNzIEhyYW5hVHJhbnNhY3Rpb24ge1xuICAgICNtb2RlO1xuICAgICN2ZXJzaW9uO1xuICAgIC8vIFByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBCRUdJTiBzdGF0ZW1lbnQgY29tcGxldGVzLCBvciBgdW5kZWZpbmVkYCBpZiB3ZSBoYXZlbid0IGV4ZWN1dGVkIHRoZVxuICAgIC8vIEJFR0lOIHN0YXRlbWVudCB5ZXQuXG4gICAgI3N0YXJ0ZWQ7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IobW9kZSwgdmVyc2lvbikge1xuICAgICAgICB0aGlzLiNtb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy4jdmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGV4ZWN1dGUoc3RtdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaChbc3RtdF0pLnRoZW4oKHJlc3VsdHMpID0+IHJlc3VsdHNbMF0pO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChzdG10cykge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9nZXRTdHJlYW0oKTtcbiAgICAgICAgaWYgKHN0cmVhbS5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihcIkNhbm5vdCBleGVjdXRlIHN0YXRlbWVudHMgYmVjYXVzZSB0aGUgdHJhbnNhY3Rpb24gaXMgY2xvc2VkXCIsIFwiVFJBTlNBQ1RJT05fQ0xPU0VEXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBocmFuYVN0bXRzID0gc3RtdHMubWFwKHN0bXRUb0hyYW5hKTtcbiAgICAgICAgICAgIGxldCByb3dzUHJvbWlzZXM7XG4gICAgICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zYWN0aW9uIGhhc24ndCBzdGFydGVkIHlldCwgc28gd2UgbmVlZCB0byBzZW5kIHRoZSBCRUdJTiBzdGF0ZW1lbnQgaW4gYSBiYXRjaCB3aXRoXG4gICAgICAgICAgICAgICAgLy8gYGhyYW5hU3RtdHNgLlxuICAgICAgICAgICAgICAgIHRoaXMuX2dldFNxbENhY2hlKCkuYXBwbHkoaHJhbmFTdG10cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSBzdHJlYW0uYmF0Y2godGhpcy4jdmVyc2lvbiA+PSAzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiZWdpblN0ZXAgPSBiYXRjaC5zdGVwKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5Qcm9taXNlID0gYmVnaW5TdGVwLnJ1bih0cmFuc2FjdGlvbk1vZGVUb0JlZ2luKHRoaXMuI21vZGUpKTtcbiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBgaHJhbmFTdG10c2Agb25seSBpZiB0aGUgQkVHSU4gc3VjY2VlZGVkLCB0byBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCBleGVjdXRlIGl0XG4gICAgICAgICAgICAgICAgLy8gb3V0c2lkZSBvZiBhIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgIGxldCBsYXN0U3RlcCA9IGJlZ2luU3RlcDtcbiAgICAgICAgICAgICAgICByb3dzUHJvbWlzZXMgPSBocmFuYVN0bXRzLm1hcCgoaHJhbmFTdG10KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0bXRTdGVwID0gYmF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdGVwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25kaXRpb24oaHJhbmEuQmF0Y2hDb25kLm9rKGxhc3RTdGVwKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiN2ZXJzaW9uID49IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBIcmFuYSB2ZXJzaW9uIHN1cHBvcnRzIGl0LCBtYWtlIHN1cmUgdGhhdCB3ZSBhcmUgc3RpbGwgaW4gYSB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgc3RtdFN0ZXAuY29uZGl0aW9uKGhyYW5hLkJhdGNoQ29uZC5ub3QoaHJhbmEuQmF0Y2hDb25kLmlzQXV0b2NvbW1pdChiYXRjaCkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dzUHJvbWlzZSA9IHN0bXRTdGVwLnF1ZXJ5KGhyYW5hU3RtdCk7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NQcm9taXNlLmNhdGNoKCgpID0+IHVuZGVmaW5lZCk7IC8vIHNpbGVuY2UgTm9kZSB3YXJuaW5nXG4gICAgICAgICAgICAgICAgICAgIGxhc3RTdGVwID0gc3RtdFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dzUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBgdGhpcy4jc3RhcnRlZGAgaXMgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5IG9ubHkgaWYgdGhlIGJhdGNoIGFuZCB0aGUgQkVHSU4gc3RhdGVtZW50IGluc2lkZVxuICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBiYXRjaCBhcmUgYm90aCBzdWNjZXNzZnVsLlxuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBiYXRjaFxuICAgICAgICAgICAgICAgICAgICAuZXhlY3V0ZSgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGJlZ2luUHJvbWlzZSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNzdGFydGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgQkVHSU4gZmFpbGVkLCB0aGUgdHJhbnNhY3Rpb24gaXMgdW51c2FibGUgYW5kIHdlIG11c3QgY2xvc2UgaXQuIEhvd2V2ZXIsIGlmIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBCRUdJTiBzdWNlZWRzIGFuZCBgaHJhbmFTdG10c2AgZmFpbCwgdGhlIHRyYW5zYWN0aW9uIGlzIF9ub3RfIGNsb3NlZC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiN2ZXJzaW9uIDwgMykge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNhY3Rpb24gaGFzIHN0YXJ0ZWQsIHNvIHdlIG11c3Qgd2FpdCB1bnRpbCB0aGUgQkVHSU4gc3RhdGVtZW50IGNvbXBsZXRlZCB0byBtYWtlXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1cmUgdGhhdCB3ZSBkb24ndCBleGVjdXRlIGBocmFuYVN0bXRzYCBvdXRzaWRlIG9mIGEgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3N0YXJ0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNhY3Rpb24gaGFzIHN0YXJ0ZWQsIGJ1dCB3ZSB3aWxsIHVzZSBgaHJhbmEuQmF0Y2hDb25kLmlzQXV0b2NvbW1pdCgpYCB0byBtYWtlXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1cmUgdGhhdCB3ZSBkb24ndCBleGVjdXRlIGBocmFuYVN0bXRzYCBvdXRzaWRlIG9mIGEgdHJhbnNhY3Rpb24sIHNvIHdlIGRvbid0IGhhdmUgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgYHRoaXMuI3N0YXJ0ZWRgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2dldFNxbENhY2hlKCkuYXBwbHkoaHJhbmFTdG10cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSBzdHJlYW0uYmF0Y2godGhpcy4jdmVyc2lvbiA+PSAzKTtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgcm93c1Byb21pc2VzID0gaHJhbmFTdG10cy5tYXAoKGhyYW5hU3RtdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdG10U3RlcCA9IGJhdGNoLnN0ZXAoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RTdGVwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0bXRTdGVwLmNvbmRpdGlvbihocmFuYS5CYXRjaENvbmQub2sobGFzdFN0ZXApKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4jdmVyc2lvbiA+PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG10U3RlcC5jb25kaXRpb24oaHJhbmEuQmF0Y2hDb25kLm5vdChocmFuYS5CYXRjaENvbmQuaXNBdXRvY29tbWl0KGJhdGNoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd3NQcm9taXNlID0gc3RtdFN0ZXAucXVlcnkoaHJhbmFTdG10KTtcbiAgICAgICAgICAgICAgICAgICAgcm93c1Byb21pc2UuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKTsgLy8gc2lsZW5jZSBOb2RlIHdhcm5pbmdcbiAgICAgICAgICAgICAgICAgICAgbGFzdFN0ZXAgPSBzdG10U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvd3NQcm9taXNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IGJhdGNoLmV4ZWN1dGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFNldHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgcm93c1Byb21pc2Ugb2Ygcm93c1Byb21pc2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IGF3YWl0IHJvd3NQcm9taXNlO1xuICAgICAgICAgICAgICAgIGlmIChyb3dzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKFwiU3RhdGVtZW50IGluIGEgdHJhbnNhY3Rpb24gd2FzIG5vdCBleGVjdXRlZCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJwcm9iYWJseSBiZWNhdXNlIHRoZSB0cmFuc2FjdGlvbiBoYXMgYmVlbiByb2xsZWQgYmFja1wiLCBcIlRSQU5TQUNUSU9OX0NMT1NFRFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0U2V0cy5wdXNoKHJlc3VsdFNldEZyb21IcmFuYShyb3dzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0U2V0cztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbWFwSHJhbmFFcnJvcihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBleGVjdXRlTXVsdGlwbGUoc3FsKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX2dldFN0cmVhbSgpO1xuICAgICAgICBpZiAoc3RyZWFtLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKFwiQ2Fubm90IGV4ZWN1dGUgc3RhdGVtZW50cyBiZWNhdXNlIHRoZSB0cmFuc2FjdGlvbiBpcyBjbG9zZWRcIiwgXCJUUkFOU0FDVElPTl9DTE9TRURcIik7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzdGFydGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdHJhbnNhY3Rpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LCBzdGFydCBpdCBub3dcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGFydGVkID0gc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgIC5ydW4odHJhbnNhY3Rpb25Nb2RlVG9CZWdpbih0aGlzLiNtb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNzdGFydGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2FpdCB1bnRpbCB0aGUgdHJhbnNhY3Rpb24gaGFzIHN0YXJ0ZWRcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNzdGFydGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc3RyZWFtLnNlcXVlbmNlKHNxbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG1hcEhyYW5hRXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcm9sbGJhY2soKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9nZXRTdHJlYW0oKTtcbiAgICAgICAgICAgIGlmIChzdHJlYW0uY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGhhdmUgdG8gd2FpdCBmb3IgdGhlIEJFR0lOIHN0YXRlbWVudCB0byBjb21wbGV0ZS4gSWYgdGhlIEJFR0lOIGZhaWxzLCB3ZSB3aWxsXG4gICAgICAgICAgICAgICAgLy8gZXhlY3V0ZSBhIFJPTExCQUNLIG91dHNpZGUgb2YgYW4gYWN0aXZlIHRyYW5zYWN0aW9uLCB3aGljaCBzaG91bGQgYmUgaGFybWxlc3MuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBkaWQgbm90aGluZyBpbiB0aGUgdHJhbnNhY3Rpb24sIHNvIHRoZXJlIGlzIG5vdGhpbmcgdG8gcm9sbGJhY2suXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGlwZWxpbmUgdGhlIFJPTExCQUNLIHN0YXRlbWVudCBhbmQgdGhlIHN0cmVhbSBjbG9zZS5cbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBzdHJlYW0ucnVuKFwiUk9MTEJBQ0tcIikuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdHJlYW0uY2xvc2VHcmFjZWZ1bGx5KCk7XG4gICAgICAgICAgICBhd2FpdCBwcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gYHRoaXMuY2xvc2UoKWAgbWF5IGNsb3NlIHRoZSBgaHJhbmEuQ2xpZW50YCwgd2hpY2ggYWJvcnRzIGFsbCBwZW5kaW5nIHN0cmVhbSByZXF1ZXN0cywgc28gd2VcbiAgICAgICAgICAgIC8vIG11c3QgY2FsbCBpdCBfYWZ0ZXJfIHdlIHJlY2VpdmUgdGhlIFJPTExCQUNLIHJlc3BvbnNlLlxuICAgICAgICAgICAgLy8gQWxzbyBub3RlIHRoYXQgdGhlIGN1cnJlbnQgc3RyZWFtIHNob3VsZCBhbHJlYWR5IGJlIGNsb3NlZCwgYnV0IHdlIG5lZWQgdG8gY2FsbCBgdGhpcy5jbG9zZSgpYFxuICAgICAgICAgICAgLy8gYW55d2F5LCBiZWNhdXNlIGl0IG1heSBuZWVkIHRvIGRvIG1vcmUgY2xlYW51cC5cbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIC8vICh0aGlzIG1ldGhvZCBpcyBhbmFsb2dvdXMgdG8gYHJvbGxiYWNrKClgKVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5fZ2V0U3RyZWFtKCk7XG4gICAgICAgICAgICBpZiAoc3RyZWFtLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihcIkNhbm5vdCBjb21taXQgdGhlIHRyYW5zYWN0aW9uIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBjbG9zZWRcIiwgXCJUUkFOU0FDVElPTl9DTE9TRURcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIGV4ZWN1dGUgdGhlIENPTU1JVCBvbmx5IGlmIHRoZSBCRUdJTiB3YXMgc3VjY2Vzc2Z1bC5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNzdGFydGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHN0cmVhbS5ydW4oXCJDT01NSVRcIikuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdHJlYW0uY2xvc2VHcmFjZWZ1bGx5KCk7XG4gICAgICAgICAgICBhd2FpdCBwcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVIcmFuYUJhdGNoKG1vZGUsIHZlcnNpb24sIGJhdGNoLCBocmFuYVN0bXRzLCBkaXNhYmxlRm9yZWlnbktleXMgPSBmYWxzZSkge1xuICAgIGlmIChkaXNhYmxlRm9yZWlnbktleXMpIHtcbiAgICAgICAgYmF0Y2guc3RlcCgpLnJ1bihcIlBSQUdNQSBmb3JlaWduX2tleXM9b2ZmXCIpO1xuICAgIH1cbiAgICBjb25zdCBiZWdpblN0ZXAgPSBiYXRjaC5zdGVwKCk7XG4gICAgY29uc3QgYmVnaW5Qcm9taXNlID0gYmVnaW5TdGVwLnJ1bih0cmFuc2FjdGlvbk1vZGVUb0JlZ2luKG1vZGUpKTtcbiAgICBsZXQgbGFzdFN0ZXAgPSBiZWdpblN0ZXA7XG4gICAgY29uc3Qgc3RtdFByb21pc2VzID0gaHJhbmFTdG10cy5tYXAoKGhyYW5hU3RtdCkgPT4ge1xuICAgICAgICBjb25zdCBzdG10U3RlcCA9IGJhdGNoLnN0ZXAoKS5jb25kaXRpb24oaHJhbmEuQmF0Y2hDb25kLm9rKGxhc3RTdGVwKSk7XG4gICAgICAgIGlmICh2ZXJzaW9uID49IDMpIHtcbiAgICAgICAgICAgIHN0bXRTdGVwLmNvbmRpdGlvbihocmFuYS5CYXRjaENvbmQubm90KGhyYW5hLkJhdGNoQ29uZC5pc0F1dG9jb21taXQoYmF0Y2gpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RtdFByb21pc2UgPSBzdG10U3RlcC5xdWVyeShocmFuYVN0bXQpO1xuICAgICAgICBsYXN0U3RlcCA9IHN0bXRTdGVwO1xuICAgICAgICByZXR1cm4gc3RtdFByb21pc2U7XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0U3RlcCA9IGJhdGNoLnN0ZXAoKS5jb25kaXRpb24oaHJhbmEuQmF0Y2hDb25kLm9rKGxhc3RTdGVwKSk7XG4gICAgaWYgKHZlcnNpb24gPj0gMykge1xuICAgICAgICBjb21taXRTdGVwLmNvbmRpdGlvbihocmFuYS5CYXRjaENvbmQubm90KGhyYW5hLkJhdGNoQ29uZC5pc0F1dG9jb21taXQoYmF0Y2gpKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1pdFByb21pc2UgPSBjb21taXRTdGVwLnJ1bihcIkNPTU1JVFwiKTtcbiAgICBjb25zdCByb2xsYmFja1N0ZXAgPSBiYXRjaFxuICAgICAgICAuc3RlcCgpXG4gICAgICAgIC5jb25kaXRpb24oaHJhbmEuQmF0Y2hDb25kLm5vdChocmFuYS5CYXRjaENvbmQub2soY29tbWl0U3RlcCkpKTtcbiAgICByb2xsYmFja1N0ZXAucnVuKFwiUk9MTEJBQ0tcIikuY2F0Y2goKF8pID0+IHVuZGVmaW5lZCk7XG4gICAgaWYgKGRpc2FibGVGb3JlaWduS2V5cykge1xuICAgICAgICBiYXRjaC5zdGVwKCkucnVuKFwiUFJBR01BIGZvcmVpZ25fa2V5cz1vblwiKTtcbiAgICB9XG4gICAgYXdhaXQgYmF0Y2guZXhlY3V0ZSgpO1xuICAgIGNvbnN0IHJlc3VsdFNldHMgPSBbXTtcbiAgICBhd2FpdCBiZWdpblByb21pc2U7XG4gICAgZm9yIChjb25zdCBzdG10UHJvbWlzZSBvZiBzdG10UHJvbWlzZXMpIHtcbiAgICAgICAgY29uc3QgaHJhbmFSb3dzID0gYXdhaXQgc3RtdFByb21pc2U7XG4gICAgICAgIGlmIChocmFuYVJvd3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKFwiU3RhdGVtZW50IGluIGEgYmF0Y2ggd2FzIG5vdCBleGVjdXRlZCwgcHJvYmFibHkgYmVjYXVzZSB0aGUgdHJhbnNhY3Rpb24gaGFzIGJlZW4gcm9sbGVkIGJhY2tcIiwgXCJUUkFOU0FDVElPTl9DTE9TRURcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0U2V0cy5wdXNoKHJlc3VsdFNldEZyb21IcmFuYShocmFuYVJvd3MpKTtcbiAgICB9XG4gICAgYXdhaXQgY29tbWl0UHJvbWlzZTtcbiAgICByZXR1cm4gcmVzdWx0U2V0cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdG10VG9IcmFuYShzdG10KSB7XG4gICAgaWYgKHR5cGVvZiBzdG10ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBuZXcgaHJhbmEuU3RtdChzdG10KTtcbiAgICB9XG4gICAgY29uc3QgaHJhbmFTdG10ID0gbmV3IGhyYW5hLlN0bXQoc3RtdC5zcWwpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0bXQuYXJncykpIHtcbiAgICAgICAgaHJhbmFTdG10LmJpbmRJbmRleGVzKHN0bXQuYXJncyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzdG10LmFyZ3MpKSB7XG4gICAgICAgICAgICBocmFuYVN0bXQuYmluZE5hbWUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhyYW5hU3RtdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXN1bHRTZXRGcm9tSHJhbmEoaHJhbmFSb3dzKSB7XG4gICAgY29uc3QgY29sdW1ucyA9IGhyYW5hUm93cy5jb2x1bW5OYW1lcy5tYXAoKGMpID0+IGMgPz8gXCJcIik7XG4gICAgY29uc3QgY29sdW1uVHlwZXMgPSBocmFuYVJvd3MuY29sdW1uRGVjbHR5cGVzLm1hcCgoYykgPT4gYyA/PyBcIlwiKTtcbiAgICBjb25zdCByb3dzID0gaHJhbmFSb3dzLnJvd3M7XG4gICAgY29uc3Qgcm93c0FmZmVjdGVkID0gaHJhbmFSb3dzLmFmZmVjdGVkUm93Q291bnQ7XG4gICAgY29uc3QgbGFzdEluc2VydFJvd2lkID0gaHJhbmFSb3dzLmxhc3RJbnNlcnRSb3dpZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gaHJhbmFSb3dzLmxhc3RJbnNlcnRSb3dpZFxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gbmV3IFJlc3VsdFNldEltcGwoY29sdW1ucywgY29sdW1uVHlwZXMsIHJvd3MsIHJvd3NBZmZlY3RlZCwgbGFzdEluc2VydFJvd2lkKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBIcmFuYUVycm9yKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIGhyYW5hLkNsaWVudEVycm9yKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBtYXBIcmFuYUVycm9yQ29kZShlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaWJzcWxFcnJvcihlLm1lc3NhZ2UsIGNvZGUsIHVuZGVmaW5lZCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuZnVuY3Rpb24gbWFwSHJhbmFFcnJvckNvZGUoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgaHJhbmEuUmVzcG9uc2VFcnJvciAmJiBlLmNvZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZS5jb2RlO1xuICAgIH1cbiAgICBlbHNlIGlmIChlIGluc3RhbmNlb2YgaHJhbmEuUHJvdG9FcnJvcikge1xuICAgICAgICByZXR1cm4gXCJIUkFOQV9QUk9UT19FUlJPUlwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChlIGluc3RhbmNlb2YgaHJhbmEuQ2xvc2VkRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGUuY2F1c2UgaW5zdGFuY2VvZiBocmFuYS5DbGllbnRFcnJvclxuICAgICAgICAgICAgPyBtYXBIcmFuYUVycm9yQ29kZShlLmNhdXNlKVxuICAgICAgICAgICAgOiBcIkhSQU5BX0NMT1NFRF9FUlJPUlwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChlIGluc3RhbmNlb2YgaHJhbmEuV2ViU29ja2V0RXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFwiSFJBTkFfV0VCU09DS0VUX0VSUk9SXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBocmFuYS5IdHRwU2VydmVyRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFwiU0VSVkVSX0VSUk9SXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBocmFuYS5Qcm90b2NvbFZlcnNpb25FcnJvcikge1xuICAgICAgICByZXR1cm4gXCJQUk9UT0NPTF9WRVJTSU9OX0VSUk9SXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBocmFuYS5JbnRlcm5hbEVycm9yKSB7XG4gICAgICAgIHJldHVybiBcIklOVEVSTkFMX0VSUk9SXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJVTktOT1dOXCI7XG4gICAgfVxufVxuIiwgImV4cG9ydCBjbGFzcyBTcWxDYWNoZSB7XG4gICAgI293bmVyO1xuICAgICNzcWxzO1xuICAgIGNhcGFjaXR5O1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBjYXBhY2l0eSkge1xuICAgICAgICB0aGlzLiNvd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLiNzcWxzID0gbmV3IExydSgpO1xuICAgICAgICB0aGlzLmNhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgfVxuICAgIC8vIFJlcGxhY2VzIFNRTCBzdHJpbmdzIHdpdGggY2FjaGVkIGBocmFuYS5TcWxgIG9iamVjdHMgaW4gdGhlIHN0YXRlbWVudHMgaW4gYGhyYW5hU3RtdHNgLiBBZnRlciB0aGlzXG4gICAgLy8gZnVuY3Rpb24gcmV0dXJucywgd2UgZ3VhcmFudGVlIHRoYXQgYWxsIGBocmFuYVN0bXRzYCByZWZlciB0byB2YWxpZCAobm90IGNsb3NlZCkgYGhyYW5hLlNxbGAgb2JqZWN0cyxcbiAgICAvLyBidXQgX3dlIG1heSBpbnZhbGlkYXRlIGFueSBvdGhlciBgaHJhbmEuU3FsYCBvYmplY3RzXyAoYnkgY2xvc2luZyB0aGVtLCB0aHVzIHJlbW92aW5nIHRoZW0gZnJvbSB0aGVcbiAgICAvLyBzZXJ2ZXIpLlxuICAgIC8vXG4gICAgLy8gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnMgdGhhdCBhZnRlciBjYWxsaW5nIHRoaXMgZnVuY3Rpb24sIHlvdSBjYW4gdXNlIHRoZSBzdGF0ZW1lbnRzIG9ubHkgdXAgdG8gdGhlXG4gICAgLy8gZmlyc3QgYGF3YWl0YCwgYmVjYXVzZSBjb25jdXJyZW50IGNvZGUgbWF5IGFsc28gdXNlIHRoZSBjYWNoZSBhbmQgaW52YWxpZGF0ZSB0aG9zZSBzdGF0ZW1lbnRzLlxuICAgIGFwcGx5KGhyYW5hU3RtdHMpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FwYWNpdHkgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzZWRTcWxPYmpzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGhyYW5hU3RtdCBvZiBocmFuYVN0bXRzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGhyYW5hU3RtdC5zcWwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNxbFRleHQgPSBocmFuYVN0bXQuc3FsO1xuICAgICAgICAgICAgLy8gU3RvcmVkIFNRTCBjYW5ub3QgZXhjZWVkIDVrYi5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90dXJzb2RhdGFiYXNlL2xpYnNxbC9ibG9iL2U5ZDYzN2UwNTE2ODVmOTJiMGRhNDM4NDk1MDdiNWVmNDIzMmZiZWIvbGlic3FsLXNlcnZlci9zcmMvaHJhbmEvaHR0cC9yZXF1ZXN0LnJzI0wxMFxuICAgICAgICAgICAgaWYgKHNxbFRleHQubGVuZ3RoID49IDUwMDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcWxPYmogPSB0aGlzLiNzcWxzLmdldChzcWxUZXh0KTtcbiAgICAgICAgICAgIGlmIChzcWxPYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLiNzcWxzLnNpemUgKyAxID4gdGhpcy5jYXBhY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbZXZpY3RTcWxUZXh0LCBldmljdFNxbE9ial0gPSB0aGlzLiNzcWxzLnBlZWtMcnUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZWRTcWxPYmpzLmhhcyhldmljdFNxbE9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBTUUwgb2JqZWN0IHRoYXQgd2UgYXJlIHRyeWluZyB0byBldmljdCBpcyBhbHJlYWR5IGluIHVzZSBpbiB0aGlzIGJhdGNoLCBzbyB3ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXVzdCBub3QgZXZpY3QgYW5kIGNsb3NlIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZXZpY3RTcWxPYmouY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3Fscy5kZWxldGUoZXZpY3RTcWxUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI3NxbHMuc2l6ZSArIDEgPD0gdGhpcy5jYXBhY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICBzcWxPYmogPSB0aGlzLiNvd25lci5zdG9yZVNxbChzcWxUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3Fscy5zZXQoc3FsVGV4dCwgc3FsT2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3FsT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBocmFuYVN0bXQuc3FsID0gc3FsT2JqO1xuICAgICAgICAgICAgICAgIHVzZWRTcWxPYmpzLmFkZChzcWxPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgTHJ1IHtcbiAgICAvLyBUaGlzIG1hcHMga2V5cyB0byB0aGUgY2FjaGUgdmFsdWVzLiBUaGUgZW50cmllcyBhcmUgb3JkZXJlZCBieSB0aGVpciBsYXN0IHVzZSAoZW50aXJlcyB0aGF0IHdlcmUgdXNlZFxuICAgIC8vIG1vc3QgcmVjZW50bHkgYXJlIGF0IHRoZSBlbmQpLlxuICAgICNjYWNoZTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy4jY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLiNjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIG1vdmUgdGhlIGVudHJ5IHRvIHRoZSBiYWNrIG9mIHRoZSBNYXBcbiAgICAgICAgICAgIHRoaXMuI2NhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgdGhpcy4jY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy4jY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICBwZWVrTHJ1KCkge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuI2NhY2hlLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgdGhpcy4jY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY2FjaGUuc2l6ZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0ICogYXMgaHJhbmEgZnJvbSBcIkBsaWJzcWwvaHJhbmEtY2xpZW50XCI7XG5pbXBvcnQgeyBMaWJzcWxFcnJvciB9IGZyb20gXCJAbGlic3FsL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBleHBhbmRDb25maWcgfSBmcm9tIFwiQGxpYnNxbC9jb3JlL2NvbmZpZ1wiO1xuaW1wb3J0IHsgSHJhbmFUcmFuc2FjdGlvbiwgZXhlY3V0ZUhyYW5hQmF0Y2gsIHN0bXRUb0hyYW5hLCByZXN1bHRTZXRGcm9tSHJhbmEsIG1hcEhyYW5hRXJyb3IsIH0gZnJvbSBcIi4vaHJhbmEuanNcIjtcbmltcG9ydCB7IFNxbENhY2hlIH0gZnJvbSBcIi4vc3FsX2NhY2hlLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGVCYXNlVXJsIH0gZnJvbSBcIkBsaWJzcWwvY29yZS91cmlcIjtcbmltcG9ydCB7IHN1cHBvcnRlZFVybExpbmsgfSBmcm9tIFwiQGxpYnNxbC9jb3JlL3V0aWxcIjtcbmltcG9ydCBwcm9taXNlTGltaXQgZnJvbSBcInByb21pc2UtbGltaXRcIjtcbmV4cG9ydCAqIGZyb20gXCJAbGlic3FsL2NvcmUvYXBpXCI7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KGNvbmZpZykge1xuICAgIHJldHVybiBfY3JlYXRlQ2xpZW50KGV4cGFuZENvbmZpZyhjb25maWcsIGZhbHNlKSk7XG59XG4vKiogQHByaXZhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBfY3JlYXRlQ2xpZW50KGNvbmZpZykge1xuICAgIGlmIChjb25maWcuc2NoZW1lICE9PSBcIndzc1wiICYmIGNvbmZpZy5zY2hlbWUgIT09IFwid3NcIikge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoJ1RoZSBXZWJTb2NrZXQgY2xpZW50IHN1cHBvcnRzIG9ubHkgXCJsaWJzcWw6XCIsIFwid3NzOlwiIGFuZCBcIndzOlwiIFVSTHMsICcgK1xuICAgICAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KGNvbmZpZy5zY2hlbWUgKyBcIjpcIil9LiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHJlYWQgJHtzdXBwb3J0ZWRVcmxMaW5rfWAsIFwiVVJMX1NDSEVNRV9OT1RfU1VQUE9SVEVEXCIpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmVuY3J5cHRpb25LZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoXCJFbmNyeXB0aW9uIGtleSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSByZW1vdGUgY2xpZW50LlwiLCBcIkVOQ1JZUFRJT05fS0VZX05PVF9TVVBQT1JURURcIik7XG4gICAgfVxuICAgIGlmIChjb25maWcuc2NoZW1lID09PSBcIndzXCIgJiYgY29uZmlnLnRscykge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoYEEgXCJ3czpcIiBVUkwgY2Fubm90IG9wdCBpbnRvIFRMUyBieSB1c2luZyA/dGxzPTFgLCBcIlVSTF9JTlZBTElEXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb25maWcuc2NoZW1lID09PSBcIndzc1wiICYmICFjb25maWcudGxzKSB7XG4gICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihgQSBcIndzczpcIiBVUkwgY2Fubm90IG9wdCBvdXQgb2YgVExTIGJ5IHVzaW5nID90bHM9MGAsIFwiVVJMX0lOVkFMSURcIik7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IGVuY29kZUJhc2VVcmwoY29uZmlnLnNjaGVtZSwgY29uZmlnLmF1dGhvcml0eSwgY29uZmlnLnBhdGgpO1xuICAgIGxldCBjbGllbnQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY2xpZW50ID0gaHJhbmEub3BlbldzKHVybCwgY29uZmlnLmF1dGhUb2tlbik7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgaHJhbmEuV2ViU29ja2V0VW5zdXBwb3J0ZWRFcnJvcikge1xuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVkU2NoZW1lID0gY29uZmlnLnNjaGVtZSA9PT0gXCJ3c3NcIiA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO1xuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVkVXJsID0gZW5jb2RlQmFzZVVybChzdWdnZXN0ZWRTY2hlbWUsIGNvbmZpZy5hdXRob3JpdHksIGNvbmZpZy5wYXRoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihcIlRoaXMgZW52aXJvbm1lbnQgZG9lcyBub3Qgc3VwcG9ydCBXZWJTb2NrZXRzLCBwbGVhc2Ugc3dpdGNoIHRvIHRoZSBIVFRQIGNsaWVudCBieSB1c2luZyBcIiArXG4gICAgICAgICAgICAgICAgYGEgXCIke3N1Z2dlc3RlZFNjaGVtZX06XCIgVVJMICgke0pTT04uc3RyaW5naWZ5KHN1Z2dlc3RlZFVybCl9KS4gYCArXG4gICAgICAgICAgICAgICAgYEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgcmVhZCAke3N1cHBvcnRlZFVybExpbmt9YCwgXCJXRUJTT0NLRVRTX05PVF9TVVBQT1JURURcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbWFwSHJhbmFFcnJvcihlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBXc0NsaWVudChjbGllbnQsIHVybCwgY29uZmlnLmF1dGhUb2tlbiwgY29uZmlnLmludE1vZGUsIGNvbmZpZy5jb25jdXJyZW5jeSk7XG59XG5jb25zdCBtYXhDb25uQWdlTWlsbGlzID0gNjAgKiAxMDAwO1xuY29uc3Qgc3FsQ2FjaGVDYXBhY2l0eSA9IDEwMDtcbmV4cG9ydCBjbGFzcyBXc0NsaWVudCB7XG4gICAgI3VybDtcbiAgICAjYXV0aFRva2VuO1xuICAgICNpbnRNb2RlO1xuICAgIC8vIFN0YXRlIG9mIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uIFRoZSBgaHJhbmEuV3NDbGllbnRgIGluc2lkZSBtYXkgYmUgY2xvc2VkIGF0IGFueSBtb21lbnQgZHVlIHRvIGFuXG4gICAgLy8gYXN5bmNocm9ub3VzIGVycm9yLlxuICAgICNjb25uU3RhdGU7XG4gICAgLy8gSWYgZGVmaW5lZCwgdGhpcyBpcyBhIGNvbm5lY3Rpb24gdGhhdCB3aWxsIGJlIHVzZWQgaW4gdGhlIGZ1dHVyZSwgb25jZSBpdCBpcyByZWFkeS5cbiAgICAjZnV0dXJlQ29ublN0YXRlO1xuICAgIGNsb3NlZDtcbiAgICBwcm90b2NvbDtcbiAgICAjaXNTY2hlbWFEYXRhYmFzZTtcbiAgICAjcHJvbWlzZUxpbWl0RnVuY3Rpb247XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCB1cmwsIGF1dGhUb2tlbiwgaW50TW9kZSwgY29uY3VycmVuY3kpIHtcbiAgICAgICAgdGhpcy4jdXJsID0gdXJsO1xuICAgICAgICB0aGlzLiNhdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gICAgICAgIHRoaXMuI2ludE1vZGUgPSBpbnRNb2RlO1xuICAgICAgICB0aGlzLiNjb25uU3RhdGUgPSB0aGlzLiNvcGVuQ29ubihjbGllbnQpO1xuICAgICAgICB0aGlzLiNmdXR1cmVDb25uU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBcIndzXCI7XG4gICAgICAgIHRoaXMuI3Byb21pc2VMaW1pdEZ1bmN0aW9uID0gcHJvbWlzZUxpbWl0KGNvbmN1cnJlbmN5KTtcbiAgICB9XG4gICAgYXN5bmMgbGltaXQoZm4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Byb21pc2VMaW1pdEZ1bmN0aW9uKGZuKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzdG10T3JTcWwsIGFyZ3MpIHtcbiAgICAgICAgbGV0IHN0bXQ7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RtdE9yU3FsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBzdG10ID0ge1xuICAgICAgICAgICAgICAgIHNxbDogc3RtdE9yU3FsLFxuICAgICAgICAgICAgICAgIGFyZ3M6IGFyZ3MgfHwgW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RtdCA9IHN0bXRPclNxbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5saW1pdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1TdGF0ZSA9IGF3YWl0IHRoaXMuI29wZW5TdHJlYW0oKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaHJhbmFTdG10ID0gc3RtdFRvSHJhbmEoc3RtdCk7XG4gICAgICAgICAgICAgICAgLy8gU2NoZWR1bGUgYWxsIG9wZXJhdGlvbnMgc3luY2hyb25vdXNseSwgc28gdGhleSB3aWxsIGJlIHBpcGVsaW5lZCBhbmQgZXhlY3V0ZWQgaW4gYSBzaW5nbGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIHJvdW5kdHJpcC5cbiAgICAgICAgICAgICAgICBzdHJlYW1TdGF0ZS5jb25uLnNxbENhY2hlLmFwcGx5KFtocmFuYVN0bXRdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBocmFuYVJvd3NQcm9taXNlID0gc3RyZWFtU3RhdGUuc3RyZWFtLnF1ZXJ5KGhyYW5hU3RtdCk7XG4gICAgICAgICAgICAgICAgc3RyZWFtU3RhdGUuc3RyZWFtLmNsb3NlR3JhY2VmdWxseSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhyYW5hUm93c1Jlc3VsdCA9IGF3YWl0IGhyYW5hUm93c1Byb21pc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFNldEZyb21IcmFuYShocmFuYVJvd3NSZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2VTdHJlYW0oc3RyZWFtU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goc3RtdHMsIG1vZGUgPSBcImRlZmVycmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtU3RhdGUgPSBhd2FpdCB0aGlzLiNvcGVuU3RyZWFtKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhyYW5hU3RtdHMgPSBzdG10cy5tYXAoc3RtdFRvSHJhbmEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCBzdHJlYW1TdGF0ZS5jb25uLmNsaWVudC5nZXRWZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgLy8gU2NoZWR1bGUgYWxsIG9wZXJhdGlvbnMgc3luY2hyb25vdXNseSwgc28gdGhleSB3aWxsIGJlIHBpcGVsaW5lZCBhbmQgZXhlY3V0ZWQgaW4gYSBzaW5nbGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIHJvdW5kdHJpcC5cbiAgICAgICAgICAgICAgICBzdHJlYW1TdGF0ZS5jb25uLnNxbENhY2hlLmFwcGx5KGhyYW5hU3RtdHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gc3RyZWFtU3RhdGUuc3RyZWFtLmJhdGNoKHZlcnNpb24gPj0gMyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0c1Byb21pc2UgPSBleGVjdXRlSHJhbmFCYXRjaChtb2RlLCB2ZXJzaW9uLCBiYXRjaCwgaHJhbmFTdG10cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHJlc3VsdHNQcm9taXNlO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2VTdHJlYW0oc3RyZWFtU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgbWlncmF0ZShzdG10cykge1xuICAgICAgICByZXR1cm4gdGhpcy5saW1pdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1TdGF0ZSA9IGF3YWl0IHRoaXMuI29wZW5TdHJlYW0oKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaHJhbmFTdG10cyA9IHN0bXRzLm1hcChzdG10VG9IcmFuYSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IGF3YWl0IHN0cmVhbVN0YXRlLmNvbm4uY2xpZW50LmdldFZlcnNpb24oKTtcbiAgICAgICAgICAgICAgICAvLyBTY2hlZHVsZSBhbGwgb3BlcmF0aW9ucyBzeW5jaHJvbm91c2x5LCBzbyB0aGV5IHdpbGwgYmUgcGlwZWxpbmVkIGFuZCBleGVjdXRlZCBpbiBhIHNpbmdsZVxuICAgICAgICAgICAgICAgIC8vIG5ldHdvcmsgcm91bmR0cmlwLlxuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gc3RyZWFtU3RhdGUuc3RyZWFtLmJhdGNoKHZlcnNpb24gPj0gMyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0c1Byb21pc2UgPSBleGVjdXRlSHJhbmFCYXRjaChcImRlZmVycmVkXCIsIHZlcnNpb24sIGJhdGNoLCBocmFuYVN0bXRzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgcmVzdWx0c1Byb21pc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG1hcEhyYW5hRXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZVN0cmVhbShzdHJlYW1TdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB0cmFuc2FjdGlvbihtb2RlID0gXCJ3cml0ZVwiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbWl0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbVN0YXRlID0gYXdhaXQgdGhpcy4jb3BlblN0cmVhbSgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgc3RyZWFtU3RhdGUuY29ubi5jbGllbnQuZ2V0VmVyc2lvbigpO1xuICAgICAgICAgICAgICAgIC8vIHRoZSBCRUdJTiBzdGF0ZW1lbnQgd2lsbCBiZSBiYXRjaGVkIHdpdGggdGhlIGZpcnN0IHN0YXRlbWVudCBvbiB0aGUgdHJhbnNhY3Rpb24gdG8gc2F2ZSBhXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayByb3VuZHRyaXBcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdzVHJhbnNhY3Rpb24odGhpcywgc3RyZWFtU3RhdGUsIG1vZGUsIHZlcnNpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZVN0cmVhbShzdHJlYW1TdGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbWFwSHJhbmFFcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGVNdWx0aXBsZShzcWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtU3RhdGUgPSBhd2FpdCB0aGlzLiNvcGVuU3RyZWFtKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFNjaGVkdWxlIGFsbCBvcGVyYXRpb25zIHN5bmNocm9ub3VzbHksIHNvIHRoZXkgd2lsbCBiZSBwaXBlbGluZWQgYW5kIGV4ZWN1dGVkIGluIGEgc2luZ2xlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayByb3VuZHRyaXAuXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHN0cmVhbVN0YXRlLnN0cmVhbS5zZXF1ZW5jZShzcWwpO1xuICAgICAgICAgICAgICAgIHN0cmVhbVN0YXRlLnN0cmVhbS5jbG9zZUdyYWNlZnVsbHkoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2VTdHJlYW0oc3RyZWFtU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3luYygpIHtcbiAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKFwic3luYyBub3Qgc3VwcG9ydGVkIGluIHdzIG1vZGVcIiwgXCJTWU5DX05PVF9TVVBQT1JURURcIik7XG4gICAgfVxuICAgIGFzeW5jICNvcGVuU3RyZWFtKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcihcIlRoZSBjbGllbnQgaXMgY2xvc2VkXCIsIFwiQ0xJRU5UX0NMT1NFRFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBhZ2VNaWxsaXMgPSBub3cudmFsdWVPZigpIC0gdGhpcy4jY29ublN0YXRlLm9wZW5UaW1lLnZhbHVlT2YoKTtcbiAgICAgICAgaWYgKGFnZU1pbGxpcyA+IG1heENvbm5BZ2VNaWxsaXMgJiZcbiAgICAgICAgICAgIHRoaXMuI2Z1dHVyZUNvbm5TdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBUaGUgZXhpc3RpbmcgY29ubmVjdGlvbiBpcyB0b28gb2xkLCBsZXQncyBvcGVuIGEgbmV3IG9uZS5cbiAgICAgICAgICAgIGNvbnN0IGZ1dHVyZUNvbm5TdGF0ZSA9IHRoaXMuI29wZW5Db25uKCk7XG4gICAgICAgICAgICB0aGlzLiNmdXR1cmVDb25uU3RhdGUgPSBmdXR1cmVDb25uU3RhdGU7XG4gICAgICAgICAgICAvLyBIb3dldmVyLCBpZiB3ZSB1c2VkIGBmdXR1cmVDb25uU3RhdGVgIGltbWVkaWF0ZWx5LCB3ZSB3b3VsZCBpbnRyb2R1Y2UgYWRkaXRpb25hbCBsYXRlbmN5LFxuICAgICAgICAgICAgLy8gYmVjYXVzZSB3ZSB3b3VsZCBoYXZlIHRvIHdhaXQgZm9yIHRoZSBXZWJTb2NrZXQgaGFuZHNoYWtlIHRvIGNvbXBsZXRlLCBldmVuIHRob3VnaCB3ZSBtYXkgYVxuICAgICAgICAgICAgLy8gaGF2ZSBwZXJmZWN0bHkgZ29vZCBleGlzdGluZyBjb25uZWN0aW9uIGluIGB0aGlzLiNjb25uU3RhdGVgIVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFNvIHdlIHdhaXQgdW50aWwgdGhlIGBocmFuYS5DbGllbnQuZ2V0VmVyc2lvbigpYCBvcGVyYXRpb24gY29tcGxldGVzICh3aGljaCBoYXBwZW5zIHdoZW4gdGhlXG4gICAgICAgICAgICAvLyBXZWJTb2NrZXQgaGFuc2hha2UgY29tcGxldGVzKSwgYW5kIG9ubHkgdGhlbiB3ZSByZXBsYWNlIGB0aGlzLiNjb25uU3RhdGVgIHdpdGhcbiAgICAgICAgICAgIC8vIGBmdXR1cmVDb25uU3RhdGVgLCB3aGljaCBpcyBzdG9yZWQgaW4gYHRoaXMuI2Z1dHVyZUNvbm5TdGF0ZWAgaW4gdGhlIG1lYW50aW1lLlxuICAgICAgICAgICAgZnV0dXJlQ29ublN0YXRlLmNsaWVudC5nZXRWZXJzaW9uKCkudGhlbigoX3ZlcnNpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jY29ublN0YXRlICE9PSBmdXR1cmVDb25uU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBjbG9zZSBgdGhpcy4jY29ublN0YXRlYCBiZWZvcmUgd2UgcmVwbGFjZSBpdC4gSG93ZXZlciwgaXQgaXMgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBgdGhpcy4jY29ublN0YXRlYCBoYXMgYWxyZWFkeSBiZWVuIHJlcGxhY2VkOiBzZWUgdGhlIGNvZGUgYmVsb3cuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiNjb25uU3RhdGUuc3RyZWFtU3RhdGVzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2Nvbm5TdGF0ZS5jbGllbnQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBleGlzdGluZyBzdHJlYW1zIG9uIHRoZSBjb25uZWN0aW9uLCB3ZSBtdXN0IG5vdCBjbG9zZSBpdCwgYmVjYXVzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlc2Ugc3RyZWFtcyB3b3VsZCBiZSBicm9rZW4uIFRoZSBsYXN0IHN0cmVhbSB0byBiZSBjbG9zZWQgd2lsbCBhbHNvIGNsb3NlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpbiBgX2Nsb3NlU3RyZWFtKClgLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuI2Nvbm5TdGF0ZSA9IGZ1dHVyZUNvbm5TdGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLiNmdXR1cmVDb25uU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LCAoX2UpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbmV3IGNvbm5lY3Rpb24gY291bGQgbm90IGJlIGVzdGFibGlzaGVkLCBsZXQncyBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgYW5kIGtlZXBcbiAgICAgICAgICAgICAgICAvLyB1c2luZyB0aGUgZXhpc3RpbmcgY29ubmVjdGlvbi5cbiAgICAgICAgICAgICAgICB0aGlzLiNmdXR1cmVDb25uU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jY29ublN0YXRlLmNsaWVudC5jbG9zZWQpIHtcbiAgICAgICAgICAgIC8vIEFuIGVycm9yIGhhcHBlbmVkIG9uIHRoaXMgY29ubmVjdGlvbiBhbmQgaXQgaGFzIGJlZW4gY2xvc2VkLiBMZXQncyB0cnkgdG8gc2VhbWxlc3NseSByZWNvbm5lY3QuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNmdXR1cmVDb25uU3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBhcmUgYWxyZWFkeSBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nIGEgbmV3IGNvbm5lY3Rpb24sIHNvIGxldCdzIGp1c3QgdXNlIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNjb25uU3RhdGUgPSB0aGlzLiNmdXR1cmVDb25uU3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNjb25uU3RhdGUgPSB0aGlzLiNvcGVuQ29ubigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbWFwSHJhbmFFcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25uU3RhdGUgPSB0aGlzLiNjb25uU3RhdGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBOb3cgd2Ugd2FpdCBmb3IgdGhlIFdlYlNvY2tldCBoYW5kc2hha2UgdG8gY29tcGxldGUgKGlmIGl0IGhhc24ndCBjb21wbGV0ZWQgeWV0KS4gTm90ZSB0aGF0XG4gICAgICAgICAgICAvLyB0aGlzIGRvZXMgbm90IGluY3JlYXNlIGxhdGVuY3ksIGJlY2F1c2UgYW55IG1lc3NhZ2VzIHRoYXQgd2Ugd291bGQgc2VuZCBvbiB0aGUgV2ViU29ja2V0IGJlZm9yZVxuICAgICAgICAgICAgLy8gdGhlIGhhbmRzaGFrZSB3b3VsZCBiZSBxdWV1ZWQgdW50aWwgdGhlIGhhbmRzaGFrZSBpcyBjb21wbGV0ZWQgYW55d2F5LlxuICAgICAgICAgICAgaWYgKGNvbm5TdGF0ZS51c2VTcWxDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29ublN0YXRlLnVzZVNxbENhY2hlID1cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IGNvbm5TdGF0ZS5jbGllbnQuZ2V0VmVyc2lvbigpKSA+PSAyO1xuICAgICAgICAgICAgICAgIGlmIChjb25uU3RhdGUudXNlU3FsQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ublN0YXRlLnNxbENhY2hlLmNhcGFjaXR5ID0gc3FsQ2FjaGVDYXBhY2l0eTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBjb25uU3RhdGUuY2xpZW50Lm9wZW5TdHJlYW0oKTtcbiAgICAgICAgICAgIHN0cmVhbS5pbnRNb2RlID0gdGhpcy4jaW50TW9kZTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbVN0YXRlID0geyBjb25uOiBjb25uU3RhdGUsIHN0cmVhbSB9O1xuICAgICAgICAgICAgY29ublN0YXRlLnN0cmVhbVN0YXRlcy5hZGQoc3RyZWFtU3RhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbVN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNvcGVuQ29ubihjbGllbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNsaWVudCA/Pz0gaHJhbmEub3BlbldzKHRoaXMuI3VybCwgdGhpcy4jYXV0aFRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2xpZW50LFxuICAgICAgICAgICAgICAgIHVzZVNxbENhY2hlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgc3FsQ2FjaGU6IG5ldyBTcWxDYWNoZShjbGllbnQsIDApLFxuICAgICAgICAgICAgICAgIG9wZW5UaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIHN0cmVhbVN0YXRlczogbmV3IFNldCgpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbWFwSHJhbmFFcnJvcihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfY2xvc2VTdHJlYW0oc3RyZWFtU3RhdGUpIHtcbiAgICAgICAgc3RyZWFtU3RhdGUuc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgIGNvbnN0IGNvbm5TdGF0ZSA9IHN0cmVhbVN0YXRlLmNvbm47XG4gICAgICAgIGNvbm5TdGF0ZS5zdHJlYW1TdGF0ZXMuZGVsZXRlKHN0cmVhbVN0YXRlKTtcbiAgICAgICAgaWYgKGNvbm5TdGF0ZS5zdHJlYW1TdGF0ZXMuc2l6ZSA9PT0gMCAmJlxuICAgICAgICAgICAgY29ublN0YXRlICE9PSB0aGlzLiNjb25uU3RhdGUpIHtcbiAgICAgICAgICAgIC8vIFdlIGFyZSBub3QgdXNpbmcgdGhpcyBjb25uZWN0aW9uIGFueW1vcmUgYW5kIHRoaXMgaXMgdGhlIGxhc3Qgc3RyZWFtIHRoYXQgd2FzIHVzaW5nIGl0LCBzbyB3ZVxuICAgICAgICAgICAgLy8gbXVzdCBjbG9zZSBpdCBub3cuXG4gICAgICAgICAgICBjb25uU3RhdGUuY2xpZW50LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI2Nvbm5TdGF0ZS5jbGllbnQuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBXc1RyYW5zYWN0aW9uIGV4dGVuZHMgSHJhbmFUcmFuc2FjdGlvbiB7XG4gICAgI2NsaWVudDtcbiAgICAjc3RyZWFtU3RhdGU7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBzdGF0ZSwgbW9kZSwgdmVyc2lvbikge1xuICAgICAgICBzdXBlcihtb2RlLCB2ZXJzaW9uKTtcbiAgICAgICAgdGhpcy4jY2xpZW50ID0gY2xpZW50O1xuICAgICAgICB0aGlzLiNzdHJlYW1TdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZ2V0U3RyZWFtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtU3RhdGUuc3RyZWFtO1xuICAgIH1cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZ2V0U3FsQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdHJlYW1TdGF0ZS5jb25uLnNxbENhY2hlO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jY2xpZW50Ll9jbG9zZVN0cmVhbSh0aGlzLiNzdHJlYW1TdGF0ZSk7XG4gICAgfVxuICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdHJlYW1TdGF0ZS5zdHJlYW0uY2xvc2VkO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgKiBhcyBocmFuYSBmcm9tIFwiQGxpYnNxbC9ocmFuYS1jbGllbnRcIjtcbmltcG9ydCB7IExpYnNxbEVycm9yIH0gZnJvbSBcIkBsaWJzcWwvY29yZS9hcGlcIjtcbmltcG9ydCB7IGV4cGFuZENvbmZpZyB9IGZyb20gXCJAbGlic3FsL2NvcmUvY29uZmlnXCI7XG5pbXBvcnQgeyBIcmFuYVRyYW5zYWN0aW9uLCBleGVjdXRlSHJhbmFCYXRjaCwgc3RtdFRvSHJhbmEsIHJlc3VsdFNldEZyb21IcmFuYSwgbWFwSHJhbmFFcnJvciwgfSBmcm9tIFwiLi9ocmFuYS5qc1wiO1xuaW1wb3J0IHsgU3FsQ2FjaGUgfSBmcm9tIFwiLi9zcWxfY2FjaGUuanNcIjtcbmltcG9ydCB7IGVuY29kZUJhc2VVcmwgfSBmcm9tIFwiQGxpYnNxbC9jb3JlL3VyaVwiO1xuaW1wb3J0IHsgc3VwcG9ydGVkVXJsTGluayB9IGZyb20gXCJAbGlic3FsL2NvcmUvdXRpbFwiO1xuaW1wb3J0IHByb21pc2VMaW1pdCBmcm9tIFwicHJvbWlzZS1saW1pdFwiO1xuZXhwb3J0ICogZnJvbSBcIkBsaWJzcWwvY29yZS9hcGlcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnQoY29uZmlnKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVDbGllbnQoZXhwYW5kQ29uZmlnKGNvbmZpZywgdHJ1ZSkpO1xufVxuLyoqIEBwcml2YXRlICovXG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUNsaWVudChjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnNjaGVtZSAhPT0gXCJodHRwc1wiICYmIGNvbmZpZy5zY2hlbWUgIT09IFwiaHR0cFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBMaWJzcWxFcnJvcignVGhlIEhUVFAgY2xpZW50IHN1cHBvcnRzIG9ubHkgXCJsaWJzcWw6XCIsIFwiaHR0cHM6XCIgYW5kIFwiaHR0cDpcIiBVUkxzLCAnICtcbiAgICAgICAgICAgIGBnb3QgJHtKU09OLnN0cmluZ2lmeShjb25maWcuc2NoZW1lICsgXCI6XCIpfS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSByZWFkICR7c3VwcG9ydGVkVXJsTGlua31gLCBcIlVSTF9TQ0hFTUVfTk9UX1NVUFBPUlRFRFwiKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5lbmNyeXB0aW9uS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IExpYnNxbEVycm9yKFwiRW5jcnlwdGlvbiBrZXkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgcmVtb3RlIGNsaWVudC5cIiwgXCJFTkNSWVBUSU9OX0tFWV9OT1RfU1VQUE9SVEVEXCIpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnNjaGVtZSA9PT0gXCJodHRwXCIgJiYgY29uZmlnLnRscykge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoYEEgXCJodHRwOlwiIFVSTCBjYW5ub3Qgb3B0IGludG8gVExTIGJ5IHVzaW5nID90bHM9MWAsIFwiVVJMX0lOVkFMSURcIik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbmZpZy5zY2hlbWUgPT09IFwiaHR0cHNcIiAmJiAhY29uZmlnLnRscykge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoYEEgXCJodHRwczpcIiBVUkwgY2Fubm90IG9wdCBvdXQgb2YgVExTIGJ5IHVzaW5nID90bHM9MGAsIFwiVVJMX0lOVkFMSURcIik7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IGVuY29kZUJhc2VVcmwoY29uZmlnLnNjaGVtZSwgY29uZmlnLmF1dGhvcml0eSwgY29uZmlnLnBhdGgpO1xuICAgIHJldHVybiBuZXcgSHR0cENsaWVudCh1cmwsIGNvbmZpZy5hdXRoVG9rZW4sIGNvbmZpZy5pbnRNb2RlLCBjb25maWcuZmV0Y2gsIGNvbmZpZy5jb25jdXJyZW5jeSk7XG59XG5jb25zdCBzcWxDYWNoZUNhcGFjaXR5ID0gMzA7XG5leHBvcnQgY2xhc3MgSHR0cENsaWVudCB7XG4gICAgI2NsaWVudDtcbiAgICBwcm90b2NvbDtcbiAgICAjYXV0aFRva2VuO1xuICAgICNwcm9taXNlTGltaXRGdW5jdGlvbjtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3Rvcih1cmwsIGF1dGhUb2tlbiwgaW50TW9kZSwgY3VzdG9tRmV0Y2gsIGNvbmN1cnJlbmN5KSB7XG4gICAgICAgIHRoaXMuI2NsaWVudCA9IGhyYW5hLm9wZW5IdHRwKHVybCwgYXV0aFRva2VuLCBjdXN0b21GZXRjaCk7XG4gICAgICAgIHRoaXMuI2NsaWVudC5pbnRNb2RlID0gaW50TW9kZTtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IFwiaHR0cFwiO1xuICAgICAgICB0aGlzLiNhdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gICAgICAgIHRoaXMuI3Byb21pc2VMaW1pdEZ1bmN0aW9uID0gcHJvbWlzZUxpbWl0KGNvbmN1cnJlbmN5KTtcbiAgICB9XG4gICAgYXN5bmMgbGltaXQoZm4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Byb21pc2VMaW1pdEZ1bmN0aW9uKGZuKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzdG10T3JTcWwsIGFyZ3MpIHtcbiAgICAgICAgbGV0IHN0bXQ7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RtdE9yU3FsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBzdG10ID0ge1xuICAgICAgICAgICAgICAgIHNxbDogc3RtdE9yU3FsLFxuICAgICAgICAgICAgICAgIGFyZ3M6IGFyZ3MgfHwgW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RtdCA9IHN0bXRPclNxbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5saW1pdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhyYW5hU3RtdCA9IHN0bXRUb0hyYW5hKHN0bXQpO1xuICAgICAgICAgICAgICAgIC8vIFBpcGVsaW5lIGFsbCBvcGVyYXRpb25zLCBzbyBgaHJhbmEuSHR0cENsaWVudGAgY2FuIG9wZW4gdGhlIHN0cmVhbSwgZXhlY3V0ZSB0aGUgc3RhdGVtZW50IGFuZFxuICAgICAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBzdHJlYW0gaW4gYSBzaW5nbGUgSFRUUCByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGxldCByb3dzUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLiNjbGllbnQub3BlblN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NQcm9taXNlID0gc3RyZWFtLnF1ZXJ5KGhyYW5hU3RtdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0uY2xvc2VHcmFjZWZ1bGx5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3NSZXN1bHQgPSBhd2FpdCByb3dzUHJvbWlzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0U2V0RnJvbUhyYW5hKHJvd3NSZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goc3RtdHMsIG1vZGUgPSBcImRlZmVycmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBocmFuYVN0bXRzID0gc3RtdHMubWFwKHN0bXRUb0hyYW5hKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgdGhpcy4jY2xpZW50LmdldFZlcnNpb24oKTtcbiAgICAgICAgICAgICAgICAvLyBQaXBlbGluZSBhbGwgb3BlcmF0aW9ucywgc28gYGhyYW5hLkh0dHBDbGllbnRgIGNhbiBvcGVuIHRoZSBzdHJlYW0sIGV4ZWN1dGUgdGhlIGJhdGNoIGFuZFxuICAgICAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBzdHJlYW0gaW4gYSBzaW5nbGUgSFRUUCByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGxldCByZXN1bHRzUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLiNjbGllbnQub3BlblN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0IG1ha2VzIHNlbnNlIHRvIHVzZSBhIFNRTCBjYWNoZSBldmVuIGZvciBhIHNpbmdsZSBiYXRjaCwgYmVjYXVzZSBpdCBtYXkgY29udGFpbiB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZW1lbnQgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNxbENhY2hlID0gbmV3IFNxbENhY2hlKHN0cmVhbSwgc3FsQ2FjaGVDYXBhY2l0eSk7XG4gICAgICAgICAgICAgICAgICAgIHNxbENhY2hlLmFwcGx5KGhyYW5hU3RtdHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiB3ZSBkbyBub3QgdXNlIGEgY3Vyc29yIGhlcmUsIGJlY2F1c2UgaXQgd291bGQgY2F1c2UgdGhyZWUgcm91bmR0cmlwczpcbiAgICAgICAgICAgICAgICAgICAgLy8gMS4gcGlwZWxpbmUgcmVxdWVzdCB0byBzdG9yZSBTUUwgdGV4dHNcbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gY3Vyc29yIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgLy8gMy4gcGlwZWxpbmUgcmVxdWVzdCB0byBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gc3RyZWFtLmJhdGNoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1Byb21pc2UgPSBleGVjdXRlSHJhbmFCYXRjaChtb2RlLCB2ZXJzaW9uLCBiYXRjaCwgaHJhbmFTdG10cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0uY2xvc2VHcmFjZWZ1bGx5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCByZXN1bHRzUHJvbWlzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbWFwSHJhbmFFcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIG1pZ3JhdGUoc3RtdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBocmFuYVN0bXRzID0gc3RtdHMubWFwKHN0bXRUb0hyYW5hKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgdGhpcy4jY2xpZW50LmdldFZlcnNpb24oKTtcbiAgICAgICAgICAgICAgICAvLyBQaXBlbGluZSBhbGwgb3BlcmF0aW9ucywgc28gYGhyYW5hLkh0dHBDbGllbnRgIGNhbiBvcGVuIHRoZSBzdHJlYW0sIGV4ZWN1dGUgdGhlIGJhdGNoIGFuZFxuICAgICAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBzdHJlYW0gaW4gYSBzaW5nbGUgSFRUUCByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGxldCByZXN1bHRzUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLiNjbGllbnQub3BlblN0cmVhbSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gc3RyZWFtLmJhdGNoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1Byb21pc2UgPSBleGVjdXRlSHJhbmFCYXRjaChcImRlZmVycmVkXCIsIHZlcnNpb24sIGJhdGNoLCBocmFuYVN0bXRzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZUdyYWNlZnVsbHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHJlc3VsdHNQcm9taXNlO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdHJhbnNhY3Rpb24obW9kZSA9IFwid3JpdGVcIikge1xuICAgICAgICByZXR1cm4gdGhpcy5saW1pdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCB0aGlzLiNjbGllbnQuZ2V0VmVyc2lvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSHR0cFRyYW5zYWN0aW9uKHRoaXMuI2NsaWVudC5vcGVuU3RyZWFtKCksIG1vZGUsIHZlcnNpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtYXBIcmFuYUVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZU11bHRpcGxlKHNxbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saW1pdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFBpcGVsaW5lIGFsbCBvcGVyYXRpb25zLCBzbyBgaHJhbmEuSHR0cENsaWVudGAgY2FuIG9wZW4gdGhlIHN0cmVhbSwgZXhlY3V0ZSB0aGUgc2VxdWVuY2UgYW5kXG4gICAgICAgICAgICAgICAgLy8gY2xvc2UgdGhlIHN0cmVhbSBpbiBhIHNpbmdsZSBIVFRQIHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgbGV0IHByb21pc2U7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy4jY2xpZW50Lm9wZW5TdHJlYW0oKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gc3RyZWFtLnNlcXVlbmNlKHNxbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0uY2xvc2VHcmFjZWZ1bGx5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG1hcEhyYW5hRXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzeW5jKCkge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoXCJzeW5jIG5vdCBzdXBwb3J0ZWQgaW4gaHR0cCBtb2RlXCIsIFwiU1lOQ19OT1RfU1VQUE9SVEVEXCIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jY2xpZW50LmNsb3NlKCk7XG4gICAgfVxuICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjbGllbnQuY2xvc2VkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBIdHRwVHJhbnNhY3Rpb24gZXh0ZW5kcyBIcmFuYVRyYW5zYWN0aW9uIHtcbiAgICAjc3RyZWFtO1xuICAgICNzcWxDYWNoZTtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcihzdHJlYW0sIG1vZGUsIHZlcnNpb24pIHtcbiAgICAgICAgc3VwZXIobW9kZSwgdmVyc2lvbik7XG4gICAgICAgIHRoaXMuI3N0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgdGhpcy4jc3FsQ2FjaGUgPSBuZXcgU3FsQ2FjaGUoc3RyZWFtLCBzcWxDYWNoZUNhcGFjaXR5KTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2dldFN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0cmVhbTtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2dldFNxbENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3FsQ2FjaGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNzdHJlYW0uY2xvc2UoKTtcbiAgICB9XG4gICAgZ2V0IGNsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0cmVhbS5jbG9zZWQ7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IExpYnNxbEVycm9yIH0gZnJvbSBcIkBsaWJzcWwvY29yZS9hcGlcIjtcbmltcG9ydCB7IGV4cGFuZENvbmZpZyB9IGZyb20gXCJAbGlic3FsL2NvcmUvY29uZmlnXCI7XG5pbXBvcnQgeyBzdXBwb3J0ZWRVcmxMaW5rIH0gZnJvbSBcIkBsaWJzcWwvY29yZS91dGlsXCI7XG5pbXBvcnQgeyBfY3JlYXRlQ2xpZW50IGFzIF9jcmVhdGVXc0NsaWVudCB9IGZyb20gXCIuL3dzLmpzXCI7XG5pbXBvcnQgeyBfY3JlYXRlQ2xpZW50IGFzIF9jcmVhdGVIdHRwQ2xpZW50IH0gZnJvbSBcIi4vaHR0cC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIkBsaWJzcWwvY29yZS9hcGlcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnQoY29uZmlnKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVDbGllbnQoZXhwYW5kQ29uZmlnKGNvbmZpZywgdHJ1ZSkpO1xufVxuLyoqIEBwcml2YXRlICovXG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUNsaWVudChjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnNjaGVtZSA9PT0gXCJ3c1wiIHx8IGNvbmZpZy5zY2hlbWUgPT09IFwid3NzXCIpIHtcbiAgICAgICAgcmV0dXJuIF9jcmVhdGVXc0NsaWVudChjb25maWcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb25maWcuc2NoZW1lID09PSBcImh0dHBcIiB8fCBjb25maWcuc2NoZW1lID09PSBcImh0dHBzXCIpIHtcbiAgICAgICAgcmV0dXJuIF9jcmVhdGVIdHRwQ2xpZW50KGNvbmZpZyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgTGlic3FsRXJyb3IoJ1RoZSBjbGllbnQgdGhhdCB1c2VzIFdlYiBzdGFuZGFyZCBBUElzIHN1cHBvcnRzIG9ubHkgXCJsaWJzcWw6XCIsIFwid3NzOlwiLCBcIndzOlwiLCBcImh0dHBzOlwiIGFuZCBcImh0dHA6XCIgVVJMcywgJyArXG4gICAgICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkoY29uZmlnLnNjaGVtZSArIFwiOlwiKX0uIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgcmVhZCAke3N1cHBvcnRlZFVybExpbmt9YCwgXCJVUkxfU0NIRU1FX05PVF9TVVBQT1JURURcIik7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BsaWJzcWwvY2xpZW50JztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBOb3RlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZU1hbmFnZXIge1xuICAgIHByaXZhdGUgY2xpZW50OiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVDbGllbnQ+O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29uZmlnRGlyOiBzdHJpbmcsXG4gICAgICAgIHByaXZhdGUgbG9jYWxEYk5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSByZW1vdGVEYlVybDogc3RyaW5nLFxuICAgICAgICBwcml2YXRlIGF1dGhUb2tlbjogc3RyaW5nLFxuICAgICAgICBwcml2YXRlIHN5bmNJbnRlcnZhbDogbnVtYmVyID0gNjAgLy8gc3luYyBldmVyeSA2MCBzZWNvbmRzIGJ5IGRlZmF1bHRcbiAgICApIHsgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgY29uc3QgbG9jYWxEYlBhdGggPSBwYXRoLmpvaW4odGhpcy5jb25maWdEaXIsIHRoaXMubG9jYWxEYk5hbWUpO1xuXG4gICAgICAgIHRoaXMuY2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgICAgICAgICAgIHVybDogdGhpcy5yZW1vdGVEYlVybCxcbiAgICAgICAgICAgIC8vIHVybDogYGZpbGU6JHtsb2NhbERiUGF0aH1gLFxuICAgICAgICAgICAgLy8gc3luY1VybDogdGhpcy5yZW1vdGVEYlVybCxcbiAgICAgICAgICAgIGF1dGhUb2tlbjogdGhpcy5hdXRoVG9rZW4sXG4gICAgICAgICAgICAvLyBzeW5jSW50ZXJ2YWw6IHRoaXMuc3luY0ludGVydmFsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0YWJsZSBpZiBub3QgZXhpc3RzXG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmV4ZWN1dGUoYFxuICAgICAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbm90ZXMgKFxuICAgICAgICAgICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgICAgICAgICB0aXRsZSBURVhULFxuICAgICAgICAgICAgICAgIGNvbnRlbnQgVEVYVCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0IElOVEVHRVIsXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdCBJTlRFR0VSXG4gICAgICAgICAgICApXG4gICAgICAgIGApO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZE5vdGUodGl0bGU6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jbGllbnQuZXhlY3V0ZSh7XG4gICAgICAgICAgICBzcWw6ICdJTlNFUlQgSU5UTyBub3RlcyAodGl0bGUsIGNvbnRlbnQsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpIFZBTFVFUyAoPywgPywgPywgPykgUkVUVVJOSU5HIGlkJyxcbiAgICAgICAgICAgIGFyZ3M6IFt0aXRsZSwgY29udGVudCwgbm93LCBub3ddXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0uaWQgYXMgbnVtYmVyO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGUoaWQ6IG51bWJlcik6IFByb21pc2U8Tm90ZSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNsaWVudC5leGVjdXRlKHtcbiAgICAgICAgICAgIHNxbDogJ1NFTEVDVCAqIEZST00gbm90ZXMgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgICAgIGFyZ3M6IFtpZF1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQucm93c1swXSBhcyBOb3RlIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbE5vdGVzKCk6IFByb21pc2U8Tm90ZVtdPiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2xpZW50LmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gbm90ZXMnKTtcbiAgICAgICAgY29uc29sZS5sb2coXCI6OlJFU1VMVFwiLCByZXN1bHQpXG4gICAgICAgIHJldHVybiByZXN1bHQucm93cyBhcyBOb3RlW107XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlTm90ZShpZDogbnVtYmVyLCB0aXRsZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQuZXhlY3V0ZSh7XG4gICAgICAgICAgICBzcWw6ICdVUERBVEUgbm90ZXMgU0VUIHRpdGxlID0gPywgY29udGVudCA9ID8sIHVwZGF0ZWRfYXQgPSA/IFdIRVJFIGlkID0gPycsXG4gICAgICAgICAgICBhcmdzOiBbdGl0bGUsIGNvbnRlbnQsIG5vdywgaWRdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZU5vdGUoaWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5leGVjdXRlKHtcbiAgICAgICAgICAgIHNxbDogJ0RFTEVURSBGUk9NIG5vdGVzIFdIRVJFIGlkID0gPycsXG4gICAgICAgICAgICBhcmdzOiBbaWRdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHN5bmMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnN5bmMoKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgLy8gTm8gbmVlZCB0byBleHBsaWNpdGx5IGNsb3NlIHRoZSBjb25uZWN0aW9uXG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLHdGQUFBQSxTQUFBO0FBQUEsYUFBUyxRQUFTLE9BQU87QUFDdkIsVUFBSSxjQUFjO0FBQ2xCLFVBQUksT0FBTyxDQUFDO0FB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WCxVQUFVLEVBQUUsTUFBTSxPQUFPO0FBQUEsSUFDN0I7QUFBQSxFQUNKO0FBQUEsRUFDQSxFQUFFLEdBQUcsS0FBSztBQUFFLFFBQUksWUFBWSxFQUFFLE1BQU07QUFBQSxFQUFHO0FBQUEsRUFDdkMsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLGNBQWM7QUFBQSxFQUFHO0FBQUEsRUFDcEQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLGVBQWU7QUFBQSxFQUFHO0FBQUEsRUFDckQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxRQUFRLFdBQVc7QUFBQSxFQUFHO0FBQUEsRUFDbkQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxRQUFRLFNBQVM7QUFBQSxFQUFHO0FBQUEsRUFDakQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLGNBQWM7QUFBQSxFQUFHO0FBQUEsRUFDcEQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLGVBQWU7QUFBQSxFQUFHO0FBQUEsRUFDckQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxRQUFRLGVBQWU7QUFBQSxFQUFHO0FBQUEsRUFDdkQsRUFBRSxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLFdBQVc7QUFBQSxFQUFHO0FBQUEsRUFDakQsR0FBRyxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxRQUFRLFlBQVk7QUFBQSxFQUFHO0FBQUEsRUFDckQsR0FBRyxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLFlBQVk7QUFBQSxFQUFHO0FBQUEsRUFDbkQsR0FBRyxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxNQUFNLFlBQVk7QUFBQSxFQUFHO0FBQUEsRUFDbkQsR0FBRyxHQUFHLEtBQUs7QUFBRSxRQUFJLFdBQVcsRUFBRSxRQUFRLGlCQUFpQjtBQUFBLEVBQUc7QUFD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QixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDN0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNyQztBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFFBQUk7QUFDQSxZQUFNLEtBQUssR0FBRyxLQUFLO0FBQ25CLFVBQUksd0JBQU8sOEJBQThCO0FBQUEsSUFDN0MsU0FBUyxPQUFQO0FBQ0UsY0FBUSxNQUFNLGdCQUFnQixLQUFLO0FBQ25DLFVBQUksd0JBQU8seUNBQXlDO0FBQUEsSUFDeEQ7QUFBQSxFQUNKO0FBQ0o7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGF0aCIsICJlbmNvZGVVUkkiLCAicGF0aCIsICJhcnJheSIsICJmcmVlSWQiLCAiZW50cnkiLCAiU3RtdCIsICJCYXRjaCIsICJCYXRjaFN0ZXAiLCAiQmF0Y2hDb25kIiwgIlJlcXVlc3QiLCAiU3RtdCIsICJCYXRjaCIsICJTdG10IiwgIlZhbHVlIiwgIk5hbWVkQXJnIiwgIkJhdGNoIiwgIkJhdGNoU3RlcCIsICJCYXRjaENvbmQiLCAiQ2xpZW50TXNnIiwgIlN0bXQiLCAiQmF0Y2giLCAiRXJyb3IiLCAiVmFsdWUiLCAiRXJyb3IiLCAiRXJyb3IiLCAiU3RtdFJlc3VsdCIsICJDb2wiLCAiVmFsdWUiLCAiQmF0Y2hSZXN1bHQiLCAiQ3Vyc29yRW50cnkiLCAiRGVzY3JpYmVSZXN1bHQiLCAiRGVzY3JpYmVQYXJhbSIsICJEZXNjcmliZUNvbCIsICJTZXJ2ZXJNc2ciLCAiRXJyb3IiLCAiU3RtdFJlc3VsdCIsICJCYXRjaFJlc3VsdCIsICJDdXJzb3JFbnRyeSIsICJEZXNjcmliZVJlc3VsdCIsICJDbGllbnRNc2ciLCAiU2VydmVyTXNnIiwgIkVycm9yIiwgIlBpcGVsaW5lUmVzcEJvZHkiLCAiU3RyZWFtUmVzdWx0IiwgIlN0cmVhbVJlc3BvbnNlIiwgIkVycm9yIiwgIlN0bXRSZXN1bHQiLCAiQmF0Y2hSZXN1bHQiLCAiRGVzY3JpYmVSZXN1bHQiLCAiQ3Vyc29yUmVzcEJvZHkiLCAiQ3Vyc29yUmVzcEJvZHkiLCAiQ3Vyc29yRW50cnkiLCAiU3RtdCIsICJCYXRjaCIsICJQaXBlbGluZVJlcUJvZHkiLCAiU3RyZWFtUmVxdWVzdCIsICJDbG9zZVN0cmVhbVJlcSIsICJTdG10IiwgIkJhdGNoIiwgIkN1cnNvclJlcUJvZHkiLCAiZmV0Y2giLCAiUGlwZWxpbmVSZXFCb2R5IiwgIkN1cnNvclJlcUJvZHkiLCAiUGlwZWxpbmVSZXNwQm9keSIsICJmZXRjaCIsICJ2ZXJzaW9uIiwgIldzQ2xpZW50IiwgInByb21pc2VMaW1pdCIsICJ2ZXJzaW9uIiwgImltcG9ydF9wcm9taXNlX2xpbWl0IiwgIl9jcmVhdGVDbGllbnQiLCAiSHR0cENsaWVudCIsICJzcWxDYWNoZUNhcGFjaXR5IiwgInByb21pc2VMaW1pdCIsICJ2ZXJzaW9uIiwgIl9jcmVhdGVDbGllbnQiXQp9Cg==
